(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))c(p);new MutationObserver(p=>{for(const v of p)if(v.type==="childList")for(const _ of v.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function s(p){const v={};return p.integrity&&(v.integrity=p.integrity),p.referrerPolicy&&(v.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?v.credentials="include":p.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function c(p){if(p.ep)return;p.ep=!0;const v=s(p);fetch(p.href,v)}})();function Oe(){}const no=a=>a;function ro(a){return a()}function Ki(){return Object.create(null)}function rt(a){a.forEach(ro)}function bn(a){return typeof a=="function"}function jt(a,i){return a!=a?i==i:a!==i||a&&typeof a=="object"||typeof a=="function"}let Qn;function ji(a,i){return a===i?!0:(Qn||(Qn=document.createElement("a")),Qn.href=i,a===Qn.href)}function ea(a){return Object.keys(a).length===0}function io(a,...i){if(a==null){for(const c of i)c(void 0);return Oe}const s=a.subscribe(...i);return s.unsubscribe?()=>s.unsubscribe():s}function vt(a,i,s){a.$$.on_destroy.push(io(i,s))}function Ti(a){return a??""}function Ue(a,i,s){return a.set(s),i}function Ii(a){const i=typeof a=="string"&&a.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[a,"px"]}const oo=typeof window<"u";let ao=oo?()=>window.performance.now():()=>Date.now(),Vr=oo?a=>requestAnimationFrame(a):Oe;const Yt=new Set;function uo(a){Yt.forEach(i=>{i.c(a)||(Yt.delete(i),i.f())}),Yt.size!==0&&Vr(uo)}function so(a){let i;return Yt.size===0&&Vr(uo),{promise:new Promise(s=>{Yt.add(i={c:a,f:s})}),abort(){Yt.delete(i)}}}function H(a,i){a.appendChild(i)}function co(a){if(!a)return document;const i=a.getRootNode?a.getRootNode():a.ownerDocument;return i&&i.host?i:a.ownerDocument}function ta(a){const i=Q("style");return i.textContent="/* empty */",na(co(a),i),i.sheet}function na(a,i){return H(a.head||a,i),i.sheet}function ce(a,i,s){a.insertBefore(i,s||null)}function ae(a){a.parentNode&&a.parentNode.removeChild(a)}function Q(a){return document.createElement(a)}function Di(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function $e(a){return document.createTextNode(a)}function me(){return $e(" ")}function ra(){return $e("")}function Ve(a,i,s,c){return a.addEventListener(i,s,c),()=>a.removeEventListener(i,s,c)}function X(a,i,s){s==null?a.removeAttribute(i):a.getAttribute(i)!==s&&a.setAttribute(i,s)}function ia(a){return Array.from(a.childNodes)}function nt(a,i){i=""+i,a.data!==i&&(a.data=i)}function Bi(a,i){a.value=i??""}function Kt(a,i,s,c){s==null?a.style.removeProperty(i):a.style.setProperty(i,s,"")}function De(a,i,s){a.classList.toggle(i,!!s)}function oa(a,i,{bubbles:s=!1,cancelable:c=!1}={}){return new CustomEvent(a,{detail:i,bubbles:s,cancelable:c})}const Jn=new Map;let Zn=0;function aa(a){let i=5381,s=a.length;for(;s--;)i=(i<<5)-i^a.charCodeAt(s);return i>>>0}function ua(a,i){const s={stylesheet:ta(i),rules:{}};return Jn.set(a,s),s}function lo(a,i,s,c,p,v,_,d=0){const O=16.666/c;let C=`{
`;for(let L=0;L<=1;L+=O){const ee=i+(s-i)*v(L);C+=L*100+`%{${_(ee,1-ee)}}
`}const B=C+`100% {${_(s,1-s)}}
}`,D=`__svelte_${aa(B)}_${d}`,T=co(a),{stylesheet:j,rules:I}=Jn.get(T)||ua(T,a);I[D]||(I[D]=!0,j.insertRule(`@keyframes ${D} ${B}`,j.cssRules.length));const M=a.style.animation||"";return a.style.animation=`${M?`${M}, `:""}${D} ${c}ms linear ${p}ms 1 both`,Zn+=1,D}function Mr(a,i){const s=(a.style.animation||"").split(", "),c=s.filter(i?v=>v.indexOf(i)<0:v=>v.indexOf("__svelte")===-1),p=s.length-c.length;p&&(a.style.animation=c.join(", "),Zn-=p,Zn||sa())}function sa(){Vr(()=>{Zn||(Jn.forEach(a=>{const{ownerNode:i}=a.stylesheet;i&&ae(i)}),Jn.clear())})}let zr;function vn(a){zr=a}function ca(a,i){const s=a.$$.callbacks[i.type];s&&s.slice().forEach(c=>c.call(this,i))}const zt=[],Ri=[];let Ht=[];const qi=[],la=Promise.resolve();let Nr=!1;function fa(){Nr||(Nr=!0,la.then(fo))}function Xt(a){Ht.push(a)}const $r=new Set;let Ut=0;function fo(){if(Ut!==0)return;const a=zr;do{try{for(;Ut<zt.length;){const i=zt[Ut];Ut++,vn(i),ha(i.$$)}}catch(i){throw zt.length=0,Ut=0,i}for(vn(null),zt.length=0,Ut=0;Ri.length;)Ri.pop()();for(let i=0;i<Ht.length;i+=1){const s=Ht[i];$r.has(s)||($r.add(s),s())}Ht.length=0}while(zt.length);for(;qi.length;)qi.pop()();Nr=!1,$r.clear(),vn(a)}function ha(a){if(a.fragment!==null){a.update(),rt(a.before_update);const i=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,i),a.after_update.forEach(Xt)}}function da(a){const i=[],s=[];Ht.forEach(c=>a.indexOf(c)===-1?i.push(c):s.push(c)),s.forEach(c=>c()),Ht=i}let yn;function ho(){return yn||(yn=Promise.resolve(),yn.then(()=>{yn=null})),yn}function er(a,i,s){a.dispatchEvent(oa(`${i?"intro":"outro"}${s}`))}const Xn=new Set;let gt;function ut(){gt={r:0,c:[],p:gt}}function st(){gt.r||rt(gt.c),gt=gt.p}function be(a,i){a&&a.i&&(Xn.delete(a),a.i(i))}function _e(a,i,s,c){if(a&&a.o){if(Xn.has(a))return;Xn.add(a),gt.c.push(()=>{Xn.delete(a),c&&(s&&a.d(1),c())}),a.o(i)}else c&&c()}const po={duration:0};function pa(a,i,s){const c={direction:"in"};let p=i(a,s,c),v=!1,_,d,O=0;function C(){_&&Mr(a,_)}function B(){const{delay:T=0,duration:j=300,easing:I=no,tick:M=Oe,css:L}=p||po;L&&(_=lo(a,0,1,j,T,I,L,O++)),M(0,1);const ee=ao()+T,oe=ee+j;d&&d.abort(),v=!0,Xt(()=>er(a,!0,"start")),d=so(he=>{if(v){if(he>=oe)return M(1,0),er(a,!0,"end"),C(),v=!1;if(he>=ee){const ue=I((he-ee)/j);M(ue,1-ue)}}return v})}let D=!1;return{start(){D||(D=!0,Mr(a),bn(p)?(p=p(c),ho().then(B)):B())},invalidate(){D=!1},end(){v&&(C(),v=!1)}}}function ma(a,i,s){const c={direction:"out"};let p=i(a,s,c),v=!0,_;const d=gt;d.r+=1;let O;function C(){const{delay:B=0,duration:D=300,easing:T=no,tick:j=Oe,css:I}=p||po;I&&(_=lo(a,1,0,D,B,T,I));const M=ao()+B,L=M+D;Xt(()=>er(a,!1,"start")),"inert"in a&&(O=a.inert,a.inert=!0),so(ee=>{if(v){if(ee>=L)return j(0,1),er(a,!1,"end"),--d.r||rt(d.c),!1;if(ee>=M){const oe=T((ee-M)/D);j(1-oe,oe)}}return v})}return bn(p)?ho().then(()=>{p=p(c),C()}):C(),{end(B){B&&"inert"in a&&(a.inert=O),B&&p.tick&&p.tick(1,0),v&&(_&&Mr(a,_),v=!1)}}}function ze(a){return a?.length!==void 0?a:Array.from(a)}function ya(a,i){a.d(1),i.delete(a.key)}function gn(a,i){_e(a,1,1,()=>{i.delete(a.key)})}function Jt(a,i,s,c,p,v,_,d,O,C,B,D){let T=a.length,j=v.length,I=T;const M={};for(;I--;)M[a[I].key]=I;const L=[],ee=new Map,oe=new Map,he=[];for(I=j;I--;){const Y=D(p,v,I),de=s(Y);let pe=_.get(de);pe?he.push(()=>pe.p(Y,i)):(pe=C(de,Y),pe.c()),ee.set(de,L[I]=pe),de in M&&oe.set(de,Math.abs(I-M[de]))}const ue=new Set,ye=new Set;function z(Y){be(Y,1),Y.m(d,B),_.set(Y.key,Y),B=Y.first,j--}for(;T&&j;){const Y=L[j-1],de=a[T-1],pe=Y.key,we=de.key;Y===de?(B=Y.first,T--,j--):ee.has(we)?!_.has(pe)||ue.has(pe)?z(Y):ye.has(we)?T--:oe.get(pe)>oe.get(we)?(ye.add(pe),z(Y)):(ue.add(we),T--):(O(de,_),T--)}for(;T--;){const Y=a[T];ee.has(Y.key)||O(Y,_)}for(;j;)z(L[j-1]);return rt(he),L}function Ge(a){a&&a.c()}function We(a,i,s){const{fragment:c,after_update:p}=a.$$;c&&c.m(i,s),Xt(()=>{const v=a.$$.on_mount.map(ro).filter(bn);a.$$.on_destroy?a.$$.on_destroy.push(...v):rt(v),a.$$.on_mount=[]}),p.forEach(Xt)}function Ye(a,i){const s=a.$$;s.fragment!==null&&(da(s.after_update),rt(s.on_destroy),s.fragment&&s.fragment.d(i),s.on_destroy=s.fragment=null,s.ctx=[])}function va(a,i){a.$$.dirty[0]===-1&&(zt.push(a),fa(),a.$$.dirty.fill(0)),a.$$.dirty[i/31|0]|=1<<i%31}function Zt(a,i,s,c,p,v,_=null,d=[-1]){const O=zr;vn(a);const C=a.$$={fragment:null,ctx:[],props:v,update:Oe,not_equal:p,bound:Ki(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(O?O.$$.context:[])),callbacks:Ki(),dirty:d,skip_bound:!1,root:i.target||O.$$.root};_&&_(C.root);let B=!1;if(C.ctx=s?s(a,i.props||{},(D,T,...j)=>{const I=j.length?j[0]:T;return C.ctx&&p(C.ctx[D],C.ctx[D]=I)&&(!C.skip_bound&&C.bound[D]&&C.bound[D](I),B&&va(a,D)),T}):[],C.update(),B=!0,rt(C.before_update),C.fragment=c?c(C.ctx):!1,i.target){if(i.hydrate){const D=ia(i.target);C.fragment&&C.fragment.l(D),D.forEach(ae)}else C.fragment&&C.fragment.c();i.intro&&be(a.$$.fragment),We(a,i.target,i.anchor),fo()}vn(O)}class en{$$=void 0;$$set=void 0;$destroy(){Ye(this,1),this.$destroy=Oe}$on(i,s){if(!bn(s))return Oe;const c=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return c.push(s),()=>{const p=c.indexOf(s);p!==-1&&c.splice(p,1)}}$set(i){this.$$set&&!ea(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}}const ga="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ga);const Vt=[];function ba(a,i){return{subscribe:_n(a,i).subscribe}}function _n(a,i=Oe){let s;const c=new Set;function p(d){if(jt(a,d)&&(a=d,s)){const O=!Vt.length;for(const C of c)C[1](),Vt.push(C,a);if(O){for(let C=0;C<Vt.length;C+=2)Vt[C][0](Vt[C+1]);Vt.length=0}}}function v(d){p(d(a))}function _(d,O=Oe){const C=[d,O];return c.add(C),c.size===1&&(s=i(p,v)||Oe),d(a),()=>{c.delete(C),c.size===0&&s&&(s(),s=null)}}return{set:p,update:v,subscribe:_}}function mo(a,i,s){const c=!Array.isArray(a),p=c?[a]:a;if(!p.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const v=i.length<2;return ba(s,(_,d)=>{let O=!1;const C=[];let B=0,D=Oe;const T=()=>{if(B)return;D();const I=i(c?C[0]:C,_,d);v?_(I):D=bn(I)?I:Oe},j=p.map((I,M)=>io(I,L=>{C[M]=L,B&=~(1<<M),O&&T()},()=>{B|=1<<M}));return O=!0,T(),function(){rt(j),D(),O=!1}})}var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _a(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var yo={exports:{}};(function(a,i){(function(s,c){a.exports=c()})($i,function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])})(e,t)},c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t,n){for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$i,_=Object.keys,d=Array.isArray;function O(e,t){return typeof t!="object"||_(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||v.Promise||(v.Promise=Promise);var C=Object.getPrototypeOf,B={}.hasOwnProperty;function D(e,t){return B.call(e,t)}function T(e,t){typeof t=="function"&&(t=t(C(e))),(typeof Reflect>"u"?_:Reflect.ownKeys)(t).forEach(function(n){I(e,n,t[n])})}var j=Object.defineProperty;function I(e,t,n,r){j(e,t,O(n&&D(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function M(e){return{from:function(t){return e.prototype=Object.create(t.prototype),I(e.prototype,"constructor",e),{extend:T.bind(null,e.prototype)}}}}var L=Object.getOwnPropertyDescriptor,ee=[].slice;function oe(e,t,n){return ee.call(e,t,n)}function he(e,t){return t(e)}function ue(e){if(!e)throw new Error("Assertion Failed")}function ye(e){v.setImmediate?setImmediate(e):setTimeout(e,0)}function z(e,t){if(typeof t=="string"&&D(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var u=z(e,t[r]);n.push(u)}return n}var l=t.indexOf(".");if(l!==-1){var f=e[t.substr(0,l)];return f==null?void 0:z(f,t.substr(l+1))}}function Y(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ue(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)Y(e,t[r],n[r])}else{var u,l,f=t.indexOf(".");f!==-1?(u=t.substr(0,f),(l=t.substr(f+1))===""?n===void 0?d(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n:Y(f=!(f=e[u])||!D(e,u)?e[u]={}:f,l,n)):n===void 0?d(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function de(e){var t,n={};for(t in e)D(e,t)&&(n[t]=e[t]);return n}var pe=[].concat;function we(e){return pe.apply([],e)}var ot="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(we([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return v[e]}),Ke=new Set(ot.map(function(e){return v[e]})),te=null;function ve(e){return te=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=te.get(n);if(r)return r;if(d(n)){r=[],te.set(n,r);for(var o=0,u=n.length;o<u;++o)r.push(t(n[o]))}else if(Ke.has(n.constructor))r=n;else{var l,f=C(n);for(l in r=f===Object.prototype?{}:Object.create(f),te.set(n,r),n)D(n,l)&&(r[l]=t(n[l]))}return r}(e),te=null,e}var Me={}.toString;function It(e){return Me.call(e).slice(8,-1)}var Ne=typeof Symbol<"u"?Symbol.iterator:"@@iterator",wn=typeof Ne=="symbol"?function(e){var t;return e!=null&&(t=e[Ne])&&t.apply(e)}:function(){return null};function Qe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Be={};function Fe(e){var t,n,r,o;if(arguments.length===1){if(d(e))return e.slice();if(this===Be&&typeof e=="string")return[e];if(o=wn(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var le=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},rn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Le=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(rn),Pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(e,t){this.name=e,this.message=t}function Dt(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,o){return o.indexOf(n)===r}).join(`
`)}function kn(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Dt(e,t)}function Bt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Dt(e,this.failures)}M(Xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(kn).from(Xe),M(Bt).from(Xe);var tr=Le.reduce(function(e,t){return e[t]=t+"Error",e},{}),Oo=Xe,J=Le.reduce(function(e,t){var n=t+"Error";function r(o,u){this.name=n,o?typeof o=="string"?(this.message="".concat(o).concat(u?`
 `+u:""),this.inner=u||null):typeof o=="object"&&(this.message="".concat(o.name," ").concat(o.message),this.inner=o):(this.message=Pe[t]||n,this.inner=null)}return M(r).from(Oo),e[t]=r,e},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Qr=rn.reduce(function(e,t){return e[t+"Error"]=J[t],e},{}),On=Le.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=J[t]),e},{});function ge(){}function tn(e){return e}function Eo(e,t){return e==null||e===tn?t:function(n){return t(e(n))}}function bt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xo(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?bt(r,this.onsuccess):r),o&&(this.onerror=this.onerror?bt(o,this.onerror):o),u!==void 0?u:n}}function Ao(e,t){return e===ge?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?bt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?bt(r,this.onerror):r)}}function Po(e,t){return e===ge?t:function(n){var r=e.apply(this,arguments);O(n,r);var o=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?bt(o,this.onsuccess):o),u&&(this.onerror=this.onerror?bt(u,this.onerror):u),r===void 0?n===void 0?void 0:n:O(r,n)}}function So(e,t){return e===ge?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function nr(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return n.then(function(){return t.apply(r,u)})}return t.apply(this,arguments)}}On.ModifyError=kn,On.DexieError=Xe,On.BulkError=Bt;var Je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xr(e){Je=e}var nn={},Jr=100,ot=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,C(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,C(t),e]}(),rn=ot[0],Le=ot[1],ot=ot[2],Le=Le&&Le.then,_t=rn&&rn.constructor,rr=!!ot,on=function(e,t){an.push([e,t]),En&&(queueMicrotask(Ko),En=!1)},ir=!0,En=!0,wt=[],xn=[],or=tn,ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ge,pgp:!1,env:{},finalize:ge},G=ct,an=[],kt=0,An=[];function V(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=G;if(typeof e!="function"){if(e!==nn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ur(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,o){try{o(function(u){if(r._state===null){if(u===r)throw new TypeError("A promise cannot be resolved with itself.");var l=r._lib&&Rt();u&&typeof u.then=="function"?n(r,function(f,m){u instanceof V?u._then(f,m):u.then(f,m)}):(r._state=!0,r._value=u,ei(r)),l&&qt()}},ur.bind(null,r))}catch(u){ur(r,u)}}(this,e)}var ar={get:function(){var e=G,t=Kn;function n(r,o){var u=this,l=!e.global&&(e!==G||t!==Kn),f=l&&!ft(),m=new V(function(g,k){sr(u,new Zr(ni(r,e,l,f),ni(o,e,l,f),g,k,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return n.prototype=nn,n},set:function(e){I(this,"then",e&&e.prototype===nn?ar:{get:function(){return e},set:ar.set})}};function Zr(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}function ur(e,t){var n,r;xn.push(t),e._state===null&&(n=e._lib&&Rt(),t=or(t),e._state=!1,e._value=t,r=e,wt.some(function(o){return o._value===r._value})||wt.push(r),ei(e),n&&qt())}function ei(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)sr(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),kt===0&&(++kt,on(function(){--kt==0&&cr()},[]))}function sr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++kt,on(Co,[n,e,t])}else e._listeners.push(t)}function Co(e,t,n){try{var r,o=t._value;!t._state&&xn.length&&(xn=[]),r=Je&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||xn.indexOf(o)!==-1||function(u){for(var l=wt.length;l;)if(wt[--l]._value===u._value)return wt.splice(l,1)}(t),n.resolve(r)}catch(u){n.reject(u)}finally{--kt==0&&cr(),--n.psd.ref||n.psd.finalize()}}function Ko(){Ot(ct,function(){Rt()&&qt()})}function Rt(){var e=ir;return En=ir=!1,e}function qt(){var e,t,n;do for(;0<an.length;)for(e=an,an=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<an.length);En=ir=!0}function cr(){var e=wt;wt=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=An.slice(0),n=t.length;n;)t[--n]()}function Pn(e){return new V(nn,!1,e)}function Ee(e,t){var n=G;return function(){var r=Rt(),o=G;try{return ht(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{ht(o,!1),r&&qt()}}}T(V.prototype,{then:ar,_then:function(e,t){sr(this,new Zr(null,null,e,t,G))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Pn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Pn)(r)})},finally:function(e){return this.then(function(t){return V.resolve(e()).then(function(){return t})},function(t){return V.resolve(e()).then(function(){return Pn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new V(function(r,o){var u=setTimeout(function(){return o(new J.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&I(V.prototype,Symbol.toStringTag,"Dexie.Promise"),ct.env=ti(),T(V,{all:function(){var e=Fe.apply(null,arguments).map(jn);return new V(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,u){return V.resolve(o).then(function(l){e[u]=l,--r||t(e)},n)})})},resolve:function(e){return e instanceof V?e:e&&typeof e.then=="function"?new V(function(t,n){e.then(t,n)}):new V(nn,!0,e)},reject:Pn,race:function(){var e=Fe.apply(null,arguments).map(jn);return new V(function(t,n){e.map(function(r){return V.resolve(r).then(t,n)})})},PSD:{get:function(){return G},set:function(e){return G=e}},totalEchoes:{get:function(){return Kn}},newPSD:lt,usePSD:Ot,scheduler:{get:function(){return on},set:function(e){on=e}},rejectionMapper:{get:function(){return or},set:function(e){or=e}},follow:function(e,t){return new V(function(n,r){return lt(function(o,u){var l=G;l.unhandleds=[],l.onunhandled=u,l.finalize=bt(function(){var f,m=this;f=function(){m.unhandleds.length===0?o():u(m.unhandleds[0])},An.push(function g(){f(),An.splice(An.indexOf(g),1)}),++kt,on(function(){--kt==0&&cr()},[])},l.finalize),e()},t,n,r)})}}),_t&&(_t.allSettled&&I(V,"allSettled",function(){var e=Fe.apply(null,arguments).map(jn);return new V(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(o,u){return V.resolve(o).then(function(l){return r[u]={status:"fulfilled",value:l}},function(l){return r[u]={status:"rejected",reason:l}}).then(function(){return--n||t(r)})})})}),_t.any&&typeof AggregateError<"u"&&I(V,"any",function(){var e=Fe.apply(null,arguments).map(jn);return new V(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(u,l){return V.resolve(u).then(function(f){return t(f)},function(f){o[l]=f,--r||n(new AggregateError(o))})})})}),_t.withResolvers&&(V.withResolvers=_t.withResolvers));var Se={awaits:0,echoes:0,id:0},jo=0,Sn=[],Cn=0,Kn=0,To=0;function lt(e,t,n,r){var o=G,u=Object.create(o);return u.parent=o,u.ref=0,u.global=!1,u.id=++To,ct.env,u.env=rr?{Promise:V,PromiseProp:{value:V,configurable:!0,writable:!0},all:V.all,race:V.race,allSettled:V.allSettled,any:V.any,resolve:V.resolve,reject:V.reject}:{},t&&O(u,t),++o.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ot(u,e,n,r),u.ref===0&&u.finalize(),r}function $t(){return Se.id||(Se.id=++jo),++Se.awaits,Se.echoes+=Jr,Se.id}function ft(){return!!Se.awaits&&(--Se.awaits==0&&(Se.id=0),Se.echoes=Se.awaits*Jr,!0)}function jn(e){return Se.echoes&&e&&e.constructor===_t?($t(),e.then(function(t){return ft(),t},function(t){return ft(),xe(t)})):e}function Io(){var e=Sn[Sn.length-1];Sn.pop(),ht(e,!1)}function ht(e,t){var n,r=G;(t?!Se.echoes||Cn++&&e===G:!Cn||--Cn&&e===G)||queueMicrotask(t?function(o){++Kn,Se.echoes&&--Se.echoes!=0||(Se.echoes=Se.awaits=Se.id=0),Sn.push(G),ht(o,!0)}.bind(null,e):Io),e!==G&&(G=e,r===ct&&(ct.env=ti()),rr&&(n=ct.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(v,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function ti(){var e=v.Promise;return rr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ot(e,t,n,r,o){var u=G;try{return ht(e,!0),t(n,r,o)}finally{ht(u,!1)}}function ni(e,t,n,r){return typeof e!="function"?e:function(){var o=G;n&&$t(),ht(t,!0);try{return e.apply(this,arguments)}finally{ht(o,!1),r&&queueMicrotask(ft)}}}function lr(e){Promise===_t&&Se.echoes===0?Cn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Le).indexOf("[native code]")===-1&&($t=ft=ge);var xe=V.reject,Et="ï¿¿",it="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ri="String expected.",Mt=[],Tn="__dbnames",fr="readonly",hr="readwrite";function xt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ii={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function In(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=ve(t))[e],t}}function oi(){throw J.Type()}function se(e,t){try{var n=ai(e),r=ai(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(o,u){for(var l=o.length,f=u.length,m=l<f?l:f,g=0;g<m;++g)if(o[g]!==u[g])return o[g]<u[g]?-1:1;return l===f?0:l<f?-1:1}(ui(e),ui(t));case"Array":return function(o,u){for(var l=o.length,f=u.length,m=l<f?l:f,g=0;g<m;++g){var k=se(o[g],u[g]);if(k!==0)return k}return l===f?0:l<f?-1:1}(e,t)}}catch{}return NaN}function ai(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=It(e),e==="ArrayBuffer"?"binary":e)}function ui(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var si=(ke.prototype._trans=function(e,t,n){var r=this._tx||G.trans,o=this.name,u=Je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function l(g,k,h){if(!h.schema[o])throw new J.NotFound("Table "+o+" not part of transaction");return t(h.idbtrans,h)}var f=Rt();try{var m=r&&r.db._novip===this.db._novip?r===G.trans?r._promise(e,l,n):lt(function(){return r._promise(e,l,n)},{trans:r,transless:G.transless||G}):function g(k,h,x,y){if(k.idbdb&&(k._state.openComplete||G.letThrough||k._vip)){var w=k._createTransaction(h,x,k._dbSchema);try{w.create(),k._state.PR1398_maxLoop=3}catch(E){return E.name===tr.InvalidState&&k.isOpen()&&0<--k._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),k.close({disableAutoOpen:!1}),k.open().then(function(){return g(k,h,x,y)})):xe(E)}return w._promise(h,function(E,b){return lt(function(){return G.trans=w,y(E,b,w)})}).then(function(E){if(h==="readwrite")try{w.idbtrans.commit()}catch{}return h==="readonly"?E:w._completion.then(function(){return E})})}if(k._state.openComplete)return xe(new J.DatabaseClosed(k._state.dbOpenError));if(!k._state.isBeingOpened){if(!k._state.autoOpen)return xe(new J.DatabaseClosed);k.open().catch(ge)}return k._state.dbReadyPromise.then(function(){return g(k,h,x,y)})}(this.db,e,[this.name],l);return u&&(m._consoleTask=u,m=m.catch(function(g){return console.trace(g),xe(g)})),m}finally{f&&qt()}},ke.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?xe(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(o){return n.hook.reading.fire(o)})}).then(t)},ke.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(d(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=_(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(f){if(f.compound&&t.every(function(g){return 0<=f.keyPath.indexOf(g)})){for(var m=0;m<t.length;++m)if(t.indexOf(f.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(f,m){return f.keyPath.length-m.keyPath.length})[0];if(n&&this.db._maxKey!==Et){var u=n.keyPath.slice(0,t.length);return this.where(u).equals(u.map(function(m){return e[m]}))}!n&&Je&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function o(f,m){return se(f,m)===0}var l=t.reduce(function(h,m){var g=h[0],k=h[1],h=r[m],x=e[m];return[g||h,g||!h?xt(k,h&&h.multi?function(y){return y=z(y,m),d(y)&&y.some(function(w){return o(x,w)})}:function(y){return o(x,z(y,m))}):k]},[null,null]),u=l[0],l=l[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},ke.prototype.filter=function(e){return this.toCollection().and(e)},ke.prototype.count=function(e){return this.toCollection().count(e)},ke.prototype.offset=function(e){return this.toCollection().offset(e)},ke.prototype.limit=function(e){return this.toCollection().limit(e)},ke.prototype.each=function(e){return this.toCollection().each(e)},ke.prototype.toArray=function(e){return this.toCollection().toArray(e)},ke.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ke.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,d(e)?"[".concat(e.join("+"),"]"):e))},ke.prototype.reverse=function(){return this.toCollection().reverse()},ke.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function o(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof oi&&(function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function k(){this.constructor=m}s(m,g),m.prototype=g===null?Object.create(g):(k.prototype=g.prototype,new k)}(o,t=e),Object.defineProperty(o.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),o.prototype.table=function(){return r},e=o);for(var u=new Set,l=e.prototype;l;l=C(l))Object.getOwnPropertyNames(l).forEach(function(m){return u.add(m)});function f(m){if(!m)return m;var g,k=Object.create(e.prototype);for(g in m)if(!u.has(g))try{k[g]=m[g]}catch{}return k}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),e},ke.prototype.defineClass=function(){return this.mapToClass(function(e){O(this,e)})},ke.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,u=r.keyPath,l=e;return u&&o&&(l=In(u)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"add",keys:t!=null?[t]:null,values:[l]})}).then(function(f){return f.numFailures?V.reject(f.failures[0]):f.lastResult}).then(function(f){if(u)try{Y(e,u,f)}catch{}return f})},ke.prototype.update=function(e,t){return typeof e!="object"||d(e)?this.where(":id").equals(e).modify(t):(e=z(e,this.schema.primKey.keyPath),e===void 0?xe(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},ke.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,u=r.keyPath,l=e;return u&&o&&(l=In(u)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"put",values:[l],keys:t!=null?[t]:null})}).then(function(f){return f.numFailures?V.reject(f.failures[0]):f.lastResult}).then(function(f){if(u)try{Y(e,u,f)}catch{}return f})},ke.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?V.reject(n.failures[0]):void 0})},ke.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ii})}).then(function(t){return t.numFailures?V.reject(t.failures[0]):void 0})},ke.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(o){return t.hook.reading.fire(o)})})})},ke.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,u=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(l){var g=r.schema.primKey,f=g.auto,g=g.keyPath;if(g&&o)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,g=g&&f?e.map(In(g)):e;return r.core.mutate({trans:l,type:"add",keys:o,values:g,wantResults:u}).then(function(w){var h=w.numFailures,x=w.results,y=w.lastResult,w=w.failures;if(h===0)return u?x:y;throw new Bt("".concat(r.name,".bulkAdd(): ").concat(h," of ").concat(m," operations failed"),w)})})},ke.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,u=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(l){var g=r.schema.primKey,f=g.auto,g=g.keyPath;if(g&&o)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,g=g&&f?e.map(In(g)):e;return r.core.mutate({trans:l,type:"put",keys:o,values:g,wantResults:u}).then(function(w){var h=w.numFailures,x=w.results,y=w.lastResult,w=w.failures;if(h===0)return u?x:y;throw new Bt("".concat(r.name,".bulkPut(): ").concat(h," of ").concat(m," operations failed"),w)})})},ke.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(l){return l.key}),o=e.map(function(l){return l.changes}),u=[];return this._trans("readwrite",function(l){return n.getMany({trans:l,keys:r,cache:"clone"}).then(function(f){var m=[],g=[];e.forEach(function(h,x){var y=h.key,w=h.changes,E=f[x];if(E){for(var b=0,A=Object.keys(w);b<A.length;b++){var P=A[b],S=w[P];if(P===t.schema.primKey.keyPath){if(se(S,y)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else Y(E,P,S)}u.push(x),m.push(y),g.push(E)}});var k=m.length;return n.mutate({trans:l,type:"put",keys:m,values:g,updates:{keys:r,changeSpecs:o}}).then(function(h){var x=h.numFailures,y=h.failures;if(x===0)return k;for(var w=0,E=Object.keys(y);w<E.length;w++){var b,A=E[w],P=u[Number(A)];P!=null&&(b=y[A],delete y[A],y[P]=b)}throw new Bt("".concat(t.name,".bulkUpdate(): ").concat(x," of ").concat(k," operations failed"),y)})})})},ke.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(l){var o=l.numFailures,u=l.lastResult,l=l.failures;if(o===0)return u;throw new Bt("".concat(t.name,".bulkDelete(): ").concat(o," of ").concat(n," operations failed"),l)})},ke);function ke(){}function un(e){function t(l,f){if(f){for(var m=arguments.length,g=new Array(m-1);--m;)g[m-1]=arguments[m];return n[l].subscribe.apply(null,g),e}if(typeof l=="string")return n[l]}var n={};t.addEventType=u;for(var r=1,o=arguments.length;r<o;++r)u(arguments[r]);return t;function u(l,f,m){if(typeof l!="object"){var g;f=f||So;var k={subscribers:[],fire:m=m||ge,subscribe:function(h){k.subscribers.indexOf(h)===-1&&(k.subscribers.push(h),k.fire=f(k.fire,h))},unsubscribe:function(h){k.subscribers=k.subscribers.filter(function(x){return x!==h}),k.fire=k.subscribers.reduce(f,m)}};return n[l]=t[l]=k}_(g=l).forEach(function(h){var x=g[h];if(d(x))u(h,g[h][0],g[h][1]);else{if(x!=="asap")throw new J.InvalidArgument("Invalid event config");var y=u(h,tn,function(){for(var w=arguments.length,E=new Array(w);w--;)E[w]=arguments[w];y.subscribers.forEach(function(b){ye(function(){b.apply(null,E)})})})}})}}function sn(e,t){return M(t).from({prototype:e}),t}function Nt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function dr(e,t){e.filter=xt(e.filter,t)}function pr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return xt(r(),t())}:t,e.justLimit=n&&!r}function Dn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new J.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ci(e,t,n){var r=Dn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Bn(e,t,n,r){var o=e.replayFilter?xt(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},l=function(f,m,g){var k,h;o&&!o(m,g,function(x){return m.stop(x)},function(x){return m.fail(x)})||((h=""+(k=m.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(k)),D(u,h)||(u[h]=!0,t(f,m,g)))};return Promise.all([e.or._iterate(l,n),li(ci(e,r,n),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}return li(ci(e,r,n),xt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function li(e,t,n,r){var o=Ee(r?function(u,l,f){return n(r(u),l,f)}:n);return e.then(function(u){if(u)return u.start(function(){var l=function(){return u.continue()};t&&!t(u,function(f){return l=f},function(f){u.stop(f),l=ge},function(f){u.fail(f),l=ge})||o(u.value,u,function(f){return l=f}),l()})})}var ot=Symbol(),cn=(fi.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(d(t))return p(p([],d(e)?e:[],!0),t).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var n=this.remove;if(d(n))return d(e)?e.filter(function(r){return!n.includes(r)}).sort():[];if(typeof n=="number")return Number(e)-n;if(typeof n=="bigint")try{return BigInt(e)-n}catch{return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},fi);function fi(e){Object.assign(this,e)}var Do=(fe.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,xe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},fe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},fe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=xt(t.algorithm,e)},fe.prototype._iterate=function(e,t){return Bn(this._ctx,e,t,this._ctx.table.core)},fe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&O(n,e),t._ctx=n,t},fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},fe.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Bn(t,e,n,t.table.core)})},fe.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,o=r.table.core;if(Nt(r,!0))return o.count({trans:n,query:{index:Dn(r,o.schema),range:r.range}}).then(function(l){return Math.min(l,r.limit)});var u=0;return Bn(r,function(){return++u,!1},n,o).then(function(){return u})}).then(e)},fe.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function u(m,g){return g?u(m[n[g]],g-1):m[r]}var l=this._ctx.dir==="next"?1:-1;function f(m,g){return se(u(m,o),u(g,o))*l}return this.toArray(function(m){return m.sort(f)}).then(t)},fe.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&Nt(r,!0)&&0<r.limit){var o=r.valueMapper,u=Dn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:u,range:r.range}}).then(function(f){return f=f.result,o?f.map(o):f})}var l=[];return Bn(r,function(f){return l.push(f)},n,r.table.core).then(function(){return l})},e)},fe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Nt(t)?pr(t,function(){var n=e;return function(r,o){return n===0||(n===1?--n:o(function(){r.advance(n),n=0}),!1)}}):pr(t,function(){var n=e;return function(){return--n<0}})),this},fe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),pr(this._ctx,function(){var t=e;return function(n,r,o){return--t<=0&&r(o),0<=t}},!0),this},fe.prototype.until=function(e,t){return dr(this._ctx,function(n,r,o){return!e(n.value)||(r(o),t)}),this},fe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},fe.prototype.last=function(e){return this.reverse().first(e)},fe.prototype.filter=function(e){var t;return dr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=xt(t.isMatch,e),this},fe.prototype.and=function(e){return this.filter(e)},fe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},fe.prototype.desc=function(){return this.reverse()},fe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},fe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},fe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},fe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,o){n.push(o.key)}).then(function(){return n}).then(e)},fe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Nt(t,!0)&&0<t.limit)return this._read(function(r){var o=Dn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:o,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,o){n.push(o.primaryKey)}).then(function(){return n}).then(e)},fe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},fe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},fe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},fe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return dr(this._ctx,function(o){var r=o.primaryKey.toString(),o=D(t,r);return t[r]=!0,!o}),this},fe.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o,u,l;l=typeof e=="function"?e:(o=_(e),u=o.length,function(b){for(var A=!1,P=0;P<u;++P){var S=o[P],K=e[S],R=z(b,S);K instanceof cn?(Y(b,S,K.execute(R)),A=!0):R!==K&&(Y(b,S,K),A=!0)}return A});function f(b,S){var P=S.failures,S=S.numFailures;w+=b-S;for(var K=0,R=_(P);K<R.length;K++){var N=R[K];y.push(P[N])}}var m=n.table.core,g=m.schema.primaryKey,k=g.outbound,h=g.extractKey,x=t.db._options.modifyChunkSize||200,y=[],w=0,E=[];return t.clone().primaryKeys().then(function(b){function A(S){var K=Math.min(x,b.length-S);return m.getMany({trans:r,keys:b.slice(S,S+K),cache:"immutable"}).then(function(R){for(var N=[],q=[],$=k?[]:null,U=[],F=0;F<K;++F){var W=R[F],Z={value:ve(W),primKey:b[S+F]};l.call(Z,Z.value,Z)!==!1&&(Z.value==null?U.push(b[S+F]):k||se(h(W),h(Z.value))===0?(q.push(Z.value),k&&$.push(b[S+F])):(U.push(b[S+F]),N.push(Z.value)))}return Promise.resolve(0<N.length&&m.mutate({trans:r,type:"add",values:N}).then(function(ie){for(var ne in ie.failures)U.splice(parseInt(ne),1);f(N.length,ie)})).then(function(){return(0<q.length||P&&typeof e=="object")&&m.mutate({trans:r,type:"put",keys:$,values:q,criteria:P,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<S}).then(function(ie){return f(q.length,ie)})}).then(function(){return(0<U.length||P&&e===mr)&&m.mutate({trans:r,type:"delete",keys:U,criteria:P,isAdditionalChunk:0<S}).then(function(ie){return f(U.length,ie)})}).then(function(){return b.length>S+K&&A(S+x)})})}var P=Nt(n)&&n.limit===1/0&&(typeof e!="function"||e===mr)&&{index:n.index,range:n.range};return A(0).then(function(){if(0<y.length)throw new kn("Error modifying one or more objects",y,w,E);return b.length})})})},fe.prototype.delete=function(){var e=this._ctx,t=e.range;return Nt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(function(u){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(l){var f=l.failures;if(l.lastResult,l.results,l=l.numFailures,l)throw new kn("Could not delete some values",Object.keys(f).map(function(m){return f[m]}),u-l);return u-l})})}):this.modify(mr)},fe);function fe(){}var mr=function(e,t){return t.value=null};function Bo(e,t){return e<t?-1:e===t?0:1}function Ro(e,t){return t<e?-1:e===t?0:1}function qe(e,t,n){return e=e instanceof di?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function Ft(e){return new e.Collection(e,function(){return hi("")}).limit(0)}function Rn(e,t,n,r){var o,u,l,f,m,g,k,h=n.length;if(!n.every(function(w){return typeof w=="string"}))return qe(e,ri);function x(w){o=w==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},u=w==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},l=w==="next"?Bo:Ro;var E=n.map(function(b){return{lower:u(b),upper:o(b)}}).sort(function(b,A){return l(b.lower,A.lower)});f=E.map(function(b){return b.upper}),m=E.map(function(b){return b.lower}),k=(g=w)==="next"?"":r}x("next"),e=new e.Collection(e,function(){return dt(f[0],m[h-1]+r)}),e._ondirectionchange=function(w){x(w)};var y=0;return e._addAlgorithm(function(w,E,b){var A=w.key;if(typeof A!="string")return!1;var P=u(A);if(t(P,m,y))return!0;for(var S=null,K=y;K<h;++K){var R=function(N,q,$,U,F,W){for(var Z=Math.min(N.length,U.length),ie=-1,ne=0;ne<Z;++ne){var He=q[ne];if(He!==U[ne])return F(N[ne],$[ne])<0?N.substr(0,ne)+$[ne]+$.substr(ne+1):F(N[ne],U[ne])<0?N.substr(0,ne)+U[ne]+$.substr(ne+1):0<=ie?N.substr(0,ie)+q[ie]+$.substr(ie+1):null;F(N[ne],He)<0&&(ie=ne)}return Z<U.length&&W==="next"?N+$.substr(N.length):Z<N.length&&W==="prev"?N.substr(0,$.length):ie<0?null:N.substr(0,ie)+U[ie]+$.substr(ie+1)}(A,P,f[K],m[K],l,g);R===null&&S===null?y=K+1:(S===null||0<l(S,R))&&(S=R)}return E(S!==null?function(){w.continue(S+k)}:b),!1}),e}function dt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function hi(e){return{type:1,lower:e,upper:e}}var di=(Object.defineProperty(Ce.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ce.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?Ft(this):new this.Collection(this,function(){return dt(e,t,!n,!r)})}catch{return qe(this,it)}},Ce.prototype.equals=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return hi(e)})},Ce.prototype.above=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(e,void 0,!0)})},Ce.prototype.aboveOrEqual=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(e,void 0,!1)})},Ce.prototype.below=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(void 0,e,!1,!0)})},Ce.prototype.belowOrEqual=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(void 0,e)})},Ce.prototype.startsWith=function(e){return typeof e!="string"?qe(this,ri):this.between(e,e+Et,!0,!0)},Ce.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Rn(this,function(t,n){return t.indexOf(n[0])===0},[e],Et)},Ce.prototype.equalsIgnoreCase=function(e){return Rn(this,function(t,n){return t===n[0]},[e],"")},Ce.prototype.anyOfIgnoreCase=function(){var e=Fe.apply(Be,arguments);return e.length===0?Ft(this):Rn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},Ce.prototype.startsWithAnyOfIgnoreCase=function(){var e=Fe.apply(Be,arguments);return e.length===0?Ft(this):Rn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,Et)},Ce.prototype.anyOf=function(){var e=this,t=Fe.apply(Be,arguments),n=this._cmp;try{t.sort(n)}catch{return qe(this,it)}if(t.length===0)return Ft(this);var r=new this.Collection(this,function(){return dt(t[0],t[t.length-1])});r._ondirectionchange=function(u){n=u==="next"?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm(function(u,l,f){for(var m=u.key;0<n(m,t[o]);)if(++o===t.length)return l(f),!1;return n(m,t[o])===0||(l(function(){u.continue(t[o])}),!1)}),r},Ce.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ce.prototype.noneOf=function(){var e=Fe.apply(Be,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return qe(this,it)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ce.prototype.inAnyRange=function(A,t){var n=this,r=this._cmp,o=this._ascending,u=this._descending,l=this._min,f=this._max;if(A.length===0)return Ft(this);if(!A.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&o(P[0],P[1])<=0}))return qe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var m=!t||t.includeLowers!==!1,g=t&&t.includeUppers===!0,k,h=o;function x(P,S){return h(P[0],S[0])}try{(k=A.reduce(function(P,S){for(var K=0,R=P.length;K<R;++K){var N=P[K];if(r(S[0],N[1])<0&&0<r(S[1],N[0])){N[0]=l(N[0],S[0]),N[1]=f(N[1],S[1]);break}}return K===R&&P.push(S),P},[])).sort(x)}catch{return qe(this,it)}var y=0,w=g?function(P){return 0<o(P,k[y][1])}:function(P){return 0<=o(P,k[y][1])},E=m?function(P){return 0<u(P,k[y][0])}:function(P){return 0<=u(P,k[y][0])},b=w,A=new this.Collection(this,function(){return dt(k[0][0],k[k.length-1][1],!m,!g)});return A._ondirectionchange=function(P){h=P==="next"?(b=w,o):(b=E,u),k.sort(x)},A._addAlgorithm(function(P,S,K){for(var R,N=P.key;b(N);)if(++y===k.length)return S(K),!1;return!w(R=N)&&!E(R)||(n._cmp(N,k[y][1])===0||n._cmp(N,k[y][0])===0||S(function(){h===o?P.continue(k[y][0]):P.continue(k[y][1])}),!1)}),A},Ce.prototype.startsWithAnyOf=function(){var e=Fe.apply(Be,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Ft(this):this.inAnyRange(e.map(function(t){return[t,t+Et]})):qe(this,"startsWithAnyOf() only works with strings")},Ce);function Ce(){}function Ze(e){return Ee(function(t){return ln(t),e(t.target.error),!1})}function ln(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",yr="x-storagemutated-1",pt=un(null,fn),qo=(et.prototype._lock=function(){return ue(!G.global),++this._reculock,this._reculock!==1||G.global||(G.lockOwnerFor=this),this},et.prototype._unlock=function(){if(ue(!G.global),--this._reculock==0)for(G.global||(G.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ot(e[1],e[0])}catch{}}return this},et.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},et.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(ue(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new J.DatabaseClosed(r);case"MissingAPIError":throw new J.MissingAPI(r.message,r);default:throw new J.OpenFailed(r)}if(!this.active)throw new J.TransactionInactive;return ue(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ee(function(o){ln(o),t._reject(e.error)}),e.onabort=Ee(function(o){ln(o),t.active&&t._reject(new J.Abort(e.error)),t.active=!1,t.on("abort").fire(o)}),e.oncomplete=Ee(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&pt.storagemutated.fire(e.mutatedParts)}),this},et.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return xe(new J.ReadOnly("Transaction is readonly"));if(!this.active)return xe(new J.TransactionInactive);if(this._locked())return new V(function(u,l){r._blockedFuncs.push([function(){r._promise(e,t,n).then(u,l)},G])});if(n)return lt(function(){var u=new V(function(l,f){r._lock();var m=t(l,f,r);m&&m.then&&m.then(l,f)});return u.finally(function(){return r._unlock()}),u._lib=!0,u});var o=new V(function(u,l){var f=t(u,l,r);f&&f.then&&f.then(u,l)});return o._lib=!0,o},et.prototype._root=function(){return this.parent?this.parent._root():this},et.prototype.waitFor=function(e){var t,n=this._root(),r=V.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=u)}());var o=n._waitingFor;return new V(function(u,l){r.then(function(f){return n._waitingQueue.push(Ee(u.bind(null,f)))},function(f){return n._waitingQueue.push(Ee(l.bind(null,f)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},et.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},et.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(D(t,e))return t[e];var n=this.schema[e];if(!n)throw new J.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},et);function et(){}function vr(e,t,n,r,o,u,l){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:u,src:(n&&!l?"&":"")+(r?"*":"")+(o?"++":"")+pi(t)}}function pi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function gr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(o){return[o.name,o]},n.reduce(function(o,u,l){return l=r(u,l),l&&(o[l[0]]=l[1]),o},{}))};var r}var hn=function(e){try{return e.only([[]]),hn=function(){return[[]]},[[]]}catch{return hn=function(){return Et},Et}};function br(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return z(n,t)}:function(n){return z(n,e)};var t}function mi(e){return[].slice.call(e)}var $o=0;function dn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Mo(e,t,m){function r(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=b.lower,w=b.upper,E=b.lowerOpen,b=b.upperOpen;return y===void 0?w===void 0?null:t.upperBound(w,!!b):w===void 0?t.lowerBound(y,!!E):t.bound(y,w,!!E,!!b)}function o(x){var y,w=x.name;return{name:w,schema:x,mutate:function(E){var b=E.trans,A=E.type,P=E.keys,S=E.values,K=E.range;return new Promise(function(R,N){R=Ee(R);var q=b.objectStore(w),$=q.keyPath==null,U=A==="put"||A==="add";if(!U&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var F,W=(P||S||{length:1}).length;if(P&&S&&P.length!==S.length)throw new Error("Given keys array must have same length as given values array.");if(W===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});function Z(Re){++He,ln(Re)}var ie=[],ne=[],He=0;if(A==="deleteRange"){if(K.type===4)return R({numFailures:He,failures:ne,results:[],lastResult:void 0});K.type===3?ie.push(F=q.clear()):ie.push(F=q.delete(r(K)))}else{var $=U?$?[S,P]:[S,null]:[P,null],re=$[0],Te=$[1];if(U)for(var Ie=0;Ie<W;++Ie)ie.push(F=Te&&Te[Ie]!==void 0?q[A](re[Ie],Te[Ie]):q[A](re[Ie])),F.onerror=Z;else for(Ie=0;Ie<W;++Ie)ie.push(F=q[A](re[Ie])),F.onerror=Z}function Gn(Re){Re=Re.target.result,ie.forEach(function(St,qr){return St.error!=null&&(ne[qr]=St.error)}),R({numFailures:He,failures:ne,results:A==="delete"?P:ie.map(function(St){return St.result}),lastResult:Re})}F.onerror=function(Re){Z(Re),Gn(Re)},F.onsuccess=Gn})},getMany:function(E){var b=E.trans,A=E.keys;return new Promise(function(P,S){P=Ee(P);for(var K,R=b.objectStore(w),N=A.length,q=new Array(N),$=0,U=0,F=function(ie){ie=ie.target,q[ie._pos]=ie.result,++U===$&&P(q)},W=Ze(S),Z=0;Z<N;++Z)A[Z]!=null&&((K=R.get(A[Z]))._pos=Z,K.onsuccess=F,K.onerror=W,++$);$===0&&P(q)})},get:function(E){var b=E.trans,A=E.key;return new Promise(function(P,S){P=Ee(P);var K=b.objectStore(w).get(A);K.onsuccess=function(R){return P(R.target.result)},K.onerror=Ze(S)})},query:(y=g,function(E){return new Promise(function(b,A){b=Ee(b);var P,S,K,$=E.trans,R=E.values,N=E.limit,F=E.query,q=N===1/0?void 0:N,U=F.index,F=F.range,$=$.objectStore(w),U=U.isPrimaryKey?$:$.index(U.name),F=r(F);if(N===0)return b({result:[]});y?((q=R?U.getAll(F,q):U.getAllKeys(F,q)).onsuccess=function(W){return b({result:W.target.result})},q.onerror=Ze(A)):(P=0,S=!R&&"openKeyCursor"in U?U.openKeyCursor(F):U.openCursor(F),K=[],S.onsuccess=function(W){var Z=S.result;return Z?(K.push(R?Z.value:Z.primaryKey),++P===N?b({result:K}):void Z.continue()):b({result:K})},S.onerror=Ze(A))})}),openCursor:function(E){var b=E.trans,A=E.values,P=E.query,S=E.reverse,K=E.unique;return new Promise(function(R,N){R=Ee(R);var U=P.index,q=P.range,$=b.objectStore(w),$=U.isPrimaryKey?$:$.index(U.name),U=S?K?"prevunique":"prev":K?"nextunique":"next",F=!A&&"openKeyCursor"in $?$.openKeyCursor(r(q),U):$.openCursor(r(q),U);F.onerror=Ze(N),F.onsuccess=Ee(function(W){var Z,ie,ne,He,re=F.result;re?(re.___id=++$o,re.done=!1,Z=re.continue.bind(re),ie=(ie=re.continuePrimaryKey)&&ie.bind(re),ne=re.advance.bind(re),He=function(){throw new Error("Cursor not stopped")},re.trans=b,re.stop=re.continue=re.continuePrimaryKey=re.advance=function(){throw new Error("Cursor not started")},re.fail=Ee(N),re.next=function(){var Te=this,Ie=1;return this.start(function(){return Ie--?Te.continue():Te.stop()}).then(function(){return Te})},re.start=function(Te){function Ie(){if(F.result)try{Te()}catch(Re){re.fail(Re)}else re.done=!0,re.start=function(){throw new Error("Cursor behind last entry")},re.stop()}var Gn=new Promise(function(Re,St){Re=Ee(Re),F.onerror=Ze(St),re.fail=St,re.stop=function(qr){re.stop=re.continue=re.continuePrimaryKey=re.advance=He,Re(qr)}});return F.onsuccess=Ee(function(Re){F.onsuccess=Ie,Ie()}),re.continue=Z,re.continuePrimaryKey=ie,re.advance=ne,Ie(),Gn},R(re)):R(null)},N)})},count:function(E){var b=E.query,A=E.trans,P=b.index,S=b.range;return new Promise(function(K,R){var N=A.objectStore(w),q=P.isPrimaryKey?N:N.index(P.name),N=r(S),q=N?q.count(N):q.count();q.onsuccess=Ee(function($){return K($.target.result)}),q.onerror=Ze(R)})}}}var u,l,f,k=(l=m,f=mi((u=e).objectStoreNames),{schema:{name:u.name,tables:f.map(function(x){return l.objectStore(x)}).map(function(x){var y=x.keyPath,b=x.autoIncrement,w=d(y),E={},b={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:w,keyPath:y,autoIncrement:b,unique:!0,extractKey:br(y)},indexes:mi(x.indexNames).map(function(A){return x.index(A)}).map(function(K){var P=K.name,S=K.unique,R=K.multiEntry,K=K.keyPath,R={name:P,compound:d(K),keyPath:K,unique:S,multiEntry:R,extractKey:br(K)};return E[dn(K)]=R}),getIndexByKeyPath:function(A){return E[dn(A)]}};return E[":id"]=b.primaryKey,y!=null&&(E[dn(y)]=b.primaryKey),b})},hasGetAll:0<f.length&&"getAll"in l.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=k.schema,g=k.hasGetAll,k=m.tables.map(o),h={};return k.forEach(function(x){return h[x.name]=x}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(x){if(!h[x])throw new Error("Table '".concat(x,"' not found"));return h[x]},MIN_KEY:-1/0,MAX_KEY:hn(t),schema:m}}function No(e,t,n,r){var o=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Mo(t,o,r),e.dbcore.reduce(function(u,l){return l=l.create,c(c({},u),l(u))},r))}}function qn(e,r){var n=r.db,r=No(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(o){var u=o.name;e.core.schema.tables.some(function(l){return l.name===u})&&(o.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=o.core))})}function $n(e,t,n,r){n.forEach(function(o){var u=r[o];t.forEach(function(l){var f=function m(g,k){return L(g,k)||(g=C(g))&&m(g,k)}(l,o);(!f||"value"in f&&f.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?I(l,o,{get:function(){return this.table(o)},set:function(m){j(this,o,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):l[o]=new e.Table(o,u))})})}function _r(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Fo(e,t){return e._cfg.version-t._cfg.version}function Lo(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=gr("$meta",vi("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,o);u.create(n),u._completion.catch(r);var l=u._reject.bind(u),f=G.transless||G;lt(function(){return G.trans=u,G.transless=f,t!==0?(qn(e,n),g=t,((m=u).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(k){return k??g}):V.resolve(g)).then(function(k){return x=k,y=u,w=n,E=[],k=(h=e)._versions,b=h._dbSchema=Nn(0,h.idbdb,w),(k=k.filter(function(A){return A._cfg.version>=x})).length!==0?(k.forEach(function(A){E.push(function(){var P=b,S=A._cfg.dbschema;Fn(h,P,w),Fn(h,S,w),b=h._dbSchema=S;var K=wr(P,S);K.add.forEach(function(U){kr(w,U[0],U[1].primKey,U[1].indexes)}),K.change.forEach(function(U){if(U.recreate)throw new J.Upgrade("Not yet support for changing primary key");var F=w.objectStore(U.name);U.add.forEach(function(W){return Mn(F,W)}),U.change.forEach(function(W){F.deleteIndex(W.name),Mn(F,W)}),U.del.forEach(function(W){return F.deleteIndex(W)})});var R=A._cfg.contentUpgrade;if(R&&A._cfg.version>x){qn(h,w),y._memoizedTables={};var N=de(S);K.del.forEach(function(U){N[U]=P[U]}),_r(h,[h.Transaction.prototype]),$n(h,[h.Transaction.prototype],_(N),N),y.schema=N;var q,$=le(R);return $&&$t(),K=V.follow(function(){var U;(q=R(y))&&$&&(U=ft.bind(null,null),q.then(U,U))}),q&&typeof q.then=="function"?V.resolve(q):K.then(function(){return q})}}),E.push(function(P){var S,K,R=A._cfg.dbschema;S=R,K=P,[].slice.call(K.db.objectStoreNames).forEach(function(N){return S[N]==null&&K.db.deleteObjectStore(N)}),_r(h,[h.Transaction.prototype]),$n(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),y.schema=h._dbSchema}),E.push(function(P){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===A._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(S){return S!=="$meta"})):P.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return E.length?V.resolve(E.shift()(y.idbtrans)).then(A):V.resolve()}().then(function(){yi(b,w)})):V.resolve();var h,x,y,w,E,b}).catch(l)):(_(o).forEach(function(k){kr(n,k,o[k].primKey,o[k].indexes)}),qn(e,n),void V.follow(function(){return e.on.populate.fire(u)}).catch(l));var m,g})}function Uo(e,t){yi(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Nn(0,e.idbdb,t);Fn(e,e._dbSchema,t);for(var r=0,o=wr(n,e._dbSchema).change;r<o.length;r++){var u=function(l){if(l.change.length||l.recreate)return console.warn("Unable to patch indexes of table ".concat(l.name," because it has changes on the type of index or primary key.")),{value:void 0};var f=t.objectStore(l.name);l.add.forEach(function(m){Je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(l.name,".").concat(m.src)),Mn(f,m)})}(o[r]);if(typeof u=="object")return u.value}}function wr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],u=t[n];if(o){var l={name:n,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||o.primKey.auto!==u.primKey.auto)l.recreate=!0,r.change.push(l);else{var f=o.idxByName,m=u.idxByName,g=void 0;for(g in f)m[g]||l.del.push(g);for(g in m){var k=f[g],h=m[g];k?k.src!==h.src&&l.change.push(h):l.add.push(h)}(0<l.del.length||0<l.add.length||0<l.change.length)&&r.change.push(l)}}else r.add.push([n,u])}return r}function kr(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(u){return Mn(o,u)}),o}function yi(e,t){_(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Je&&console.debug("Dexie: Creating missing table",n),kr(t,n,e[n].primKey,e[n].indexes))})}function Mn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Nn(e,t,n){var r={};return oe(t.objectStoreNames,0).forEach(function(o){for(var u=n.objectStore(o),l=vr(pi(g=u.keyPath),g||"",!0,!1,!!u.autoIncrement,g&&typeof g!="string",!0),f=[],m=0;m<u.indexNames.length;++m){var k=u.index(u.indexNames[m]),g=k.keyPath,k=vr(k.name,g,!!k.unique,!!k.multiEntry,!1,g&&typeof g!="string",!1);f.push(k)}r[o]=gr(o,l,f)}),r}function Fn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var u=r[o],l=n.objectStore(u);e._hasGetAll="getAll"in l;for(var f=0;f<l.indexNames.length;++f){var m=l.indexNames[f],g=l.index(m).keyPath,k=typeof g=="string"?g:"["+oe(g).join("+")+"]";!t[u]||(g=t[u].idxByName[k])&&(g.name=m,delete t[u].idxByName[k],t[u].idxByName[m]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function vi(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return vr(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),d(o),n===0)})}var Vo=(Ln.prototype._parseStoresSpec=function(e,t){_(e).forEach(function(n){if(e[n]!==null){var r=vi(e[n]),o=r.shift();if(o.unique=!0,o.multi)throw new J.Schema("Primary key cannot be multi-valued");r.forEach(function(u){if(u.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),t[n]=gr(n,o,r)}})},Ln.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?O(this._cfg.storesSource,n):n;var n=t._versions,r={},o={};return n.forEach(function(u){O(r,u._cfg.storesSource),o=u._cfg.dbschema={},u._parseStoresSpec(r,o)}),t._dbSchema=o,_r(t,[t._allTables,t,t.Transaction.prototype]),$n(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],_(o),o),t._storeNames=_(o),this},Ln.prototype.upgrade=function(e){return this._cfg.contentUpgrade=nr(this._cfg.contentUpgrade||ge,e),this},Ln);function Ln(){}function Or(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new at(Tn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Er(e){return e&&typeof e.databases=="function"}function xr(e){return lt(function(){return G.letThrough=!0,e()})}function Ar(e){return!("from"in e)}var je=function(e,t){if(!this){var n=new je;return e&&"d"in e&&O(n,e),n}O(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function pn(e,t,n){var r=se(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Ar(e))return O(e,{from:t,to:n,d:1});var o=e.l,r=e.r;if(se(n,e.from)<0)return o?pn(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},bi(e);if(0<se(t,e.to))return r?pn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},bi(e);se(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<se(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,o&&!e.l&&mn(e,o),r&&n&&mn(e,r)}}function mn(e,t){Ar(t)||function n(r,m){var u=m.from,l=m.to,f=m.l,m=m.r;pn(r,u,l),f&&n(r,f),m&&n(r,m)}(e,t)}function gi(e,t){var n=Un(t),r=n.next();if(r.done)return!1;for(var o=r.value,u=Un(e),l=u.next(o.from),f=l.value;!r.done&&!l.done;){if(se(f.from,o.to)<=0&&0<=se(f.to,o.from))return!0;se(o.from,f.from)<0?o=(r=n.next(f.from)).value:f=(l=u.next(o.from)).value}return!1}function Un(e){var t=Ar(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&se(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||se(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function bi(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=1<r?"r":r<-1?"l":"";o&&(t=o=="r"?"l":"r",n=c({},e),r=e[o],e.from=r.from,e.to=r.to,e[o]=r[o],n[o]=r[t],(e[t]=n).d=_i(n)),e.d=_i(e)}function _i(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Vn(e,t){return _(t).forEach(function(n){e[n]?mn(e[n],t[n]):e[n]=function r(o){var u,l,f={};for(u in o)D(o,u)&&(l=o[u],f[u]=!l||typeof l!="object"||Ke.has(l.constructor)?l:r(l));return f}(t[n])}),e}function Pr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&gi(t[n],e[n])})}T(je.prototype,((Le={add:function(e){return mn(this,e),this},addKey:function(e){return pn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return pn(t,n,n)}),this},hasKey:function(e){var t=Un(this).next(e).value;return t&&se(t.from,e)<=0&&0<=se(t.to,e)}})[Ne]=function(){return Un(this)},Le));var At={},Sr={},Cr=!1;function zn(e){Vn(Sr,e),Cr||(Cr=!0,setTimeout(function(){Cr=!1,Kr(Sr,!(Sr={}))},0))}function Kr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(At);r<o.length;r++)wi(l=o[r],e,n,t);else for(var u in e){var l,f=/^idb\:\/\/(.*)\/(.*)\//.exec(u);f&&(u=f[1],f=f[2],(l=At["idb://".concat(u,"/").concat(f)])&&wi(l,e,n,t))}n.forEach(function(m){return m()})}function wi(e,t,n,r){for(var o=[],u=0,l=Object.entries(e.queries.query);u<l.length;u++){for(var f=l[u],m=f[0],g=[],k=0,h=f[1];k<h.length;k++){var x=h[k];Pr(t,x.obsSet)?x.subscribers.forEach(function(b){return n.add(b)}):r&&g.push(x)}r&&o.push([m,g])}if(r)for(var y=0,w=o;y<w.length;y++){var E=w[y],m=E[0],g=E[1];e.queries.query[m]=g}}function zo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(10*e.verno),u=!1;function l(){if(t.openCanceller!==r)throw new J.DatabaseClosed("db.open() was cancelled")}function f(){return new V(function(x,y){if(l(),!n)throw new J.MissingAPI;var w=e.name,E=t.autoSchema||!o?n.open(w):n.open(w,o);if(!E)throw new J.MissingAPI;E.onerror=Ze(y),E.onblocked=Ee(e._fireOnBlocked),E.onupgradeneeded=Ee(function(b){var A;k=E.transaction,t.autoSchema&&!e._options.allowEmptyDB?(E.onerror=ln,k.abort(),E.result.close(),(A=n.deleteDatabase(w)).onsuccess=A.onerror=Ee(function(){y(new J.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(k.onerror=Ze(y),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,h=b<1,e.idbdb=E.result,u&&Uo(e,k),Lo(e,b/10,k,y))},y),E.onsuccess=Ee(function(){k=null;var b,A,P,S,K,R=e.idbdb=E.result,N=oe(R.objectStoreNames);if(0<N.length)try{var q=R.transaction((S=N).length===1?S[0]:S,"readonly");if(t.autoSchema)A=R,P=q,(b=e).verno=A.version/10,P=b._dbSchema=Nn(0,A,P),b._storeNames=oe(A.objectStoreNames,0),$n(b,[b._allTables],_(P),P);else if(Fn(e,e._dbSchema,q),((K=wr(Nn(0,(K=e).idbdb,q),K._dbSchema)).add.length||K.change.some(function($){return $.add.length||$.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),R.close(),o=R.version+1,u=!0,x(f());qn(e,q)}catch{}Mt.push(e),R.onversionchange=Ee(function($){t.vcFired=!0,e.on("versionchange").fire($)}),R.onclose=Ee(function($){e.on("close").fire($)}),h&&(K=e._deps,q=w,R=K.indexedDB,K=K.IDBKeyRange,Er(R)||q===Tn||Or(R,K).put({name:q}).catch(ge)),x()},y)}).catch(function(x){switch(x?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),f();break;case"VersionError":if(0<o)return o=0,f()}return V.reject(x)})}var m,g=t.dbReadyResolve,k=null,h=!1;return V.race([r,(typeof navigator>"u"?V.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(x){function y(){return indexedDB.databases().finally(x)}m=setInterval(y,100),y()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(f)]).then(function(){return l(),t.onReadyBeingFired=[],V.resolve(xr(function(){return e.on.ready.fire(e.vip)})).then(function x(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(nr,ge);return t.onReadyBeingFired=[],V.resolve(xr(function(){return y(e.vip)})).then(x)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(x){t.dbOpenError=x;try{k&&k.abort()}catch{}return r===t.openCanceller&&e._close(),xe(x)}).finally(function(){t.openComplete=!0,g()}).then(function(){var x;return h&&(x={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(w){w.name&&(x["idb://".concat(e.name,"/").concat(y.name,"/").concat(w.name)]=new je(-1/0,[[[]]]))}),x["idb://".concat(e.name,"/").concat(y.name,"/")]=x["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new je(-1/0,[[[]]])}),pt(fn).fire(x),Kr(x,!0)),e})}function jr(e){function t(u){return e.next(u)}var n=o(t),r=o(function(u){return e.throw(u)});function o(u){return function(m){var f=u(m),m=f.value;return f.done?m:m&&typeof m.then=="function"?m.then(n,r):d(m)?Promise.all(m).then(n,r):n(m)}}return o(t)()}function Wn(e,t,n){for(var r=d(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}var Wo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return c(c({},e),{table:function(t){var n=e.table(t),r=n.schema,o={},u=[];function l(h,x,y){var w=dn(h),E=o[w]=o[w]||[],b=h==null?0:typeof h=="string"?1:h.length,A=0<x,A=c(c({},y),{name:A?"".concat(w,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:A,keyTail:x,keyLength:b,extractKey:br(h),unique:!A&&y.unique});return E.push(A),A.isPrimaryKey||u.push(A),1<b&&l(b===2?h[0]:h.slice(0,b-1),x+1,y),E.sort(function(P,S){return P.keyTail-S.keyTail}),A}t=l(r.primaryKey.keyPath,0,r.primaryKey),o[":id"]=[t];for(var f=0,m=r.indexes;f<m.length;f++){var g=m[f];l(g.keyPath,0,g)}function k(h){var x,y=h.query.index;return y.isVirtual?c(c({},h),{query:{index:y.lowLevelIndex,range:(x=h.query.range,y=y.keyTail,{type:x.type===1?2:x.type,lower:Wn(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Wn(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):h}return c(c({},n),{schema:c(c({},r),{primaryKey:t,indexes:u,getIndexByKeyPath:function(h){return(h=o[dn(h)])&&h[0]}}),count:function(h){return n.count(k(h))},query:function(h){return n.query(k(h))},openCursor:function(h){var x=h.query.index,y=x.keyTail,w=x.isVirtual,E=x.keyLength;return w?n.openCursor(k(h)).then(function(A){return A&&b(A)}):n.openCursor(h);function b(A){return Object.create(A,{continue:{value:function(P){P!=null?A.continue(Wn(P,h.reverse?e.MAX_KEY:e.MIN_KEY,y)):h.unique?A.continue(A.key.slice(0,E).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,y)):A.continue()}},continuePrimaryKey:{value:function(P,S){A.continuePrimaryKey(Wn(P,e.MAX_KEY,y),S)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var P=A.key;return E===1?P[0]:P.slice(0,E)}},value:{get:function(){return A.value}}})}}})}})}};function Tr(e,t,n,r){return n=n||{},r=r||"",_(e).forEach(function(o){var u,l,f;D(t,o)?(u=e[o],l=t[o],typeof u=="object"&&typeof l=="object"&&u&&l?(f=It(u))!==It(l)?n[r+o]=t[o]:f==="Object"?Tr(u,l,n,r+o+"."):u!==l&&(n[r+o]=t[o]):u!==l&&(n[r+o]=t[o])):n[r+o]=void 0}),_(t).forEach(function(o){D(e,o)||(n[r+o]=t[o])}),n}function Ir(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Yo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return c(c({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return c(c({},n),{mutate:function(o){var u=G.trans,l=u.table(t).hook,f=l.deleting,m=l.creating,g=l.updating;switch(o.type){case"add":if(m.fire===ge)break;return u._promise("readwrite",function(){return k(o)},!0);case"put":if(m.fire===ge&&g.fire===ge)break;return u._promise("readwrite",function(){return k(o)},!0);case"delete":if(f.fire===ge)break;return u._promise("readwrite",function(){return k(o)},!0);case"deleteRange":if(f.fire===ge)break;return u._promise("readwrite",function(){return function h(x,y,w){return n.query({trans:x,values:!1,query:{index:r,range:y},limit:w}).then(function(E){var b=E.result;return k({type:"delete",keys:b,trans:x}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:h(x,c(c({},y),{lower:b[b.length-1],lowerOpen:!0}),w)})})}(o.trans,o.range,1e4)},!0)}return n.mutate(o);function k(h){var x,y,w,E=G.trans,b=h.keys||Ir(r,h);if(!b)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?c(c({},h),{keys:b}):c({},h)).type!=="delete"&&(h.values=p([],h.values)),h.keys&&(h.keys=p([],h.keys)),x=n,w=b,((y=h).type==="add"?Promise.resolve([]):x.getMany({trans:y.trans,keys:w,cache:"immutable"})).then(function(A){var P=b.map(function(S,K){var R,N,q,$=A[K],U={onerror:null,onsuccess:null};return h.type==="delete"?f.fire.call(U,S,$,E):h.type==="add"||$===void 0?(R=m.fire.call(U,S,h.values[K],E),S==null&&R!=null&&(h.keys[K]=S=R,r.outbound||Y(h.values[K],r.keyPath,S))):(R=Tr($,h.values[K]),(N=g.fire.call(U,R,S,$,E))&&(q=h.values[K],Object.keys(N).forEach(function(F){D(q,F)?q[F]=N[F]:Y(q,F,N[F])}))),U});return n.mutate(h).then(function(S){for(var K=S.failures,R=S.results,N=S.numFailures,S=S.lastResult,q=0;q<b.length;++q){var $=(R||b)[q],U=P[q];$==null?U.onerror&&U.onerror(K[q]):U.onsuccess&&U.onsuccess(h.type==="put"&&A[q]?h.values[q]:$)}return{failures:K,results:R,numFailures:N,lastResult:S}}).catch(function(S){return P.forEach(function(K){return K.onerror&&K.onerror(S)}),Promise.reject(S)})})}}})}})}};function ki(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,u=0;o<t.keys.length&&u<e.length;++o)se(t.keys[o],e[u])===0&&(r.push(n?ve(t.values[o]):t.values[o]),++u);return r.length===e.length?r:null}catch{return null}}var Ho={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return c(c({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var o=ki(r.keys,r.trans._cache,r.cache==="clone");return o?V.resolve(o):n.getMany(r).then(function(u){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ve(u):u},u})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Oi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ei(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Go={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new je(e.MIN_KEY,e.MAX_KEY);return c(c({},e),{transaction:function(r,o,u){if(G.subscr&&o!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return e.transaction(r,o,u)},table:function(r){var o=e.table(r),u=o.schema,l=u.primaryKey,h=u.indexes,f=l.extractKey,m=l.outbound,g=l.autoIncrement&&h.filter(function(y){return y.compound&&y.keyPath.includes(l.keyPath)}),k=c(c({},o),{mutate:function(y){function w(F){return F="idb://".concat(t,"/").concat(r,"/").concat(F),S[F]||(S[F]=new je)}var E,b,A,P=y.trans,S=y.mutatedParts||(y.mutatedParts={}),K=w(""),R=w(":dels"),N=y.type,U=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[Ir(l,y).filter(function(F){return F}),y.values]:[],q=U[0],$=U[1],U=y.trans._cache;return d(q)?(K.addKeys(q),(U=N==="delete"||q.length===$.length?ki(q,U):null)||R.addKeys(q),(U||$)&&(E=w,b=U,A=$,u.indexes.forEach(function(F){var W=E(F.name||"");function Z(ne){return ne!=null?F.extractKey(ne):null}function ie(ne){return F.multiEntry&&d(ne)?ne.forEach(function(He){return W.addKey(He)}):W.addKey(ne)}(b||A).forEach(function(ne,Te){var re=b&&Z(b[Te]),Te=A&&Z(A[Te]);se(re,Te)!==0&&(re!=null&&ie(re),Te!=null&&ie(Te))})}))):q?($={from:($=q.lower)!==null&&$!==void 0?$:e.MIN_KEY,to:($=q.upper)!==null&&$!==void 0?$:e.MAX_KEY},R.add($),K.add($)):(K.add(n),R.add(n),u.indexes.forEach(function(F){return w(F.name).add(n)})),o.mutate(y).then(function(F){return!q||y.type!=="add"&&y.type!=="put"||(K.addKeys(F.results),g&&g.forEach(function(W){var Z=y.values.map(function(ne){return W.extractKey(ne)}),ie=W.keyPath.findIndex(function(ne){return ne===l.keyPath});F.results.forEach(function(ne){return Z[ie]=ne}),w(W.name).addKeys(Z)})),P.mutatedParts=Vn(P.mutatedParts||{},S),F})}}),h=function(w){var E=w.query,w=E.index,E=E.range;return[w,new je((w=E.lower)!==null&&w!==void 0?w:e.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},x={get:function(y){return[l,new je(y.key)]},getMany:function(y){return[l,new je().addKeys(y.keys)]},count:h,query:h,openCursor:h};return _(x).forEach(function(y){k[y]=function(w){var E=G.subscr,b=!!E,A=Oi(G,o)&&Ei(y,w)?w.obsSet={}:E;if(b){var P=function($){return $="idb://".concat(t,"/").concat(r,"/").concat($),A[$]||(A[$]=new je)},S=P(""),K=P(":dels"),E=x[y](w),b=E[0],E=E[1];if((y==="query"&&b.isPrimaryKey&&!w.values?K:P(b.name||"")).add(E),!b.isPrimaryKey){if(y!=="count"){var R=y==="query"&&m&&w.values&&o.query(c(c({},w),{values:!1}));return o[y].apply(this,arguments).then(function($){if(y==="query"){if(m&&w.values)return R.then(function(Z){return Z=Z.result,S.addKeys(Z),$});var U=w.values?$.result.map(f):$.result;(w.values?S:K).addKeys(U)}else if(y==="openCursor"){var F=$,W=w.values;return F&&Object.create(F,{key:{get:function(){return K.addKey(F.primaryKey),F.key}},primaryKey:{get:function(){var Z=F.primaryKey;return K.addKey(Z),Z}},value:{get:function(){return W&&S.addKey(F.primaryKey),F.value}}})}return $})}K.add(n)}}return o[y].apply(this,arguments)}}),k}})}};function xi(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=c({},t),d(t.keys)&&(t.keys=t.keys.filter(function(o,u){return!(u in n.failures)})),"values"in t&&d(t.values)&&(t.values=t.values.filter(function(o,u){return!(u in n.failures)})),t)}function Dr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<se(n,r.lower):0<=se(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?se(e,t.upper)<0:se(e,t.upper)<=0));var n,r}function Ai(e,t,x,r,o,u){if(!x||x.length===0)return e;var l=t.query.index,f=l.multiEntry,m=t.query.range,g=r.schema.primaryKey.extractKey,k=l.extractKey,h=(l.lowLevelIndex||l).extractKey,x=x.reduce(function(y,w){var E=y,b=[];if(w.type==="add"||w.type==="put")for(var A=new je,P=w.values.length-1;0<=P;--P){var S,K=w.values[P],R=g(K);A.hasKey(R)||(S=k(K),(f&&d(S)?S.some(function(F){return Dr(F,m)}):Dr(S,m))&&(A.addKey(R),b.push(K)))}switch(w.type){case"add":var N=new je().addKeys(t.values?y.map(function(W){return g(W)}):y),E=y.concat(t.values?b.filter(function(W){return W=g(W),!N.hasKey(W)&&(N.addKey(W),!0)}):b.map(function(W){return g(W)}).filter(function(W){return!N.hasKey(W)&&(N.addKey(W),!0)}));break;case"put":var q=new je().addKeys(w.values.map(function(W){return g(W)}));E=y.filter(function(W){return!q.hasKey(t.values?g(W):W)}).concat(t.values?b:b.map(function(W){return g(W)}));break;case"delete":var $=new je().addKeys(w.keys);E=y.filter(function(W){return!$.hasKey(t.values?g(W):W)});break;case"deleteRange":var U=w.range;E=y.filter(function(W){return!Dr(g(W),U)})}return E},e);return x===e?e:(x.sort(function(y,w){return se(h(y),h(w))||se(g(y),g(w))}),t.limit&&t.limit<1/0&&(x.length>t.limit?x.length=t.limit:e.length===t.limit&&x.length<t.limit&&(o.dirty=!0)),u?Object.freeze(x):x)}function Pi(e,t){return se(e.lower,t.lower)===0&&se(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Qo(e,t){return function(n,r,o,u){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=se(n,r))===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,o,u){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=se(n,r))===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xo(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var o,u;e.subscribers.delete(n),e.subscribers.size===0&&(o=e,u=t,setTimeout(function(){o.subscribers.size===0&&Qe(u,o)},3e3))})}var Jo={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return c(c({},e),{transaction:function(n,r,o){var u,l,f=e.transaction(n,r,o);return r==="readwrite"&&(l=(u=new AbortController).signal,o=function(m){return function(){if(u.abort(),r==="readwrite"){for(var g=new Set,k=0,h=n;k<h.length;k++){var x=h[k],y=At["idb://".concat(t,"/").concat(x)];if(y){var w=e.table(x),E=y.optimisticOps.filter(function(W){return W.trans===f});if(f._explicit&&m&&f.mutatedParts)for(var b=0,A=Object.values(y.queries.query);b<A.length;b++)for(var P=0,S=(N=A[b]).slice();P<S.length;P++)Pr((q=S[P]).obsSet,f.mutatedParts)&&(Qe(N,q),q.subscribers.forEach(function(W){return g.add(W)}));else if(0<E.length){y.optimisticOps=y.optimisticOps.filter(function(W){return W.trans!==f});for(var K=0,R=Object.values(y.queries.query);K<R.length;K++)for(var N,q,$,U=0,F=(N=R[K]).slice();U<F.length;U++)(q=F[U]).res!=null&&f.mutatedParts&&(m&&!q.dirty?($=Object.isFrozen(q.res),$=Ai(q.res,q.req,E,w,q,$),q.dirty?(Qe(N,q),q.subscribers.forEach(function(W){return g.add(W)})):$!==q.res&&(q.res=$,q.promise=V.resolve({result:$}))):(q.dirty&&Qe(N,q),q.subscribers.forEach(function(W){return g.add(W)})))}}}g.forEach(function(W){return W()})}}},f.addEventListener("abort",o(!1),{signal:l}),f.addEventListener("error",o(!1),{signal:l}),f.addEventListener("complete",o(!0),{signal:l})),f},table:function(n){var r=e.table(n),o=r.schema.primaryKey;return c(c({},r),{mutate:function(u){var l=G.trans;if(o.outbound||l.db._options.cache==="disabled"||l.explicit||l.idbtrans.mode!=="readwrite")return r.mutate(u);var f=At["idb://".concat(t,"/").concat(n)];return f?(l=r.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||Ir(o,u).some(function(m){return m==null}))?(f.optimisticOps.push(u),u.mutatedParts&&zn(u.mutatedParts),l.then(function(m){0<m.numFailures&&(Qe(f.optimisticOps,u),(m=xi(0,u,m))&&f.optimisticOps.push(m),u.mutatedParts&&zn(u.mutatedParts))}),l.catch(function(){Qe(f.optimisticOps,u),u.mutatedParts&&zn(u.mutatedParts)})):l.then(function(m){var g=xi(0,c(c({},u),{values:u.values.map(function(k,h){var x;return m.failures[h]?k:(k=(x=o.keyPath)!==null&&x!==void 0&&x.includes(".")?ve(k):c({},k),Y(k,o.keyPath,m.results[h]),k)})}),m);f.optimisticOps.push(g),queueMicrotask(function(){return u.mutatedParts&&zn(u.mutatedParts)})}),l):r.mutate(u)},query:function(u){if(!Oi(G,r)||!Ei("query",u))return r.query(u);var l=((g=G.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",h=G,f=h.requery,m=h.signal,g=function(w,E,b,A){var P=At["idb://".concat(w,"/").concat(E)];if(!P)return[];if(!(E=P.queries[b]))return[null,!1,P,null];var S=E[(A.query?A.query.index.name:null)||""];if(!S)return[null,!1,P,null];switch(b){case"query":var K=S.find(function(R){return R.req.limit===A.limit&&R.req.values===A.values&&Pi(R.req.query.range,A.query.range)});return K?[K,!0,P,S]:[S.find(function(R){return("limit"in R.req?R.req.limit:1/0)>=A.limit&&(!A.values||R.req.values)&&Qo(R.req.query.range,A.query.range)}),!1,P,S];case"count":return K=S.find(function(R){return Pi(R.req.query.range,A.query.range)}),[K,!!K,P,S]}}(t,n,"query",u),k=g[0],h=g[1],x=g[2],y=g[3];return k&&h?k.obsSet=u.obsSet:(h=r.query(u).then(function(w){var E=w.result;if(k&&(k.res=E),l){for(var b=0,A=E.length;b<A;++b)Object.freeze(E[b]);Object.freeze(E)}else w.result=ve(E);return w}).catch(function(w){return y&&k&&Qe(y,k),Promise.reject(w)}),k={obsSet:u.obsSet,promise:h,subscribers:new Set,type:"query",req:u,dirty:!1},y?y.push(k):(y=[k],(x=x||(At["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=y)),Xo(k,y,f,m),k.promise.then(function(w){return{result:Ai(w.result,u,x?.optimisticOps,r,k,l)}})}})}})}};function Yn(e,t){return new Proxy(e,{get:function(n,r,o){return r==="db"?t:Reflect.get(n,r,o)}})}var at=(Ae.prototype.version=function(e){if(isNaN(e)||e<.1)throw new J.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Fo),n.stores({}),this._state.autoSchema=!1,n)},Ae.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new V(function(n,r){if(t._state.openComplete)return r(new J.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new J.DatabaseClosed);t.open().catch(ge)}t._state.dbReadyPromise.then(n,r)}).then(e)},Ae.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:o}),e.sort(function(u,l){return u.level-l.level}),this},Ae.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(o){return r?o.create!==r:!!n&&o.name!==n})),this},Ae.prototype.open=function(){var e=this;return Ot(ct,function(){return zo(e)})},Ae.prototype._close=function(){var e=this._state,t=Mt.indexOf(this);if(0<=t&&Mt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new V(function(n){e.dbReadyResolve=n}),e.openCanceller=new V(function(n,r){e.cancelOpen=r}))},Ae.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new J.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new J.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Ae.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new V(function(o,u){function l(){t.close(e);var f=t._deps.indexedDB.deleteDatabase(t.name);f.onsuccess=Ee(function(){var m,g,k;m=t._deps,g=t.name,k=m.indexedDB,m=m.IDBKeyRange,Er(k)||g===Tn||Or(k,m).delete(g).catch(ge),o()}),f.onerror=Ze(u),f.onblocked=t._fireOnBlocked}if(n)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(l):l()})},Ae.prototype.backendDB=function(){return this.idbdb},Ae.prototype.isOpen=function(){return this.idbdb!==null},Ae.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Ae.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ae.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ae.prototype,"tables",{get:function(){var e=this;return _(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Ae.prototype.transaction=function(){var e=function(t,n,r){var o=arguments.length;if(o<2)throw new J.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];return r=u.pop(),[t,we(u),r]}.apply(this,arguments);return this._transaction.apply(this,e)},Ae.prototype._transaction=function(e,t,n){var r=this,o=G.trans;o&&o.db===this&&e.indexOf("!")===-1||(o=null);var u,l,f=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(l=t.map(function(g){if(g=g instanceof r.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===fr)u=fr;else{if(e!="rw"&&e!=hr)throw new J.InvalidArgument("Invalid transaction mode: "+e);u=hr}if(o){if(o.mode===fr&&u===hr){if(!f)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&l.forEach(function(g){if(o&&o.storeNames.indexOf(g)===-1){if(!f)throw new J.SubTransaction("Table "+g+" not included in parent transaction.");o=null}}),f&&o&&!o.active&&(o=null)}}catch(g){return o?o._promise(null,function(k,h){h(g)}):xe(g)}var m=function g(k,h,x,y,w){return V.resolve().then(function(){var E=G.transless||G,b=k._createTransaction(h,x,k._dbSchema,y);if(b.explicit=!0,E={trans:b,transless:E},y)b.idbtrans=y.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,k._state.PR1398_maxLoop=3}catch(S){return S.name===tr.InvalidState&&k.isOpen()&&0<--k._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),k.close({disableAutoOpen:!1}),k.open().then(function(){return g(k,h,x,null,w)})):xe(S)}var A,P=le(w);return P&&$t(),E=V.follow(function(){var S;(A=w.call(b,b))&&(P?(S=ft.bind(null,null),A.then(S,S)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=jr(A)))},E),(A&&typeof A.then=="function"?V.resolve(A).then(function(S){return b.active?S:xe(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return A})).then(function(S){return y&&b._resolve(),b._completion.then(function(){return S})}).catch(function(S){return b._reject(S),xe(S)})})}.bind(null,this,u,l,o,n);return o?o._promise(u,m,"lock"):G.trans?Ot(G.transless,function(){return r._whenReady(m)}):this._whenReady(m)},Ae.prototype.table=function(e){if(!D(this._allTables,e))throw new J.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Ae);function Ae(e,t){var n=this;this._middlewares={},this.verno=0;var r=Ae.dependencies;this._options=t=c({addons:Ae.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,u,l,f,m,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ge,dbReadyPromise:null,cancelOpen:ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};g.dbReadyPromise=new V(function(h){g.dbReadyResolve=h}),g.openCanceller=new V(function(h,x){g.cancelOpen=x}),this._state=g,this.name=e,this.on=un(this,"populate","blocked","versionchange","close",{ready:[nr,ge]}),this.on.ready.subscribe=he(this.on.ready.subscribe,function(h){return function(x,y){Ae.vip(function(){var w,E=n._state;E.openComplete?(E.dbOpenError||V.resolve().then(x),y&&h(x)):E.onReadyBeingFired?(E.onReadyBeingFired.push(x),y&&h(x)):(h(x),w=n,y||h(function b(){w.on.ready.unsubscribe(x),w.on.ready.unsubscribe(b)}))})}}),this.Collection=(o=this,sn(Do.prototype,function(A,b){this.db=o;var y=ii,w=null;if(b)try{y=b()}catch(P){w=P}var E=A._ctx,b=E.table,A=b.hook.reading.fire;this._ctx={table:b,index:E.index,isPrimKey:!E.index||b.schema.primKey.keyPath&&E.index===b.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:E.or,valueMapper:A!==tn?A:null}})),this.Table=(u=this,sn(si.prototype,function(h,x,y){this.db=u,this._tx=y,this.name=h,this.schema=x,this.hook=u._allTables[h]?u._allTables[h].hook:un(null,{creating:[xo,ge],reading:[Eo,tn],updating:[Po,ge],deleting:[Ao,ge]})})),this.Transaction=(l=this,sn(qo.prototype,function(h,x,y,w,E){var b=this;this.db=l,this.mode=h,this.storeNames=x,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=un(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new V(function(A,P){b._resolve=A,b._reject=P}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(A){var P=b.active;return b.active=!1,b.on.error.fire(A),b.parent?b.parent._reject(A):P&&b.idbtrans&&b.idbtrans.abort(),xe(A)})})),this.Version=(f=this,sn(Vo.prototype,function(h){this.db=f,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,sn(di.prototype,function(h,x,y){if(this.db=m,this._ctx={table:h,index:x===":id"?null:x,or:y},this._cmp=this._ascending=se,this._descending=function(w,E){return se(E,w)},this._max=function(w,E){return 0<se(w,E)?w:E},this._min=function(w,E){return se(w,E)<0?w:E},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=hn(t.IDBKeyRange),this._createTransaction=function(h,x,y,w){return new n.Transaction(h,x,y,n._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(h){n.on("blocked").fire(h),Mt.filter(function(x){return x.name===n.name&&x!==n&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(h)})},this.use(Ho),this.use(Jo),this.use(Go),this.use(Wo),this.use(Yo);var k=new Proxy(this,{get:function(h,x,y){if(x==="_vip")return!0;if(x==="table")return function(E){return Yn(n.table(E),k)};var w=Reflect.get(h,x,y);return w instanceof si?Yn(w,k):x==="tables"?w.map(function(E){return Yn(E,k)}):x==="_createTransaction"?function(){return Yn(w.apply(this,arguments),k)}:w}});this.vip=k,r.forEach(function(h){return h(n)})}var Hn,Le=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Zo=(Br.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Br.prototype[Le]=function(){return this},Br);function Br(e){this._subscribe=e}try{Hn={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Hn={indexedDB:null,IDBKeyRange:null}}function Si(e){var t,n=!1,r=new Zo(function(o){var u=le(e),l,f=!1,m={},g={},k={get closed(){return f},unsubscribe:function(){f||(f=!0,l&&l.abort(),h&&pt.storagemutated.unsubscribe(y))}};o.start&&o.start(k);var h=!1,x=function(){return lr(w)},y=function(E){Vn(m,E),Pr(g,m)&&x()},w=function(){var E,b,A;!f&&Hn.indexedDB&&(m={},E={},l&&l.abort(),l=new AbortController,A=function(P){var S=Rt();try{u&&$t();var K=lt(e,P);return K=u?K.finally(ft):K}finally{S&&qt()}}(b={subscr:E,signal:l.signal,requery:x,querier:e,trans:null}),Promise.resolve(A).then(function(P){n=!0,t=P,f||b.signal.aborted||(m={},function(S){for(var K in S)if(D(S,K))return;return 1}(g=E)||h||(pt(fn,y),h=!0),lr(function(){return!f&&o.next&&o.next(P)}))},function(P){n=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||f||lr(function(){f||o.error&&o.error(P)})}))};return setTimeout(x,0),k});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Pt=at;function Rr(e){var t=mt;try{mt=!0,pt.storagemutated.fire(e),Kr(e,!0)}finally{mt=t}}T(Pt,c(c({},On),{delete:function(e){return new Pt(e,{addons:[]}).delete()},exists:function(e){return new Pt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Pt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Er(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==Tn})}):Or(n,t).toCollection().primaryKeys()).then(e)}catch{return xe(new J.MissingAPI)}var t,n},defineClass:function(){return function(e){O(this,e)}},ignoreTransaction:function(e){return G.trans?Ot(G.transless,e):e()},vip:xr,async:function(e){return function(){try{var t=jr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:V.resolve(t)}catch(n){return xe(n)}}},spawn:function(e,t,n){try{var r=jr(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:V.resolve(r)}catch(o){return xe(o)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(e,t){return t=V.resolve(typeof e=="function"?Pt.ignoreTransaction(e):e).timeout(t||6e4),G.trans?G.trans.waitFor(t):t},Promise:V,debug:{get:function(){return Je},set:function(e){Xr(e)}},derive:M,extend:O,props:T,override:he,Events:un,on:pt,liveQuery:Si,extendObservabilitySet:Vn,getByKeyPath:z,setByKeyPath:Y,delByKeyPath:function(e,t){typeof t=="string"?Y(e,t,void 0):"length"in t&&[].map.call(t,function(n){Y(e,n,void 0)})},shallowClone:de,deepClone:ve,getObjectDiff:Tr,cmp:se,asap:ye,minKey:-1/0,addons:[],connections:Mt,errnames:tr,dependencies:Hn,cache:At,semVer:"4.0.9",version:"4.0.9".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Pt.maxKey=hn(Pt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pt(fn,function(e){mt||(e=new CustomEvent(yr,{detail:e}),mt=!0,dispatchEvent(e),mt=!1)}),addEventListener(yr,function(e){e=e.detail,mt||Rr(e)}));var Lt,mt=!1,Ci=function(){};return typeof BroadcastChannel<"u"&&((Ci=function(){(Lt=new BroadcastChannel(yr)).onmessage=function(e){return e.data&&Rr(e.data)}})(),typeof Lt.unref=="function"&&Lt.unref(),pt(fn,function(e){mt||Lt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!at.disableBfCache&&e.persisted){Je&&console.debug("Dexie: handling persisted pagehide"),Lt?.close();for(var t=0,n=Mt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!at.disableBfCache&&e.persisted&&(Je&&console.debug("Dexie: handling persisted pageshow"),Ci(),Rr({all:new je(-1/0,[[]])}))})),V.rejectionMapper=function(e,t){return!e||e instanceof Xe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Qr[e.name]?e:(t=new Qr[e.name](t||e.message,e),"stack"in e&&I(t,"stack",{get:function(){return this.inner.stack}}),t)},Xr(Je),c(at,Object.freeze({__proto__:null,Dexie:at,liveQuery:Si,Entity:oi,cmp:se,PropModSymbol:ot,PropModification:cn,replacePrefix:function(e,t){return new cn({replacePrefix:[e,t]})},add:function(e){return new cn({add:e})},remove:function(e){return new cn({remove:e})},default:at,RangeSet:je,mergeRanges:mn,rangesOverlap:gi}),{default:at}),at})})(yo);var wa=yo.exports;const Fr=_a(wa),Mi=Symbol.for("Dexie"),Lr=globalThis[Mi]||(globalThis[Mi]=Fr);if(Fr.semVer!==Lr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fr.semVer} and ${Lr.semVer}`);/*! typescript-cookie v1.0.6 | MIT */const vo=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),go=a=>encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),Wr=decodeURIComponent,Yr=a=>(a[0]==='"'&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function ka(a){return a=Object.assign({},a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires!=null&&(a.expires=a.expires.toUTCString()),Object.entries(a).filter(([i,s])=>s!=null&&s!==!1).map(([i,s])=>s===!0?`; ${i}`:`; ${i}=${s.split(";")[0]}`).join("")}function bo(a,i,s){const c=/(?:^|; )([^=]*)=([^;]*)/g,p={};let v;for(;(v=c.exec(document.cookie))!=null;)try{const _=s(v[1]);if(p[_]=i(v[2],_),a===_)break}catch{}return a!=null?p[a]:p}const Ni=Object.freeze({decodeName:Wr,decodeValue:Yr,encodeName:vo,encodeValue:go}),Hr=Object.freeze({path:"/"});function Gr(a,i,s=Hr,{encodeValue:c=go,encodeName:p=vo}={}){return document.cookie=`${p(a)}=${c(i,a)}${ka(s)}`}function _o(a,{decodeValue:i=Yr,decodeName:s=Wr}={}){return bo(a,i,s)}function Oa({decodeValue:a=Yr,decodeName:i=Wr}={}){return bo(void 0,a,i)}function wo(a,i=Hr){Gr(a,"",Object.assign({},i,{expires:-1}))}function Ur(a,i){const s={set:function(p,v,_){return Gr(p,v,Object.assign({},this.attributes,_),{encodeValue:this.converter.write})},get:function(p){if(arguments.length===0)return Oa(this.converter.read);if(p!=null)return _o(p,this.converter.read)},remove:function(p,v){wo(p,Object.assign({},this.attributes,v))},withAttributes:function(p){return Ur(this.converter,Object.assign({},this.attributes,p))},withConverter:function(p){return Ur(Object.assign({},this.converter,p),this.attributes)}},c={attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(a)}};return Object.create(s,c)}Ur({read:Ni.decodeValue,write:Ni.encodeValue},Hr);const tt=new Lr("umamusume");tt.version(1).stores({events:"++id",images:"id"});const Ea=async a=>{const s=await(await fetch("uma.json",{cache:"no-cache"})).json();return s&&await tt.transaction("rw!",tt.table("events"),async()=>{await tt.table("events").clear(),await tt.table("events").bulkAdd(s)}).then(()=>Gr("last",a,{expires:365})),s},ko=async()=>{const i=await(await fetch("last",{cache:"no-cache"})).text();let s;return i!=_o("last")?s=await Ea(i):s=await tt.table("events").toArray(),!s||!s.length?(wo("last"),await ko()):s},Gt=await ko(),Fi=Array.from(Gt.filter(a=>a.t=="c"),a=>({name:a.c,image:a.i})).concat(Array.from(Gt.filter(a=>a.t=="m"),a=>({name:a.c,image:a.i}))).filter((a,i,s)=>s.findIndex(c=>c.name==a.name)==i),yt=_n({type:"character",name:"",image:""}),Wt=_n({rare:"SSR"}),Qt=_n(""),xa=mo(yt,a=>{let i=[];return a.name?a.type=="character"?i=Gt.filter(s=>(s.t=="c"||s.t=="m")&&s.c==a.name):a.type=="support"&&(i=Gt.filter(s=>s.t=="s"&&s.i==a.image)):i=Gt,i.sort((s,c)=>s.c==c.c?s.t==c.t?s.r==c.r?s.e.localeCompare(c.e):s.r.localeCompare(c.r):s.t.localeCompare(c.t):s.c.localeCompare(c.c)),i}),Aa=mo(Wt,a=>{let i=Array.from(Gt.filter(s=>s.t=="s"),s=>({name:s.c,rare:s.r,image:s.i})).filter((s,c,p)=>p.findIndex(v=>v.image==s.image)==c);return a.type&&(i=i.filter(s=>s.rare.includes(a.type))),a.rare&&(i=i.filter(s=>s.rare.replace(/[^SR]+/g,"")==a.rare)),i.sort((s,c)=>s.rare.replace(/[^SR]+/g,"")==c.rare.replace(/[^SR]+/g,"")?s.name.localeCompare(c.name):c.rare.replace(/[^SR]+/g,"").localeCompare(s.rare.replace(/[^SR]+/g,""))),i}),Pa=()=>{const{subscribe:a,set:i,update:s}=_n(!1);return{subscribe:a,switch:()=>s(c=>!c),off:()=>i(!1)}},Ct=Pa();function Sa(a){let i,s,c;return{c(){i=Q("header"),i.innerHTML='<a class="navbar-brand text-primary m-0 mr-md-3 sg1gxfn" href="/">ã¦ãå¨</a>',X(i,"class","navbar navbar-expand flex-column flex-md-row sg1gxfn")},m(p,v){ce(p,i,v),s||(c=Ve(i,"mousedown",Ct.off),s=!0)},p:Oe,i:Oe,o:Oe,d(p){p&&ae(i),s=!1,c()}}}class Ca extends en{constructor(i){super(),Zt(this,i,null,Sa,jt,{})}}function Ka(a){let i,s,c,p,v;return{c(){i=Q("img"),X(i,"class",s=Ti(a[3])+" s1s429m7"),X(i,"style",a[4]),ji(i.src,c=a[5])||X(i,"src",c),X(i,"title",a[2]),X(i,"alt",a[0]),De(i,"selected",a[1])},m(_,d){ce(_,i,d),p||(v=Ve(i,"click",a[7]),p=!0)},p(_,[d]){d&8&&s!==(s=Ti(_[3])+" s1s429m7")&&X(i,"class",s),d&16&&X(i,"style",_[4]),d&32&&!ji(i.src,c=_[5])&&X(i,"src",c),d&4&&X(i,"title",_[2]),d&1&&X(i,"alt",_[0]),d&10&&De(i,"selected",_[1])},i:Oe,o:Oe,d(_){_&&ae(i),p=!1,v()}}}function ja(a,i,s){let{id:c}=i,{alt:p}=i,{selected:v=!1}=i,{title:_=""}=i,{type:d=""}=i,{style:O=""}=i,C="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEAAAAALAAAAAABAAEAgAAAAAAAAAICRAEAOw==";const B=async()=>{let T;if(!c)return;const j=await tt.transaction("r",tt.table("images"),()=>tt.table("images").get({id:c}));if(j?T=j.image:T=new Blob,!T.size){const I=c;let M=`/image/${I}`;c.endsWith(".png")||(M=`/support/${I}.png`);try{const L=await fetch(M);L.ok&&(T=await L.blob(),I&&T.size&&tt.table("images").put({id:I,image:T}))}catch{}}T.size?s(5,C=URL.createObjectURL(T)):s(5,C="")};function D(T){ca.call(this,a,T)}return a.$$set=T=>{"id"in T&&s(6,c=T.id),"alt"in T&&s(0,p=T.alt),"selected"in T&&s(1,v=T.selected),"title"in T&&s(2,_=T.title),"type"in T&&s(3,d=T.type),"style"in T&&s(4,O=T.style)},a.$$.update=()=>{a.$$.dirty&64&&B()},[p,v,_,d,O,C,c,D]}class Tt extends en{constructor(i){super(),Zt(this,i,ja,Ka,jt,{id:6,alt:0,selected:1,title:2,type:3,style:4})}}function Li(a,i,s){const c=a.slice();return c[5]=i[s],c}function Ui(a,i,s){const c=a.slice();return c[8]=i[s][0],c[9]=i[s][1],c}function Vi(a,i){let s,c,p,v,_,d,O;p=new Tt({props:{id:i[8],alt:i[8],type:"type"}});function C(){return i[3](i[9])}return{key:a,first:null,c(){s=Q("li"),c=Q("span"),Ge(p.$$.fragment),v=me(),X(c,"class","s9ef3dn"),De(c,"checked",i[0].type==i[9]),X(s,"class","s9ef3dn"),this.first=s},m(B,D){ce(B,s,D),H(s,c),We(p,c,null),H(s,v),_=!0,d||(O=Ve(c,"click",C),d=!0)},p(B,D){i=B,(!_||D&3)&&De(c,"checked",i[0].type==i[9])},i(B){_||(be(p.$$.fragment,B),_=!0)},o(B){_e(p.$$.fragment,B),_=!1},d(B){B&&ae(s),Ye(p),d=!1,O()}}}function Ta(a){let i,s;return i=new Tt({props:{id:a[5].toLowerCase(),alt:a[5],type:"rare"}}),{c(){Ge(i.$$.fragment)},m(c,p){We(i,c,p),s=!0},p:Oe,i(c){s||(be(i.$$.fragment,c),s=!0)},o(c){_e(i.$$.fragment,c),s=!1},d(c){Ye(i,c)}}}function zi(a,i){let s,c,p,v,_,d,O=i[5]&&Ta(i);function C(){return i[4](i[5])}return{key:a,first:null,c(){s=Q("li"),c=Q("span"),O&&O.c(),p=me(),X(c,"class","s9ef3dn"),De(c,"checked",i[0].rare==i[5]),X(s,"class","s9ef3dn"),this.first=s},m(B,D){ce(B,s,D),H(s,c),O&&O.m(c,null),H(s,p),v=!0,_||(d=Ve(c,"click",C),_=!0)},p(B,D){i=B,i[5]&&O.p(i,D),(!v||D&5)&&De(c,"checked",i[0].rare==i[5])},i(B){v||(be(O),v=!0)},o(B){_e(O),v=!1},d(B){B&&ae(s),O&&O.d(),_=!1,d()}}}function Ia(a){let i,s=[],c=new Map,p,v,_=[],d=new Map,O,C=ze(Object.entries(a[1]));const B=j=>j[8];for(let j=0;j<C.length;j+=1){let I=Ui(a,C,j),M=B(I);c.set(M,s[j]=Vi(M,I))}let D=ze(a[2]);const T=j=>j[5];for(let j=0;j<D.length;j+=1){let I=Li(a,D,j),M=T(I);d.set(M,_[j]=zi(M,I))}return{c(){i=Q("ul");for(let j=0;j<s.length;j+=1)s[j].c();p=me(),v=Q("ul");for(let j=0;j<_.length;j+=1)_[j].c();X(i,"class","type s9ef3dn"),X(v,"class","rare s9ef3dn")},m(j,I){ce(j,i,I);for(let M=0;M<s.length;M+=1)s[M]&&s[M].m(i,null);ce(j,p,I),ce(j,v,I);for(let M=0;M<_.length;M+=1)_[M]&&_[M].m(v,null);O=!0},p(j,[I]){I&3&&(C=ze(Object.entries(j[1])),ut(),s=Jt(s,I,B,1,j,C,c,i,gn,Vi,null,Ui),st()),I&5&&(D=ze(j[2]),ut(),_=Jt(_,I,T,1,j,D,d,v,gn,zi,null,Li),st())},i(j){if(!O){for(let I=0;I<C.length;I+=1)be(s[I]);for(let I=0;I<D.length;I+=1)be(_[I]);O=!0}},o(j){for(let I=0;I<s.length;I+=1)_e(s[I]);for(let I=0;I<_.length;I+=1)_e(_[I]);O=!1},d(j){j&&(ae(i),ae(p),ae(v));for(let I=0;I<s.length;I+=1)s[I].d();for(let I=0;I<_.length;I+=1)_[I].d()}}}function Da(a,i,s){let c;return vt(a,Wt,O=>s(0,c=O)),[c,{speed:"ã¹ã",stamina:"ã¹ã¿",power:"ãã¯",guts:"æ ¹æ§",intelligence:"è³¢ã",friend:"åäºº",group:"ã°ã«"},["SSR","SR","R"],O=>{const C=document.getElementById("supports");C&&(C.scrollTop=0),c.type==O?Ue(Wt,c.type=void 0,c):Ue(Wt,c.type=O,c)},O=>{const C=document.getElementById("supports");C&&(C.scrollTop=0),c.rare==O?Ue(Wt,c.rare=void 0,c):Ue(Wt,c.rare=O,c)}]}class Ba extends en{constructor(i){super(),Zt(this,i,Da,Ia,jt,{})}}function Wi(a,i,s){const c=a.slice();return c[10]=i[s],c}function Yi(a,i,s){const c=a.slice();return c[10]=i[s],c}function Ra(a){let i,s,c,p,v=a[2].name+"",_,d,O,C=a[2].rare+"",B,D;return i=new Tt({props:{id:a[2].image,alt:a[2].name,type:"icon"}}),{c(){Ge(i.$$.fragment),s=me(),c=Q("div"),p=Q("span"),_=$e(v),d=me(),O=Q("span"),B=$e(C),Kt(c,"display","grid")},m(T,j){We(i,T,j),ce(T,s,j),ce(T,c,j),H(c,p),H(p,_),H(c,d),H(c,O),H(O,B),D=!0},p(T,j){const I={};j&4&&(I.id=T[2].image),j&4&&(I.alt=T[2].name),i.$set(I),(!D||j&4)&&v!==(v=T[2].name+"")&&nt(_,v),(!D||j&4)&&C!==(C=T[2].rare+"")&&nt(B,C)},i(T){D||(be(i.$$.fragment,T),D=!0)},o(T){_e(i.$$.fragment,T),D=!1},d(T){T&&(ae(s),ae(c)),Ye(i,T)}}}function qa(a){let i,s,c,p=a[2].name+"",v,_;return i=new Tt({props:{id:a[2].image,alt:a[2].name,type:"icon"}}),{c(){Ge(i.$$.fragment),s=me(),c=Q("span"),v=$e(p)},m(d,O){We(i,d,O),ce(d,s,O),ce(d,c,O),H(c,v),_=!0},p(d,O){const C={};O&4&&(C.id=d[2].image),O&4&&(C.alt=d[2].name),i.$set(C),(!_||O&4)&&p!==(p=d[2].name+"")&&nt(v,p)},i(d){_||(be(i.$$.fragment,d),_=!0)},o(d){_e(i.$$.fragment,d),_=!1},d(d){d&&(ae(s),ae(c)),Ye(i,d)}}}function $a(a){let i;return{c(){i=Q("h5"),i.textContent="ç¡",Kt(i,"color","gray"),X(i,"class","st4d7gg")},m(s,c){ce(s,i,c)},p:Oe,i:Oe,o:Oe,d(s){s&&ae(i)}}}function Ma(a){let i,s,c,p,v,_;i=new Ba({});const d=[La,Fa],O=[];function C(B,D){return B[4].length?0:1}return p=C(a),v=O[p]=d[p](a),{c(){Ge(i.$$.fragment),s=me(),c=Q("div"),v.c(),X(c,"id","supports"),X(c,"class","list st4d7gg")},m(B,D){We(i,B,D),ce(B,s,D),ce(B,c,D),O[p].m(c,null),_=!0},p(B,D){let T=p;p=C(B),p===T?O[p].p(B,D):(ut(),_e(O[T],1,1,()=>{O[T]=null}),st(),v=O[p],v?v.p(B,D):(v=O[p]=d[p](B),v.c()),be(v,1),v.m(c,null))},i(B){_||(be(i.$$.fragment,B),be(v),_=!0)},o(B){_e(i.$$.fragment,B),_e(v),_=!1},d(B){B&&(ae(s),ae(c)),Ye(i,B),O[p].d()}}}function Na(a){let i,s=[],c=new Map,p,v=ze(Fi);const _=d=>d[10].name;for(let d=0;d<v.length;d+=1){let O=Yi(a,v,d),C=_(O);c.set(C,s[d]=Gi(C,O))}return{c(){i=Q("div");for(let d=0;d<s.length;d+=1)s[d].c();X(i,"class","characters list st4d7gg")},m(d,O){ce(d,i,O);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(i,null);p=!0},p(d,O){O&12&&(v=ze(Fi),ut(),s=Jt(s,O,_,1,d,v,c,i,gn,Gi,null,Yi),st())},i(d){if(!p){for(let O=0;O<v.length;O+=1)be(s[O]);p=!0}},o(d){for(let O=0;O<s.length;O+=1)_e(s[O]);p=!1},d(d){d&&ae(i);for(let O=0;O<s.length;O+=1)s[O].d()}}}function Fa(a){let i;return{c(){i=$e("ç¡")},m(s,c){ce(s,i,c)},p:Oe,i:Oe,o:Oe,d(s){s&&ae(i)}}}function La(a){let i=[],s=new Map,c,p,v=ze(a[4]);const _=d=>d[10].image;for(let d=0;d<v.length;d+=1){let O=Wi(a,v,d),C=_(O);s.set(C,i[d]=Hi(C,O))}return{c(){for(let d=0;d<i.length;d+=1)i[d].c();c=ra()},m(d,O){for(let C=0;C<i.length;C+=1)i[C]&&i[C].m(d,O);ce(d,c,O),p=!0},p(d,O){O&28&&(v=ze(d[4]),ut(),i=Jt(i,O,_,1,d,v,s,c.parentNode,gn,Hi,c,Wi),st())},i(d){if(!p){for(let O=0;O<v.length;O+=1)be(i[O]);p=!0}},o(d){for(let O=0;O<i.length;O+=1)_e(i[O]);p=!1},d(d){d&&ae(c);for(let O=0;O<i.length;O+=1)i[O].d(d)}}}function Hi(a,i){let s,c,p,v;function _(){return i[9](i[10])}return c=new Tt({props:{selected:i[2].type=="support"&&i[2].image==i[10].image,id:i[10].image,alt:i[10].name,title:i[10].name,type:"icon",style:"min-height:96px"}}),c.$on("click",_),{key:a,first:null,c(){s=Q("li"),Ge(c.$$.fragment),p=me(),X(s,"class","st4d7gg"),this.first=s},m(d,O){ce(d,s,O),We(c,s,null),H(s,p),v=!0},p(d,O){i=d;const C={};O&20&&(C.selected=i[2].type=="support"&&i[2].image==i[10].image),O&16&&(C.id=i[10].image),O&16&&(C.alt=i[10].name),O&16&&(C.title=i[10].name),c.$set(C)},i(d){v||(be(c.$$.fragment,d),v=!0)},o(d){_e(c.$$.fragment,d),v=!1},d(d){d&&ae(s),Ye(c)}}}function Gi(a,i){let s,c,p,v;function _(){return i[8](i[10])}return c=new Tt({props:{selected:i[2].type=="character"&&i[2].name==i[10].name,id:i[10].image,alt:i[10].name,title:i[10].name,type:"icon",style:"height:72px"}}),c.$on("click",_),{key:a,first:null,c(){s=Q("li"),Ge(c.$$.fragment),p=me(),X(s,"class","st4d7gg"),this.first=s},m(d,O){ce(d,s,O),We(c,s,null),H(s,p),v=!0},p(d,O){i=d;const C={};O&4&&(C.selected=i[2].type=="character"&&i[2].name==i[10].name),c.$set(C)},i(d){v||(be(c.$$.fragment,d),v=!0)},o(d){_e(c.$$.fragment,d),v=!1},d(d){d&&ae(s),Ye(c)}}}function Ua(a){let i,s,c,p,v,_,d,O,C,B,D,T,j,I,M,L,ee,oe,he,ue,ye,z,Y,de,pe,we,Ke,te,ve,Me;const It=[$a,qa,Ra],Ne=[];function wn(le,Pe){return le[2].name?le[2].type=="character"?1:le[2].type=="support"?2:-1:0}~(M=wn(a))&&(L=Ne[M]=It[M](a));const Qe=[Na,Ma],Be=[];function Fe(le,Pe){return le[0]=="character"?0:1}return we=Fe(a),Ke=Be[we]=Qe[we](a),{c(){i=Q("span"),s=Di("svg"),c=Di("path"),v=me(),_=Q("div"),d=Q("div"),O=Q("div"),C=Q("h5"),C.textContent="ãã£ã«ã¿:",B=me(),D=Q("div"),T=Q("button"),j=me(),I=Q("div"),L&&L.c(),ee=me(),oe=Q("ul"),he=Q("li"),ue=Q("span"),ue.textContent="ã­ã£ã©",ye=me(),z=Q("li"),Y=Q("span"),Y.textContent="ãµãã¼ã",de=me(),pe=Q("div"),Ke.c(),X(c,"d","M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"),X(s,"viewBox","0 0 16 16"),X(s,"width","32"),X(s,"height","32"),X(s,"fill",p=a[2].name?"#007bff":"#6c757d"),X(i,"class","toggle st4d7gg"),De(i,"on",a[1]),X(C,"class","st4d7gg"),X(T,"class","btn-close st4d7gg"),X(D,"class","button st4d7gg"),De(D,"hidden",a[2].name==""),X(I,"class","display st4d7gg"),X(d,"class","info st4d7gg"),X(ue,"class","nav-link st4d7gg"),De(ue,"active",a[0]=="character"),X(he,"class","nav-item st4d7gg"),X(Y,"class","nav-link st4d7gg"),De(Y,"active",a[0]=="support"),X(z,"class","nav-item st4d7gg"),X(oe,"class","nav nav-tabs st4d7gg"),X(pe,"class","items st4d7gg"),X(_,"class","filter st4d7gg"),De(_,"open",a[1])},m(le,Pe){ce(le,i,Pe),H(i,s),H(s,c),ce(le,v,Pe),ce(le,_,Pe),H(_,d),H(d,O),H(O,C),H(O,B),H(O,D),H(D,T),H(d,j),H(d,I),~M&&Ne[M].m(I,null),H(_,ee),H(_,oe),H(oe,he),H(he,ue),H(oe,ye),H(oe,z),H(z,Y),H(_,de),H(_,pe),Be[we].m(pe,null),te=!0,ve||(Me=[Ve(i,"click",Ct.switch),Ve(T,"click",a[5]),Ve(ue,"click",a[6]),Ve(Y,"click",a[7])],ve=!0)},p(le,[Pe]){(!te||Pe&4&&p!==(p=le[2].name?"#007bff":"#6c757d"))&&X(s,"fill",p),(!te||Pe&2)&&De(i,"on",le[1]),(!te||Pe&4)&&De(D,"hidden",le[2].name=="");let Xe=M;M=wn(le),M===Xe?~M&&Ne[M].p(le,Pe):(L&&(ut(),_e(Ne[Xe],1,1,()=>{Ne[Xe]=null}),st()),~M?(L=Ne[M],L?L.p(le,Pe):(L=Ne[M]=It[M](le),L.c()),be(L,1),L.m(I,null)):L=null),(!te||Pe&1)&&De(ue,"active",le[0]=="character"),(!te||Pe&1)&&De(Y,"active",le[0]=="support");let Dt=we;we=Fe(le),we===Dt?Be[we].p(le,Pe):(ut(),_e(Be[Dt],1,1,()=>{Be[Dt]=null}),st(),Ke=Be[we],Ke?Ke.p(le,Pe):(Ke=Be[we]=Qe[we](le),Ke.c()),be(Ke,1),Ke.m(pe,null)),(!te||Pe&2)&&De(_,"open",le[1])},i(le){te||(be(L),be(Ke),te=!0)},o(le){_e(L),_e(Ke),te=!1},d(le){le&&(ae(i),ae(v),ae(_)),~M&&Ne[M].d(),Be[we].d(),ve=!1,rt(Me)}}}function Va(a,i,s){let c,p,v,_;vt(a,Ct,j=>s(1,c=j)),vt(a,yt,j=>s(2,p=j)),vt(a,Qt,j=>s(3,v=j)),vt(a,Aa,j=>s(4,_=j));let d="character";return[d,c,p,v,_,()=>{window.innerWidth<=767&&Ct.off(),Ue(yt,p={type:"character",name:"",image:""},p)},()=>s(0,d="character"),()=>s(0,d="support"),j=>{window.innerWidth<=767&&Ct.off(),p.name&&(p.type=="support"||p.type=="character"&&p.name!=j.name)&&Ue(Qt,v="",v),p.type=="character"&&p.name==j.name?Ue(yt,p={type:"character",name:"",image:""},p):Ue(yt,p={type:"character",name:j.name,image:j.image},p)},j=>{window.innerWidth<=767&&Ct.off(),p.name&&(p.type=="character"||p.type=="support"&&p.image!=j.image)&&Ue(Qt,v="",v),p.type=="support"&&p.image==j.image?Ue(yt,p={type:"support",name:"",image:""},p):Ue(yt,p={type:"support",name:j.name,rare:j.rare,image:j.image},p)}]}class za extends en{constructor(i){super(),Zt(this,i,Va,Ua,jt,{})}}function Wa(a){const i=a-1;return i*i*i+1}function Qi(a,{delay:i=0,duration:s=400,easing:c=Wa,x:p=0,y:v=0,opacity:_=0}={}){const d=getComputedStyle(a),O=+d.opacity,C=d.transform==="none"?"":d.transform,B=O*(1-_),[D,T]=Ii(p),[j,I]=Ii(v);return{delay:i,duration:s,easing:c,css:(M,L)=>`
			transform: ${C} translate(${(1-M)*D}${T}, ${(1-M)*j}${I});
			opacity: ${O-B*L}`}}function Xi(a,i,s){const c=a.slice();return c[13]=i[s],c}function Ji(a,i,s){const c=a.slice();return c[16]=i[s],c}function Zi(a){let i,s;function c(){return a[10](a[13])}return i=new Tt({props:{id:a[13].i,alt:a[13].c,type:"link"}}),i.$on("click",c),{c(){Ge(i.$$.fragment)},m(p,v){We(i,p,v),s=!0},p(p,v){a=p;const _={};v&2&&(_.id=a[13].i),v&2&&(_.alt=a[13].c),i.$set(_)},i(p){s||(be(i.$$.fragment,p),s=!0)},o(p){_e(i.$$.fragment,p),s=!1},d(p){Ye(i,p)}}}function Ya(a){let i,s=a[13].c+"",c,p,v,_=a[13].t=="c"?"ã¦ãå¨":"ãµãã¼ã",d,O,C,B=a[13].r+"",D;return{c(){i=Q("span"),c=$e(s),p=me(),v=Q("span"),d=$e(_),O=me(),C=Q("span"),D=$e(B)},m(T,j){ce(T,i,j),H(i,c),ce(T,p,j),ce(T,v,j),H(v,d),ce(T,O,j),ce(T,C,j),H(C,D)},p(T,j){j&2&&s!==(s=T[13].c+"")&&nt(c,s),j&2&&_!==(_=T[13].t=="c"?"ã¦ãå¨":"ãµãã¼ã")&&nt(d,_),j&2&&B!==(B=T[13].r+"")&&nt(D,B)},d(T){T&&(ae(i),ae(p),ae(v),ae(O),ae(C))}}}function Ha(a){let i,s=a[13].c+"",c,p,v;return{c(){i=Q("span"),c=$e(s),p=me(),v=Q("span"),v.textContent="ã¡ã¤ã³ã·ããªãªã¤ãã³ã"},m(_,d){ce(_,i,d),H(i,c),ce(_,p,d),ce(_,v,d)},p(_,d){d&2&&s!==(s=_[13].c+"")&&nt(c,s)},d(_){_&&(ae(i),ae(p),ae(v))}}}function eo(a,i){let s,c,p=i[16].b+"",v,_,d=i[6](i[16])+"",O;return{key:a,first:null,c(){s=Q("tr"),c=Q("td"),v=me(),_=Q("td"),O=me(),Kt(c,"vertical-align","middle"),Kt(_,"white-space","pre-line"),this.first=s},m(C,B){ce(C,s,B),H(s,c),c.innerHTML=p,H(s,v),H(s,_),_.innerHTML=d,H(s,O)},p(C,B){i=C,B&2&&p!==(p=i[16].b+"")&&(c.innerHTML=p),B&2&&d!==(d=i[6](i[16])+"")&&(_.innerHTML=d)},d(C){C&&ae(s)}}}function to(a,i){let s,c,p,v,_=i[13].e+"",d,O,C,B,D,T,j,I,M,L=[],ee=new Map,oe,he,ue,ye,z=(i[13].a||i[13].i)&&Zi(i);function Y(te,ve){return te[13].t=="m"?Ha:Ya}let de=Y(i),pe=de(i),we=ze(i[13].o);const Ke=te=>te[16].b+te[16].g;for(let te=0;te<we.length;te+=1){let ve=Ji(i,we,te),Me=Ke(ve);ee.set(Me,L[te]=eo(Me,ve))}return{key:a,first:null,c(){s=Q("table"),c=Q("thead"),p=Q("tr"),v=Q("th"),d=$e(_),O=me(),C=Q("tbody"),B=Q("tr"),D=Q("td"),T=Q("div"),z&&z.c(),j=me(),I=Q("div"),pe.c(),M=me();for(let te=0;te<L.length;te+=1)L[te].c();oe=me(),X(v,"colspan","2"),Kt(I,"display","grid"),Kt(T,"display","flex"),X(D,"colspan","2"),X(C,"class","s1gy2h74"),X(s,"class","table table-bordered s1gy2h74"),this.first=s},m(te,ve){ce(te,s,ve),H(s,c),H(c,p),H(p,v),H(v,d),H(s,O),H(s,C),H(C,B),H(B,D),H(D,T),z&&z.m(T,null),H(T,j),H(T,I),pe.m(I,null),H(C,M);for(let Me=0;Me<L.length;Me+=1)L[Me]&&L[Me].m(C,null);H(s,oe),ye=!0},p(te,ve){i=te,(!ye||ve&2)&&_!==(_=i[13].e+"")&&nt(d,_),i[13].a||i[13].i?z?(z.p(i,ve),ve&2&&be(z,1)):(z=Zi(i),z.c(),be(z,1),z.m(T,j)):z&&(ut(),_e(z,1,1,()=>{z=null}),st()),de===(de=Y(i))&&pe?pe.p(i,ve):(pe.d(1),pe=de(i),pe&&(pe.c(),pe.m(I,null))),ve&66&&(we=ze(i[13].o),L=Jt(L,ve,Ke,1,i,we,ee,C,ya,eo,null,Ji))},i(te){ye||(be(z),te&&Xt(()=>{ye&&(ue&&ue.end(1),he=pa(s,Qi,{x:"100%",duration:400}),he.start())}),ye=!0)},o(te){_e(z),he&&he.invalidate(),te&&(ue=ma(s,Qi,{x:"100%",duration:400})),ye=!1},d(te){te&&ae(s),z&&z.d(),pe.d();for(let ve=0;ve<L.length;ve+=1)L[ve].d();te&&ue&&ue.end()}}}function Ga(a){let i,s,c,p,v,_,d=`â»${a[0].name?1:2}æå­ä»¥ä¸å¥åããã¨æ¤ç´¢ãéå§ãã¾ã`,O,C,B,D=`(${a[2]}/${a[4].length})`,T,j,I,M=[],L=new Map,ee,oe,he,ue=ze(a[1]);const ye=z=>z[13].c+z[13].r+z[13].e+z[13].k+JSON.stringify(z[13].o);for(let z=0;z<ue.length;z+=1){let Y=Xi(a,ue,z),de=ye(Y);L.set(de,M[z]=to(de,Y))}return{c(){i=Q("div"),s=Q("div"),c=Q("input"),p=me(),v=Q("div"),_=Q("span"),O=$e(d),C=me(),B=Q("span"),T=$e(D),j=me(),I=Q("div");for(let z=0;z<M.length;z+=1)M[z].c();X(c,"class","form-control"),X(c,"type","search"),X(c,"placeholder","ã¦ãå¨åãã¤ãã³ããé¸æè¢ãã­ã¹ã"),X(s,"class","input-group s1gy2h74"),Kt(B,"float","right"),X(v,"class","message s1gy2h74"),X(I,"id","results"),X(I,"class","s1gy2h74"),X(i,"class","content s1gy2h74")},m(z,Y){ce(z,i,Y),H(i,s),H(s,c),Bi(c,a[3]),H(i,p),H(i,v),H(v,_),H(_,O),H(v,C),H(v,B),H(B,T),H(i,j),H(i,I);for(let de=0;de<M.length;de+=1)M[de]&&M[de].m(I,null);ee=!0,oe||(he=[Ve(c,"input",a[8]),Ve(c,"keydown",a[9]),Ve(c,"input",a[5]),Ve(i,"mousedown",Ct.off)],oe=!0)},p(z,[Y]){Y&8&&c.value!==z[3]&&Bi(c,z[3]),(!ee||Y&1)&&d!==(d=`â»${z[0].name?1:2}æå­ä»¥ä¸å¥åããã¨æ¤ç´¢ãéå§ãã¾ã`)&&nt(O,d),(!ee||Y&20)&&D!==(D=`(${z[2]}/${z[4].length})`)&&nt(T,D),Y&66&&(ue=ze(z[1]),ut(),M=Jt(M,Y,ye,1,z,ue,L,I,gn,to,null,Xi),st())},i(z){if(!ee){for(let Y=0;Y<ue.length;Y+=1)be(M[Y]);ee=!0}},o(z){for(let Y=0;Y<M.length;Y+=1)_e(M[Y]);ee=!1},d(z){z&&ae(i);for(let Y=0;Y<M.length;Y+=1)M[Y].d();oe=!1,rt(he)}}}function Qa(a,i,s){let c,p,v;vt(a,Qt,L=>s(3,c=L)),vt(a,xa,L=>s(4,p=L)),vt(a,yt,L=>s(0,v=L));let _=[],d=0,O=0;const C=(L,ee)=>{if(ee.c.includes(L)||ee.e.includes(L)||ee.k.includes(L))return!0;let oe=!1;return ee.o.forEach(he=>{he.b.includes(L)&&(oe=!0)}),oe},B=()=>{let L=[];c?(v.name?c.length>0:c.length>1)&&p.forEach(ye=>{C(c,ye)&&L.push(ye)}):v.name&&(L=p);const ee=document.getElementById("results");ee&&(ee.scrollTop=0);const oe=70;O++;const he=O,ue=_.length>5?5:_.length;if(ue){s(1,_=_.slice(0,ue));const ye=setInterval(()=>{if(_.length&&he==O){s(1,_=_.slice(1,_.length));return}clearInterval(ye)},oe)}s(2,d=L.length)&&setTimeout(()=>{if(he==O){let ye=1;const z=setInterval(()=>{if(ye<=5&&ye<=d&&he==O){s(1,_=L.slice(0,ye)),ye++;return}clearInterval(z),d>5&&he==O&&s(1,_=L)},oe)}},ue?ue*oe+300:0)},D=L=>{let ee=L.g;return L.s&&Object.entries(L.s).forEach(([oe,he])=>{ee=ee.replaceAll(`ã${oe}ã`,`<a href="${he}" target="_blank">ã${oe}ã</a>`)}),ee},T=()=>{Ue(Qt,c="",c),s(1,_=[])};function j(){c=this.value,Qt.set(c)}const I=L=>{L.key==="Escape"&&T()},M=L=>{L.a&&window.open(L.a)};return a.$$.update=()=>{a.$$.dirty&1&&B()},[v,_,d,c,p,B,D,T,j,I,M]}class Xa extends en{constructor(i){super(),Zt(this,i,Qa,Ga,jt,{})}}function Ja(a){let i,s,c,p,v,_;return i=new Ca({}),c=new za({}),v=new Xa({}),{c(){Ge(i.$$.fragment),s=me(),Ge(c.$$.fragment),p=me(),Ge(v.$$.fragment)},m(d,O){We(i,d,O),ce(d,s,O),We(c,d,O),ce(d,p,O),We(v,d,O),_=!0},p:Oe,i(d){_||(be(i.$$.fragment,d),be(c.$$.fragment,d),be(v.$$.fragment,d),_=!0)},o(d){_e(i.$$.fragment,d),_e(c.$$.fragment,d),_e(v.$$.fragment,d),_=!1},d(d){d&&(ae(s),ae(p)),Ye(i,d),Ye(c,d),Ye(v,d)}}}class Za extends en{constructor(i){super(),Zt(this,i,null,Ja,jt,{})}}new Za({target:document.body});
