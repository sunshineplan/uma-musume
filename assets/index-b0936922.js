(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))c(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const w of g.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function s(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(p){if(p.ep)return;p.ep=!0;const g=s(p);fetch(p.href,g)}})();function Oe(){}const no=a=>a;function ro(a){return a()}function ji(){return Object.create(null)}function rt(a){a.forEach(ro)}function bn(a){return typeof a=="function"}function jt(a,i){return a!=a?i==i:a!==i||a&&typeof a=="object"||typeof a=="function"}let Qn;function Ki(a,i){return a===i?!0:(Qn||(Qn=document.createElement("a")),Qn.href=i,a===Qn.href)}function ea(a){return Object.keys(a).length===0}function io(a,...i){if(a==null){for(const c of i)c(void 0);return Oe}const s=a.subscribe(...i);return s.unsubscribe?()=>s.unsubscribe():s}function vt(a,i,s){a.$$.on_destroy.push(io(i,s))}function Ti(a){return a??""}function Ue(a,i,s){return a.set(s),i}function Di(a){const i=typeof a=="string"&&a.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[a,"px"]}const oo=typeof window<"u";let ao=oo?()=>window.performance.now():()=>Date.now(),Vr=oo?a=>requestAnimationFrame(a):Oe;const Wt=new Set;function uo(a){Wt.forEach(i=>{i.c(a)||(Wt.delete(i),i.f())}),Wt.size!==0&&Vr(uo)}function so(a){let i;return Wt.size===0&&Vr(uo),{promise:new Promise(s=>{Wt.add(i={c:a,f:s})}),abort(){Wt.delete(i)}}}function Y(a,i){a.appendChild(i)}function co(a){if(!a)return document;const i=a.getRootNode?a.getRootNode():a.ownerDocument;return i&&i.host?i:a.ownerDocument}function ta(a){const i=G("style");return i.textContent="/* empty */",na(co(a),i),i.sheet}function na(a,i){return Y(a.head||a,i),i.sheet}function se(a,i,s){a.insertBefore(i,s||null)}function ae(a){a.parentNode&&a.parentNode.removeChild(a)}function G(a){return document.createElement(a)}function Ii(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function $e(a){return document.createTextNode(a)}function me(){return $e(" ")}function ra(){return $e("")}function Ve(a,i,s,c){return a.addEventListener(i,s,c),()=>a.removeEventListener(i,s,c)}function Q(a,i,s){s==null?a.removeAttribute(i):a.getAttribute(i)!==s&&a.setAttribute(i,s)}function ia(a){return Array.from(a.childNodes)}function nt(a,i){i=""+i,a.data!==i&&(a.data=i)}function Bi(a,i){a.value=i??""}function Ct(a,i,s,c){s==null?a.style.removeProperty(i):a.style.setProperty(i,s,c?"important":"")}function De(a,i,s){a.classList.toggle(i,!!s)}function oa(a,i,{bubbles:s=!1,cancelable:c=!1}={}){return new CustomEvent(a,{detail:i,bubbles:s,cancelable:c})}const Jn=new Map;let Zn=0;function aa(a){let i=5381,s=a.length;for(;s--;)i=(i<<5)-i^a.charCodeAt(s);return i>>>0}function ua(a,i){const s={stylesheet:ta(i),rules:{}};return Jn.set(a,s),s}function lo(a,i,s,c,p,g,w,h=0){const k=16.666/c;let C=`{
`;for(let M=0;M<=1;M+=k){const ee=i+(s-i)*g(M);C+=M*100+`%{${w(ee,1-ee)}}
`}const B=C+`100% {${w(s,1-s)}}
}`,I=`__svelte_${aa(B)}_${h}`,T=co(a),{stylesheet:K,rules:D}=Jn.get(T)||ua(T,a);D[I]||(D[I]=!0,K.insertRule(`@keyframes ${I} ${B}`,K.cssRules.length));const N=a.style.animation||"";return a.style.animation=`${N?`${N}, `:""}${I} ${c}ms linear ${p}ms 1 both`,Zn+=1,I}function Nr(a,i){const s=(a.style.animation||"").split(", "),c=s.filter(i?g=>g.indexOf(i)<0:g=>g.indexOf("__svelte")===-1),p=s.length-c.length;p&&(a.style.animation=c.join(", "),Zn-=p,Zn||sa())}function sa(){Vr(()=>{Zn||(Jn.forEach(a=>{const{ownerNode:i}=a.stylesheet;i&&ae(i)}),Jn.clear())})}let zr;function vn(a){zr=a}function ca(a,i){const s=a.$$.callbacks[i.type];s&&s.slice().forEach(c=>c.call(this,i))}const Vt=[],Ri=[];let Yt=[];const qi=[],la=Promise.resolve();let Fr=!1;function fa(){Fr||(Fr=!0,la.then(fo))}function Qt(a){Yt.push(a)}const $r=new Set;let Lt=0;function fo(){if(Lt!==0)return;const a=zr;do{try{for(;Lt<Vt.length;){const i=Vt[Lt];Lt++,vn(i),ha(i.$$)}}catch(i){throw Vt.length=0,Lt=0,i}for(vn(null),Vt.length=0,Lt=0;Ri.length;)Ri.pop()();for(let i=0;i<Yt.length;i+=1){const s=Yt[i];$r.has(s)||($r.add(s),s())}Yt.length=0}while(Vt.length);for(;qi.length;)qi.pop()();Fr=!1,$r.clear(),vn(a)}function ha(a){if(a.fragment!==null){a.update(),rt(a.before_update);const i=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,i),a.after_update.forEach(Qt)}}function da(a){const i=[],s=[];Yt.forEach(c=>a.indexOf(c)===-1?i.push(c):s.push(c)),s.forEach(c=>c()),Yt=i}let yn;function ho(){return yn||(yn=Promise.resolve(),yn.then(()=>{yn=null})),yn}function er(a,i,s){a.dispatchEvent(oa(`${i?"intro":"outro"}${s}`))}const Xn=new Set;let gt;function ut(){gt={r:0,c:[],p:gt}}function st(){gt.r||rt(gt.c),gt=gt.p}function be(a,i){a&&a.i&&(Xn.delete(a),a.i(i))}function _e(a,i,s,c){if(a&&a.o){if(Xn.has(a))return;Xn.add(a),gt.c.push(()=>{Xn.delete(a),c&&(s&&a.d(1),c())}),a.o(i)}else c&&c()}const po={duration:0};function pa(a,i,s){const c={direction:"in"};let p=i(a,s,c),g=!1,w,h,k=0;function C(){w&&Nr(a,w)}function B(){const{delay:T=0,duration:K=300,easing:D=no,tick:N=Oe,css:M}=p||po;M&&(w=lo(a,0,1,K,T,D,M,k++)),N(0,1);const ee=ao()+T,oe=ee+K;h&&h.abort(),g=!0,Qt(()=>er(a,!0,"start")),h=so(he=>{if(g){if(he>=oe)return N(1,0),er(a,!0,"end"),C(),g=!1;if(he>=ee){const ue=D((he-ee)/K);N(ue,1-ue)}}return g})}let I=!1;return{start(){I||(I=!0,Nr(a),bn(p)?(p=p(c),ho().then(B)):B())},invalidate(){I=!1},end(){g&&(C(),g=!1)}}}function ma(a,i,s){const c={direction:"out"};let p=i(a,s,c),g=!0,w;const h=gt;h.r+=1;let k;function C(){const{delay:B=0,duration:I=300,easing:T=no,tick:K=Oe,css:D}=p||po;D&&(w=lo(a,1,0,I,B,T,D));const N=ao()+B,M=N+I;Qt(()=>er(a,!1,"start")),"inert"in a&&(k=a.inert,a.inert=!0),so(ee=>{if(g){if(ee>=M)return K(0,1),er(a,!1,"end"),--h.r||rt(h.c),!1;if(ee>=N){const oe=T((ee-N)/I);K(1-oe,oe)}}return g})}return bn(p)?ho().then(()=>{p=p(c),C()}):C(),{end(B){B&&"inert"in a&&(a.inert=k),B&&p.tick&&p.tick(1,0),g&&(w&&Nr(a,w),g=!1)}}}function ze(a){return a?.length!==void 0?a:Array.from(a)}function ya(a,i){a.d(1),i.delete(a.key)}function gn(a,i){_e(a,1,1,()=>{i.delete(a.key)})}function Xt(a,i,s,c,p,g,w,h,k,C,B,I){let T=a.length,K=g.length,D=T;const N={};for(;D--;)N[a[D].key]=D;const M=[],ee=new Map,oe=new Map,he=[];for(D=K;D--;){const W=I(p,g,D),de=s(W);let pe=w.get(de);pe?c&&he.push(()=>pe.p(W,i)):(pe=C(de,W),pe.c()),ee.set(de,M[D]=pe),de in N&&oe.set(de,Math.abs(D-N[de]))}const ue=new Set,ye=new Set;function z(W){be(W,1),W.m(h,B),w.set(W.key,W),B=W.first,K--}for(;T&&K;){const W=M[K-1],de=a[T-1],pe=W.key,we=de.key;W===de?(B=W.first,T--,K--):ee.has(we)?!w.has(pe)||ue.has(pe)?z(W):ye.has(we)?T--:oe.get(pe)>oe.get(we)?(ye.add(pe),z(W)):(ue.add(we),T--):(k(de,w),T--)}for(;T--;){const W=a[T];ee.has(W.key)||k(W,w)}for(;K;)z(M[K-1]);return rt(he),M}function Ge(a){a&&a.c()}function We(a,i,s){const{fragment:c,after_update:p}=a.$$;c&&c.m(i,s),Qt(()=>{const g=a.$$.on_mount.map(ro).filter(bn);a.$$.on_destroy?a.$$.on_destroy.push(...g):rt(g),a.$$.on_mount=[]}),p.forEach(Qt)}function Ye(a,i){const s=a.$$;s.fragment!==null&&(da(s.after_update),rt(s.on_destroy),s.fragment&&s.fragment.d(i),s.on_destroy=s.fragment=null,s.ctx=[])}function va(a,i){a.$$.dirty[0]===-1&&(Vt.push(a),fa(),a.$$.dirty.fill(0)),a.$$.dirty[i/31|0]|=1<<i%31}function Jt(a,i,s,c,p,g,w=null,h=[-1]){const k=zr;vn(a);const C=a.$$={fragment:null,ctx:[],props:g,update:Oe,not_equal:p,bound:ji(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(k?k.$$.context:[])),callbacks:ji(),dirty:h,skip_bound:!1,root:i.target||k.$$.root};w&&w(C.root);let B=!1;if(C.ctx=s?s(a,i.props||{},(I,T,...K)=>{const D=K.length?K[0]:T;return C.ctx&&p(C.ctx[I],C.ctx[I]=D)&&(!C.skip_bound&&C.bound[I]&&C.bound[I](D),B&&va(a,I)),T}):[],C.update(),B=!0,rt(C.before_update),C.fragment=c?c(C.ctx):!1,i.target){if(i.hydrate){const I=ia(i.target);C.fragment&&C.fragment.l(I),I.forEach(ae)}else C.fragment&&C.fragment.c();i.intro&&be(a.$$.fragment),We(a,i.target,i.anchor),fo()}vn(k)}class Zt{$$=void 0;$$set=void 0;$destroy(){Ye(this,1),this.$destroy=Oe}$on(i,s){if(!bn(s))return Oe;const c=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return c.push(s),()=>{const p=c.indexOf(s);p!==-1&&c.splice(p,1)}}$set(i){this.$$set&&!ea(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}}const ga="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ga);const Ut=[];function ba(a,i){return{subscribe:_n(a,i).subscribe}}function _n(a,i=Oe){let s;const c=new Set;function p(h){if(jt(a,h)&&(a=h,s)){const k=!Ut.length;for(const C of c)C[1](),Ut.push(C,a);if(k){for(let C=0;C<Ut.length;C+=2)Ut[C][0](Ut[C+1]);Ut.length=0}}}function g(h){p(h(a))}function w(h,k=Oe){const C=[h,k];return c.add(C),c.size===1&&(s=i(p,g)||Oe),h(a),()=>{c.delete(C),c.size===0&&s&&(s(),s=null)}}return{set:p,update:g,subscribe:w}}function mo(a,i,s){const c=!Array.isArray(a),p=c?[a]:a;if(!p.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const g=i.length<2;return ba(s,(w,h)=>{let k=!1;const C=[];let B=0,I=Oe;const T=()=>{if(B)return;I();const D=i(c?C[0]:C,w,h);g?w(D):I=bn(D)?D:Oe},K=p.map((D,N)=>io(D,M=>{C[N]=M,B&=~(1<<N),k&&T()},()=>{B|=1<<N}));return k=!0,T(),function(){rt(K),I(),k=!1}})}var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _a(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var yo={exports:{}};(function(a,i){(function(s,c){a.exports=c()})($i,function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])})(e,t)},c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t,n){if(n||arguments.length===2)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var g=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$i,w=Object.keys,h=Array.isArray;function k(e,t){return typeof t!="object"||w(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||g.Promise||(g.Promise=Promise);var C=Object.getPrototypeOf,B={}.hasOwnProperty;function I(e,t){return B.call(e,t)}function T(e,t){typeof t=="function"&&(t=t(C(e))),(typeof Reflect>"u"?w:Reflect.ownKeys)(t).forEach(function(n){D(e,n,t[n])})}var K=Object.defineProperty;function D(e,t,n,r){K(e,t,k(n&&I(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function N(e){return{from:function(t){return e.prototype=Object.create(t.prototype),D(e.prototype,"constructor",e),{extend:T.bind(null,e.prototype)}}}}var M=Object.getOwnPropertyDescriptor,ee=[].slice;function oe(e,t,n){return ee.call(e,t,n)}function he(e,t){return t(e)}function ue(e){if(!e)throw new Error("Assertion Failed")}function ye(e){g.setImmediate?setImmediate(e):setTimeout(e,0)}function z(e,t){if(typeof t=="string"&&I(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var u=z(e,t[r]);n.push(u)}return n}var l=t.indexOf(".");if(l!==-1){var f=e[t.substr(0,l)];return f==null?void 0:z(f,t.substr(l+1))}}function W(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ue(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)W(e,t[r],n[r])}else{var u,l,f=t.indexOf(".");f!==-1?(u=t.substr(0,f),(l=t.substr(f+1))===""?n===void 0?h(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n:W(f=!(f=e[u])||!I(e,u)?e[u]={}:f,l,n)):n===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function de(e){var t,n={};for(t in e)I(e,t)&&(n[t]=e[t]);return n}var pe=[].concat;function we(e){return pe.apply([],e)}var ot="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(we([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return g[e]}),je=new Set(ot.map(function(e){return g[e]})),te=null;function ve(e){return te=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=te.get(n);if(r)return r;if(h(n)){r=[],te.set(n,r);for(var o=0,u=n.length;o<u;++o)r.push(t(n[o]))}else if(je.has(n.constructor))r=n;else{var l,f=C(n);for(l in r=f===Object.prototype?{}:Object.create(f),te.set(n,r),n)I(n,l)&&(r[l]=t(n[l]))}return r}(e),te=null,e}var Ne={}.toString;function Tt(e){return Ne.call(e).slice(8,-1)}var Fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",wn=typeof Fe=="symbol"?function(e){var t;return e!=null&&(t=e[Fe])&&t.apply(e)}:function(){return null};function Qe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ie={};function Me(e){var t,n,r,o;if(arguments.length===1){if(h(e))return e.slice();if(this===Ie&&typeof e=="string")return[e];if(o=wn(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var le=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},nn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Le=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(nn),Pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(e,t){this.name=e,this.message=t}function Dt(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,o){return o.indexOf(n)===r}).join(`
`)}function kn(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Dt(e,t)}function It(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Dt(e,this.failures)}N(Xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(kn).from(Xe),N(It).from(Xe);var tr=Le.reduce(function(e,t){return e[t]=t+"Error",e},{}),Oo=Xe,X=Le.reduce(function(e,t){var n=t+"Error";function r(o,u){this.name=n,o?typeof o=="string"?(this.message="".concat(o).concat(u?`
 `+u:""),this.inner=u||null):typeof o=="object"&&(this.message="".concat(o.name," ").concat(o.message),this.inner=o):(this.message=Pe[t]||n,this.inner=null)}return N(r).from(Oo),e[t]=r,e},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Qr=nn.reduce(function(e,t){return e[t+"Error"]=X[t],e},{}),On=Le.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=X[t]),e},{});function ge(){}function en(e){return e}function Eo(e,t){return e==null||e===en?t:function(n){return t(e(n))}}function bt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xo(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?bt(r,this.onsuccess):r),o&&(this.onerror=this.onerror?bt(o,this.onerror):o),u!==void 0?u:n}}function Ao(e,t){return e===ge?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?bt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?bt(r,this.onerror):r)}}function Po(e,t){return e===ge?t:function(n){var r=e.apply(this,arguments);k(n,r);var o=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?bt(o,this.onsuccess):o),u&&(this.onerror=this.onerror?bt(u,this.onerror):u),r===void 0?n===void 0?void 0:n:k(r,n)}}function So(e,t){return e===ge?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function nr(e,t){return e===ge?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return n.then(function(){return t.apply(r,u)})}return t.apply(this,arguments)}}On.ModifyError=kn,On.DexieError=Xe,On.BulkError=It;var Je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xr(e){Je=e}var tn={},Jr=100,ot=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,C(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,C(t),e]}(),nn=ot[0],Le=ot[1],ot=ot[2],Le=Le&&Le.then,rn=nn&&nn.constructor,rr=!!ot,on=function(e,t){an.push([e,t]),En&&(queueMicrotask(jo),En=!1)},ir=!0,En=!0,_t=[],xn=[],or=en,ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ge,pgp:!1,env:{},finalize:ge},H=ct,an=[],wt=0,An=[];function V(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=H;if(typeof e!="function"){if(e!==tn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ur(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,o){try{o(function(u){if(r._state===null){if(u===r)throw new TypeError("A promise cannot be resolved with itself.");var l=r._lib&&Bt();u&&typeof u.then=="function"?n(r,function(f,v){u instanceof V?u._then(f,v):u.then(f,v)}):(r._state=!0,r._value=u,ei(r)),l&&Rt()}},ur.bind(null,r))}catch(u){ur(r,u)}}(this,e)}var ar={get:function(){var e=H,t=jn;function n(r,o){var u=this,l=!e.global&&(e!==H||t!==jn),f=l&&!ft(),v=new V(function(m,O){sr(u,new Zr(ni(r,e,l,f),ni(o,e,l,f),m,O,e))});return this._consoleTask&&(v._consoleTask=this._consoleTask),v}return n.prototype=tn,n},set:function(e){D(this,"then",e&&e.prototype===tn?ar:{get:function(){return e},set:ar.set})}};function Zr(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}function ur(e,t){var n,r;xn.push(t),e._state===null&&(n=e._lib&&Bt(),t=or(t),e._state=!1,e._value=t,r=e,_t.some(function(o){return o._value===r._value})||_t.push(r),ei(e),n&&Rt())}function ei(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)sr(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),wt===0&&(++wt,on(function(){--wt==0&&cr()},[]))}function sr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++wt,on(Co,[n,e,t])}else e._listeners.push(t)}function Co(e,t,n){try{var r,o=t._value;!t._state&&xn.length&&(xn=[]),r=Je&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||xn.indexOf(o)!==-1||function(u){for(var l=_t.length;l;)if(_t[--l]._value===u._value)return _t.splice(l,1)}(t),n.resolve(r)}catch(u){n.reject(u)}finally{--wt==0&&cr(),--n.psd.ref||n.psd.finalize()}}function jo(){kt(ct,function(){Bt()&&Rt()})}function Bt(){var e=ir;return En=ir=!1,e}function Rt(){var e,t,n;do for(;0<an.length;)for(e=an,an=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<an.length);En=ir=!0}function cr(){var e=_t;_t=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=An.slice(0),n=t.length;n;)t[--n]()}function Pn(e){return new V(tn,!1,e)}function Ee(e,t){var n=H;return function(){var r=Bt(),o=H;try{return ht(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{ht(o,!1),r&&Rt()}}}T(V.prototype,{then:ar,_then:function(e,t){sr(this,new Zr(null,null,e,t,H))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Pn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Pn)(r)})},finally:function(e){return this.then(function(t){return V.resolve(e()).then(function(){return t})},function(t){return V.resolve(e()).then(function(){return Pn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new V(function(r,o){var u=setTimeout(function(){return o(new X.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&D(V.prototype,Symbol.toStringTag,"Dexie.Promise"),ct.env=ti(),T(V,{all:function(){var e=Me.apply(null,arguments).map(Kn);return new V(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,u){return V.resolve(o).then(function(l){e[u]=l,--r||t(e)},n)})})},resolve:function(e){return e instanceof V?e:e&&typeof e.then=="function"?new V(function(t,n){e.then(t,n)}):new V(tn,!0,e)},reject:Pn,race:function(){var e=Me.apply(null,arguments).map(Kn);return new V(function(t,n){e.map(function(r){return V.resolve(r).then(t,n)})})},PSD:{get:function(){return H},set:function(e){return H=e}},totalEchoes:{get:function(){return jn}},newPSD:lt,usePSD:kt,scheduler:{get:function(){return on},set:function(e){on=e}},rejectionMapper:{get:function(){return or},set:function(e){or=e}},follow:function(e,t){return new V(function(n,r){return lt(function(o,u){var l=H;l.unhandleds=[],l.onunhandled=u,l.finalize=bt(function(){var f,v=this;f=function(){v.unhandleds.length===0?o():u(v.unhandleds[0])},An.push(function m(){f(),An.splice(An.indexOf(m),1)}),++wt,on(function(){--wt==0&&cr()},[])},l.finalize),e()},t,n,r)})}}),rn&&(rn.allSettled&&D(V,"allSettled",function(){var e=Me.apply(null,arguments).map(Kn);return new V(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(o,u){return V.resolve(o).then(function(l){return r[u]={status:"fulfilled",value:l}},function(l){return r[u]={status:"rejected",reason:l}}).then(function(){return--n||t(r)})})})}),rn.any&&typeof AggregateError<"u"&&D(V,"any",function(){var e=Me.apply(null,arguments).map(Kn);return new V(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(u,l){return V.resolve(u).then(function(f){return t(f)},function(f){o[l]=f,--r||n(new AggregateError(o))})})})}));var Se={awaits:0,echoes:0,id:0},Ko=0,Sn=[],Cn=0,jn=0,To=0;function lt(e,t,n,r){var o=H,u=Object.create(o);return u.parent=o,u.ref=0,u.global=!1,u.id=++To,ct.env,u.env=rr?{Promise:V,PromiseProp:{value:V,configurable:!0,writable:!0},all:V.all,race:V.race,allSettled:V.allSettled,any:V.any,resolve:V.resolve,reject:V.reject}:{},t&&k(u,t),++o.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},r=kt(u,e,n,r),u.ref===0&&u.finalize(),r}function qt(){return Se.id||(Se.id=++Ko),++Se.awaits,Se.echoes+=Jr,Se.id}function ft(){return!!Se.awaits&&(--Se.awaits==0&&(Se.id=0),Se.echoes=Se.awaits*Jr,!0)}function Kn(e){return Se.echoes&&e&&e.constructor===rn?(qt(),e.then(function(t){return ft(),t},function(t){return ft(),xe(t)})):e}function Do(){var e=Sn[Sn.length-1];Sn.pop(),ht(e,!1)}function ht(e,t){var n,r=H;(t?!Se.echoes||Cn++&&e===H:!Cn||--Cn&&e===H)||queueMicrotask(t?function(o){++jn,Se.echoes&&--Se.echoes!=0||(Se.echoes=Se.awaits=Se.id=0),Sn.push(H),ht(o,!0)}.bind(null,e):Do),e!==H&&(H=e,r===ct&&(ct.env=ti()),rr&&(n=ct.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(g,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function ti(){var e=g.Promise;return rr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(g,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function kt(e,t,n,r,o){var u=H;try{return ht(e,!0),t(n,r,o)}finally{ht(u,!1)}}function ni(e,t,n,r){return typeof e!="function"?e:function(){var o=H;n&&qt(),ht(t,!0);try{return e.apply(this,arguments)}finally{ht(o,!1),r&&queueMicrotask(ft)}}}function lr(e){Promise===rn&&Se.echoes===0?Cn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Le).indexOf("[native code]")===-1&&(qt=ft=ge);var xe=V.reject,Ot=String.fromCharCode(65535),it="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ri="String expected.",$t=[],Tn="__dbnames",fr="readonly",hr="readwrite";function Et(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ii={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=ve(t))[e],t}}function oi(){throw X.Type()}function ce(e,t){try{var n=ai(e),r=ai(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(o,u){for(var l=o.length,f=u.length,v=l<f?l:f,m=0;m<v;++m)if(o[m]!==u[m])return o[m]<u[m]?-1:1;return l===f?0:l<f?-1:1}(ui(e),ui(t));case"Array":return function(o,u){for(var l=o.length,f=u.length,v=l<f?l:f,m=0;m<v;++m){var O=ce(o[m],u[m]);if(O!==0)return O}return l===f?0:l<f?-1:1}(e,t)}}catch{}return NaN}function ai(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Tt(e),e==="ArrayBuffer"?"binary":e)}function ui(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var si=(ke.prototype._trans=function(e,t,n){var r=this._tx||H.trans,o=this.name,u=Je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function l(m,O,d){if(!d.schema[o])throw new X.NotFound("Table "+o+" not part of transaction");return t(d.idbtrans,d)}var f=Bt();try{var v=r&&r.db._novip===this.db._novip?r===H.trans?r._promise(e,l,n):lt(function(){return r._promise(e,l,n)},{trans:r,transless:H.transless||H}):function m(O,d,E,y){if(O.idbdb&&(O._state.openComplete||H.letThrough||O._vip)){var _=O._createTransaction(d,E,O._dbSchema);try{_.create(),O._state.PR1398_maxLoop=3}catch(x){return x.name===tr.InvalidState&&O.isOpen()&&0<--O._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),O.close({disableAutoOpen:!1}),O.open().then(function(){return m(O,d,E,y)})):xe(x)}return _._promise(d,function(x,b){return lt(function(){return H.trans=_,y(x,b,_)})}).then(function(x){if(d==="readwrite")try{_.idbtrans.commit()}catch{}return d==="readonly"?x:_._completion.then(function(){return x})})}if(O._state.openComplete)return xe(new X.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return xe(new X.DatabaseClosed);O.open().catch(ge)}return O._state.dbReadyPromise.then(function(){return m(O,d,E,y)})}(this.db,e,[this.name],l);return u&&(v._consoleTask=u,v=v.catch(function(m){return console.trace(m),xe(m)})),v}finally{f&&Rt()}},ke.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?xe(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(o){return n.hook.reading.fire(o)})}).then(t)},ke.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=w(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(O){return 0<=v.keyPath.indexOf(O)})){for(var m=0;m<t.length;++m)if(t.indexOf(v.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(v,m){return v.keyPath.length-m.keyPath.length})[0];if(n&&this.db._maxKey!==Ot){var l=n.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(m){return e[m]}))}!n&&Je&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName,o=this.db._deps.indexedDB;function u(v,m){return o.cmp(v,m)===0}var f=t.reduce(function(E,m){var O=E[0],d=E[1],E=r[m],y=e[m];return[O||E,O||!E?Et(d,E&&E.multi?function(_){return _=z(_,m),h(_)&&_.some(function(x){return u(y,x)})}:function(_){return u(y,z(_,m))}):d]},[null,null]),l=f[0],f=f[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},ke.prototype.filter=function(e){return this.toCollection().and(e)},ke.prototype.count=function(e){return this.toCollection().count(e)},ke.prototype.offset=function(e){return this.toCollection().offset(e)},ke.prototype.limit=function(e){return this.toCollection().limit(e)},ke.prototype.each=function(e){return this.toCollection().each(e)},ke.prototype.toArray=function(e){return this.toCollection().toArray(e)},ke.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ke.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},ke.prototype.reverse=function(){return this.toCollection().reverse()},ke.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function o(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof oi&&(function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function O(){this.constructor=v}s(v,m),v.prototype=m===null?Object.create(m):(O.prototype=m.prototype,new O)}(o,t=e),Object.defineProperty(o.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),o.prototype.table=function(){return r},e=o);for(var u=new Set,l=e.prototype;l;l=C(l))Object.getOwnPropertyNames(l).forEach(function(v){return u.add(v)});function f(v){if(!v)return v;var m,O=Object.create(e.prototype);for(m in v)if(!u.has(m))try{O[m]=v[m]}catch{}return O}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),e},ke.prototype.defineClass=function(){return this.mapToClass(function(e){k(this,e)})},ke.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,u=r.keyPath,l=e;return u&&o&&(l=Dn(u)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"add",keys:t!=null?[t]:null,values:[l]})}).then(function(f){return f.numFailures?V.reject(f.failures[0]):f.lastResult}).then(function(f){if(u)try{W(e,u,f)}catch{}return f})},ke.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=z(e,this.schema.primKey.keyPath),e===void 0?xe(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},ke.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,u=r.keyPath,l=e;return u&&o&&(l=Dn(u)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"put",values:[l],keys:t!=null?[t]:null})}).then(function(f){return f.numFailures?V.reject(f.failures[0]):f.lastResult}).then(function(f){if(u)try{W(e,u,f)}catch{}return f})},ke.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?V.reject(n.failures[0]):void 0})},ke.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ii})}).then(function(t){return t.numFailures?V.reject(t.failures[0]):void 0})},ke.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(o){return t.hook.reading.fire(o)})})})},ke.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,u=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(l){var m=r.schema.primKey,f=m.auto,m=m.keyPath;if(m&&o)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,m=m&&f?e.map(Dn(m)):e;return r.core.mutate({trans:l,type:"add",keys:o,values:m,wantResults:u}).then(function(_){var d=_.numFailures,E=_.results,y=_.lastResult,_=_.failures;if(d===0)return u?E:y;throw new It("".concat(r.name,".bulkAdd(): ").concat(d," of ").concat(v," operations failed"),_)})})},ke.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,u=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(l){var m=r.schema.primKey,f=m.auto,m=m.keyPath;if(m&&o)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,m=m&&f?e.map(Dn(m)):e;return r.core.mutate({trans:l,type:"put",keys:o,values:m,wantResults:u}).then(function(_){var d=_.numFailures,E=_.results,y=_.lastResult,_=_.failures;if(d===0)return u?E:y;throw new It("".concat(r.name,".bulkPut(): ").concat(d," of ").concat(v," operations failed"),_)})})},ke.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(l){return l.key}),o=e.map(function(l){return l.changes}),u=[];return this._trans("readwrite",function(l){return n.getMany({trans:l,keys:r,cache:"clone"}).then(function(f){var v=[],m=[];e.forEach(function(d,E){var y=d.key,_=d.changes,x=f[E];if(x){for(var b=0,A=Object.keys(_);b<A.length;b++){var P=A[b],S=_[P];if(P===t.schema.primKey.keyPath){if(ce(S,y)!==0)throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else W(x,P,S)}u.push(E),v.push(y),m.push(x)}});var O=v.length;return n.mutate({trans:l,type:"put",keys:v,values:m,updates:{keys:r,changeSpecs:o}}).then(function(d){var E=d.numFailures,y=d.failures;if(E===0)return O;for(var _=0,x=Object.keys(y);_<x.length;_++){var b,A=x[_],P=u[Number(A)];P!=null&&(b=y[A],delete y[A],y[P]=b)}throw new It("".concat(t.name,".bulkUpdate(): ").concat(E," of ").concat(O," operations failed"),y)})})})},ke.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(l){var o=l.numFailures,u=l.lastResult,l=l.failures;if(o===0)return u;throw new It("".concat(t.name,".bulkDelete(): ").concat(o," of ").concat(n," operations failed"),l)})},ke);function ke(){}function un(e){function t(l,f){if(f){for(var v=arguments.length,m=new Array(v-1);--v;)m[v-1]=arguments[v];return n[l].subscribe.apply(null,m),e}if(typeof l=="string")return n[l]}var n={};t.addEventType=u;for(var r=1,o=arguments.length;r<o;++r)u(arguments[r]);return t;function u(l,f,v){if(typeof l!="object"){var m;f=f||So;var O={subscribers:[],fire:v=v||ge,subscribe:function(d){O.subscribers.indexOf(d)===-1&&(O.subscribers.push(d),O.fire=f(O.fire,d))},unsubscribe:function(d){O.subscribers=O.subscribers.filter(function(E){return E!==d}),O.fire=O.subscribers.reduce(f,v)}};return n[l]=t[l]=O}w(m=l).forEach(function(d){var E=m[d];if(h(E))u(d,m[d][0],m[d][1]);else{if(E!=="asap")throw new X.InvalidArgument("Invalid event config");var y=u(d,en,function(){for(var _=arguments.length,x=new Array(_);_--;)x[_]=arguments[_];y.subscribers.forEach(function(b){ye(function(){b.apply(null,x)})})})}})}}function sn(e,t){return N(t).from({prototype:e}),t}function Nt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function dr(e,t){e.filter=Et(e.filter,t)}function pr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Et(r(),t())}:t,e.justLimit=n&&!r}function In(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ci(e,t,n){var r=In(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Bn(e,t,n,r){var o=e.replayFilter?Et(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},l=function(f,v,m){var O,d;o&&!o(v,m,function(E){return v.stop(E)},function(E){return v.fail(E)})||((d=""+(O=v.primaryKey))=="[object ArrayBuffer]"&&(d=""+new Uint8Array(O)),I(u,d)||(u[d]=!0,t(f,v,m)))};return Promise.all([e.or._iterate(l,n),li(ci(e,r,n),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}return li(ci(e,r,n),Et(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function li(e,t,n,r){var o=Ee(r?function(u,l,f){return n(r(u),l,f)}:n);return e.then(function(u){if(u)return u.start(function(){var l=function(){return u.continue()};t&&!t(u,function(f){return l=f},function(f){u.stop(f),l=ge},function(f){u.fail(f),l=ge})||o(u.value,u,function(f){return l=f}),l()})})}var ot=Symbol(),cn=(fi.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(h(t))return p(p([],h(e)?e:[],!0),t,!0).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var n=this.remove;if(h(n))return h(e)?e.filter(function(r){return!n.includes(r)}).sort():[];if(typeof n=="number")return Number(e)-n;if(typeof n=="bigint")try{return BigInt(e)-n}catch{return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},fi);function fi(e){Object.assign(this,e)}var Io=(fe.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,xe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},fe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},fe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Et(t.algorithm,e)},fe.prototype._iterate=function(e,t){return Bn(this._ctx,e,t,this._ctx.table.core)},fe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&k(n,e),t._ctx=n,t},fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},fe.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Bn(t,e,n,t.table.core)})},fe.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,o=r.table.core;if(Nt(r,!0))return o.count({trans:n,query:{index:In(r,o.schema),range:r.range}}).then(function(l){return Math.min(l,r.limit)});var u=0;return Bn(r,function(){return++u,!1},n,o).then(function(){return u})}).then(e)},fe.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function u(v,m){return m?u(v[n[m]],m-1):v[r]}var l=this._ctx.dir==="next"?1:-1;function f(v,m){return v=u(v,o),m=u(m,o),v<m?-l:m<v?l:0}return this.toArray(function(v){return v.sort(f)}).then(t)},fe.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&Nt(r,!0)&&0<r.limit){var o=r.valueMapper,u=In(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:u,range:r.range}}).then(function(f){return f=f.result,o?f.map(o):f})}var l=[];return Bn(r,function(f){return l.push(f)},n,r.table.core).then(function(){return l})},e)},fe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Nt(t)?pr(t,function(){var n=e;return function(r,o){return n===0||(n===1?--n:o(function(){r.advance(n),n=0}),!1)}}):pr(t,function(){var n=e;return function(){return--n<0}})),this},fe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),pr(this._ctx,function(){var t=e;return function(n,r,o){return--t<=0&&r(o),0<=t}},!0),this},fe.prototype.until=function(e,t){return dr(this._ctx,function(n,r,o){return!e(n.value)||(r(o),t)}),this},fe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},fe.prototype.last=function(e){return this.reverse().first(e)},fe.prototype.filter=function(e){var t;return dr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Et(t.isMatch,e),this},fe.prototype.and=function(e){return this.filter(e)},fe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},fe.prototype.desc=function(){return this.reverse()},fe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},fe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},fe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},fe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,o){n.push(o.key)}).then(function(){return n}).then(e)},fe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Nt(t,!0)&&0<t.limit)return this._read(function(r){var o=In(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:o,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,o){n.push(o.primaryKey)}).then(function(){return n}).then(e)},fe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},fe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},fe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},fe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return dr(this._ctx,function(o){var r=o.primaryKey.toString(),o=I(t,r);return t[r]=!0,!o}),this},fe.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o,u,l;l=typeof e=="function"?e:(o=w(e),u=o.length,function(b){for(var A=!1,P=0;P<u;++P){var S=o[P],j=e[S],q=z(b,S);j instanceof cn?(W(b,S,j.execute(q)),A=!0):q!==j&&(W(b,S,j),A=!0)}return A});function f(b,S){var P=S.failures,S=S.numFailures;_+=b-S;for(var j=0,q=w(P);j<q.length;j++){var L=q[j];y.push(P[L])}}var v=n.table.core,m=v.schema.primaryKey,O=m.outbound,d=m.extractKey,E=t.db._options.modifyChunkSize||200,y=[],_=0,x=[];return t.clone().primaryKeys().then(function(b){function A(S){var j=Math.min(E,b.length-S);return v.getMany({trans:r,keys:b.slice(S,S+j),cache:"immutable"}).then(function(q){for(var L=[],$=[],F=O?[]:null,U=[],R=0;R<j;++R){var J=q[R],Z={value:ve(J),primKey:b[S+R]};l.call(Z,Z.value,Z)!==!1&&(Z.value==null?U.push(b[S+R]):O||ce(d(J),d(Z.value))===0?($.push(Z.value),O&&F.push(b[S+R])):(U.push(b[S+R]),L.push(Z.value)))}return Promise.resolve(0<L.length&&v.mutate({trans:r,type:"add",values:L}).then(function(ie){for(var ne in ie.failures)U.splice(parseInt(ne),1);f(L.length,ie)})).then(function(){return(0<$.length||P&&typeof e=="object")&&v.mutate({trans:r,type:"put",keys:F,values:$,criteria:P,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<S}).then(function(ie){return f($.length,ie)})}).then(function(){return(0<U.length||P&&e===mr)&&v.mutate({trans:r,type:"delete",keys:U,criteria:P,isAdditionalChunk:0<S}).then(function(ie){return f(U.length,ie)})}).then(function(){return b.length>S+j&&A(S+E)})})}var P=Nt(n)&&n.limit===1/0&&(typeof e!="function"||e===mr)&&{index:n.index,range:n.range};return A(0).then(function(){if(0<y.length)throw new kn("Error modifying one or more objects",y,_,x);return b.length})})})},fe.prototype.delete=function(){var e=this._ctx,t=e.range;return Nt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(function(u){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(l){var f=l.failures;if(l.lastResult,l.results,l=l.numFailures,l)throw new kn("Could not delete some values",Object.keys(f).map(function(v){return f[v]}),u-l);return u-l})})}):this.modify(mr)},fe);function fe(){}var mr=function(e,t){return t.value=null};function Bo(e,t){return e<t?-1:e===t?0:1}function Ro(e,t){return t<e?-1:e===t?0:1}function qe(e,t,n){return e=e instanceof di?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function Ft(e){return new e.Collection(e,function(){return hi("")}).limit(0)}function Rn(e,t,n,r){var o,u,l,f,v,m,O,d=n.length;if(!n.every(function(_){return typeof _=="string"}))return qe(e,ri);function E(_){o=_==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},u=_==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},l=_==="next"?Bo:Ro;var x=n.map(function(b){return{lower:u(b),upper:o(b)}}).sort(function(b,A){return l(b.lower,A.lower)});f=x.map(function(b){return b.upper}),v=x.map(function(b){return b.lower}),O=(m=_)==="next"?"":r}E("next"),e=new e.Collection(e,function(){return dt(f[0],v[d-1]+r)}),e._ondirectionchange=function(_){E(_)};var y=0;return e._addAlgorithm(function(_,x,b){var A=_.key;if(typeof A!="string")return!1;var P=u(A);if(t(P,v,y))return!0;for(var S=null,j=y;j<d;++j){var q=function(L,$,F,U,R,J){for(var Z=Math.min(L.length,U.length),ie=-1,ne=0;ne<Z;++ne){var He=$[ne];if(He!==U[ne])return R(L[ne],F[ne])<0?L.substr(0,ne)+F[ne]+F.substr(ne+1):R(L[ne],U[ne])<0?L.substr(0,ne)+U[ne]+F.substr(ne+1):0<=ie?L.substr(0,ie)+$[ie]+F.substr(ie+1):null;R(L[ne],He)<0&&(ie=ne)}return Z<U.length&&J==="next"?L+F.substr(L.length):Z<L.length&&J==="prev"?L.substr(0,F.length):ie<0?null:L.substr(0,ie)+U[ie]+F.substr(ie+1)}(A,P,f[j],v[j],l,m);q===null&&S===null?y=j+1:(S===null||0<l(S,q))&&(S=q)}return x(S!==null?function(){_.continue(S+O)}:b),!1}),e}function dt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function hi(e){return{type:1,lower:e,upper:e}}var di=(Object.defineProperty(Ce.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ce.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?Ft(this):new this.Collection(this,function(){return dt(e,t,!n,!r)})}catch{return qe(this,it)}},Ce.prototype.equals=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return hi(e)})},Ce.prototype.above=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(e,void 0,!0)})},Ce.prototype.aboveOrEqual=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(e,void 0,!1)})},Ce.prototype.below=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(void 0,e,!1,!0)})},Ce.prototype.belowOrEqual=function(e){return e==null?qe(this,it):new this.Collection(this,function(){return dt(void 0,e)})},Ce.prototype.startsWith=function(e){return typeof e!="string"?qe(this,ri):this.between(e,e+Ot,!0,!0)},Ce.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Rn(this,function(t,n){return t.indexOf(n[0])===0},[e],Ot)},Ce.prototype.equalsIgnoreCase=function(e){return Rn(this,function(t,n){return t===n[0]},[e],"")},Ce.prototype.anyOfIgnoreCase=function(){var e=Me.apply(Ie,arguments);return e.length===0?Ft(this):Rn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},Ce.prototype.startsWithAnyOfIgnoreCase=function(){var e=Me.apply(Ie,arguments);return e.length===0?Ft(this):Rn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,Ot)},Ce.prototype.anyOf=function(){var e=this,t=Me.apply(Ie,arguments),n=this._cmp;try{t.sort(n)}catch{return qe(this,it)}if(t.length===0)return Ft(this);var r=new this.Collection(this,function(){return dt(t[0],t[t.length-1])});r._ondirectionchange=function(u){n=u==="next"?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm(function(u,l,f){for(var v=u.key;0<n(v,t[o]);)if(++o===t.length)return l(f),!1;return n(v,t[o])===0||(l(function(){u.continue(t[o])}),!1)}),r},Ce.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ce.prototype.noneOf=function(){var e=Me.apply(Ie,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return qe(this,it)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ce.prototype.inAnyRange=function(A,t){var n=this,r=this._cmp,o=this._ascending,u=this._descending,l=this._min,f=this._max;if(A.length===0)return Ft(this);if(!A.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&o(P[0],P[1])<=0}))return qe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var v=!t||t.includeLowers!==!1,m=t&&t.includeUppers===!0,O,d=o;function E(P,S){return d(P[0],S[0])}try{(O=A.reduce(function(P,S){for(var j=0,q=P.length;j<q;++j){var L=P[j];if(r(S[0],L[1])<0&&0<r(S[1],L[0])){L[0]=l(L[0],S[0]),L[1]=f(L[1],S[1]);break}}return j===q&&P.push(S),P},[])).sort(E)}catch{return qe(this,it)}var y=0,_=m?function(P){return 0<o(P,O[y][1])}:function(P){return 0<=o(P,O[y][1])},x=v?function(P){return 0<u(P,O[y][0])}:function(P){return 0<=u(P,O[y][0])},b=_,A=new this.Collection(this,function(){return dt(O[0][0],O[O.length-1][1],!v,!m)});return A._ondirectionchange=function(P){d=P==="next"?(b=_,o):(b=x,u),O.sort(E)},A._addAlgorithm(function(P,S,j){for(var q,L=P.key;b(L);)if(++y===O.length)return S(j),!1;return!_(q=L)&&!x(q)||(n._cmp(L,O[y][1])===0||n._cmp(L,O[y][0])===0||S(function(){d===o?P.continue(O[y][0]):P.continue(O[y][1])}),!1)}),A},Ce.prototype.startsWithAnyOf=function(){var e=Me.apply(Ie,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Ft(this):this.inAnyRange(e.map(function(t){return[t,t+Ot]})):qe(this,"startsWithAnyOf() only works with strings")},Ce);function Ce(){}function Ze(e){return Ee(function(t){return ln(t),e(t.target.error),!1})}function ln(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",yr="x-storagemutated-1",pt=un(null,fn),qo=(et.prototype._lock=function(){return ue(!H.global),++this._reculock,this._reculock!==1||H.global||(H.lockOwnerFor=this),this},et.prototype._unlock=function(){if(ue(!H.global),--this._reculock==0)for(H.global||(H.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{kt(e[1],e[0])}catch{}}return this},et.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this},et.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(ue(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new X.DatabaseClosed(r);case"MissingAPIError":throw new X.MissingAPI(r.message,r);default:throw new X.OpenFailed(r)}if(!this.active)throw new X.TransactionInactive;return ue(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ee(function(o){ln(o),t._reject(e.error)}),e.onabort=Ee(function(o){ln(o),t.active&&t._reject(new X.Abort(e.error)),t.active=!1,t.on("abort").fire(o)}),e.oncomplete=Ee(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&pt.storagemutated.fire(e.mutatedParts)}),this},et.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return xe(new X.ReadOnly("Transaction is readonly"));if(!this.active)return xe(new X.TransactionInactive);if(this._locked())return new V(function(u,l){r._blockedFuncs.push([function(){r._promise(e,t,n).then(u,l)},H])});if(n)return lt(function(){var u=new V(function(l,f){r._lock();var v=t(l,f,r);v&&v.then&&v.then(l,f)});return u.finally(function(){return r._unlock()}),u._lib=!0,u});var o=new V(function(u,l){var f=t(u,l,r);f&&f.then&&f.then(u,l)});return o._lib=!0,o},et.prototype._root=function(){return this.parent?this.parent._root():this},et.prototype.waitFor=function(e){var t,n=this._root(),r=V.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=u)}());var o=n._waitingFor;return new V(function(u,l){r.then(function(f){return n._waitingQueue.push(Ee(u.bind(null,f)))},function(f){return n._waitingQueue.push(Ee(l.bind(null,f)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},et.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},et.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(I(t,e))return t[e];var n=this.schema[e];if(!n)throw new X.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},et);function et(){}function vr(e,t,n,r,o,u,l){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:u,src:(n&&!l?"&":"")+(r?"*":"")+(o?"++":"")+pi(t)}}function pi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function gr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(o){return[o.name,o]},n.reduce(function(o,u,l){return l=r(u,l),l&&(o[l[0]]=l[1]),o},{}))};var r}var hn=function(e){try{return e.only([[]]),hn=function(){return[[]]},[[]]}catch{return hn=function(){return Ot},Ot}};function br(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return z(n,t)}:function(n){return z(n,e)};var t}function mi(e){return[].slice.call(e)}var $o=0;function dn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function No(e,t,v){function r(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=b.lower,_=b.upper,x=b.lowerOpen,b=b.upperOpen;return y===void 0?_===void 0?null:t.upperBound(_,!!b):_===void 0?t.lowerBound(y,!!x):t.bound(y,_,!!x,!!b)}function o(E){var y,_=E.name;return{name:_,schema:E,mutate:function(x){var b=x.trans,A=x.type,P=x.keys,S=x.values,j=x.range;return new Promise(function(q,L){q=Ee(q);var $=b.objectStore(_),F=$.keyPath==null,U=A==="put"||A==="add";if(!U&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var R,J=(P||S||{length:1}).length;if(P&&S&&P.length!==S.length)throw new Error("Given keys array must have same length as given values array.");if(J===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});function Z(Re){++He,ln(Re)}var ie=[],ne=[],He=0;if(A==="deleteRange"){if(j.type===4)return q({numFailures:He,failures:ne,results:[],lastResult:void 0});j.type===3?ie.push(R=$.clear()):ie.push(R=$.delete(r(j)))}else{var F=U?F?[S,P]:[S,null]:[P,null],re=F[0],Ke=F[1];if(U)for(var Te=0;Te<J;++Te)ie.push(R=Ke&&Ke[Te]!==void 0?$[A](re[Te],Ke[Te]):$[A](re[Te])),R.onerror=Z;else for(Te=0;Te<J;++Te)ie.push(R=$[A](re[Te])),R.onerror=Z}function Gn(Re){Re=Re.target.result,ie.forEach(function(Pt,qr){return Pt.error!=null&&(ne[qr]=Pt.error)}),q({numFailures:He,failures:ne,results:A==="delete"?P:ie.map(function(Pt){return Pt.result}),lastResult:Re})}R.onerror=function(Re){Z(Re),Gn(Re)},R.onsuccess=Gn})},getMany:function(x){var b=x.trans,A=x.keys;return new Promise(function(P,S){P=Ee(P);for(var j,q=b.objectStore(_),L=A.length,$=new Array(L),F=0,U=0,R=function(ie){ie=ie.target,$[ie._pos]=ie.result,++U===F&&P($)},J=Ze(S),Z=0;Z<L;++Z)A[Z]!=null&&((j=q.get(A[Z]))._pos=Z,j.onsuccess=R,j.onerror=J,++F);F===0&&P($)})},get:function(x){var b=x.trans,A=x.key;return new Promise(function(P,S){P=Ee(P);var j=b.objectStore(_).get(A);j.onsuccess=function(q){return P(q.target.result)},j.onerror=Ze(S)})},query:(y=m,function(x){return new Promise(function(b,A){b=Ee(b);var P,S,j,F=x.trans,q=x.values,L=x.limit,R=x.query,$=L===1/0?void 0:L,U=R.index,R=R.range,F=F.objectStore(_),U=U.isPrimaryKey?F:F.index(U.name),R=r(R);if(L===0)return b({result:[]});y?(($=q?U.getAll(R,$):U.getAllKeys(R,$)).onsuccess=function(J){return b({result:J.target.result})},$.onerror=Ze(A)):(P=0,S=!q&&"openKeyCursor"in U?U.openKeyCursor(R):U.openCursor(R),j=[],S.onsuccess=function(J){var Z=S.result;return Z?(j.push(q?Z.value:Z.primaryKey),++P===L?b({result:j}):void Z.continue()):b({result:j})},S.onerror=Ze(A))})}),openCursor:function(x){var b=x.trans,A=x.values,P=x.query,S=x.reverse,j=x.unique;return new Promise(function(q,L){q=Ee(q);var U=P.index,$=P.range,F=b.objectStore(_),F=U.isPrimaryKey?F:F.index(U.name),U=S?j?"prevunique":"prev":j?"nextunique":"next",R=!A&&"openKeyCursor"in F?F.openKeyCursor(r($),U):F.openCursor(r($),U);R.onerror=Ze(L),R.onsuccess=Ee(function(J){var Z,ie,ne,He,re=R.result;re?(re.___id=++$o,re.done=!1,Z=re.continue.bind(re),ie=(ie=re.continuePrimaryKey)&&ie.bind(re),ne=re.advance.bind(re),He=function(){throw new Error("Cursor not stopped")},re.trans=b,re.stop=re.continue=re.continuePrimaryKey=re.advance=function(){throw new Error("Cursor not started")},re.fail=Ee(L),re.next=function(){var Ke=this,Te=1;return this.start(function(){return Te--?Ke.continue():Ke.stop()}).then(function(){return Ke})},re.start=function(Ke){function Te(){if(R.result)try{Ke()}catch(Re){re.fail(Re)}else re.done=!0,re.start=function(){throw new Error("Cursor behind last entry")},re.stop()}var Gn=new Promise(function(Re,Pt){Re=Ee(Re),R.onerror=Ze(Pt),re.fail=Pt,re.stop=function(qr){re.stop=re.continue=re.continuePrimaryKey=re.advance=He,Re(qr)}});return R.onsuccess=Ee(function(Re){R.onsuccess=Te,Te()}),re.continue=Z,re.continuePrimaryKey=ie,re.advance=ne,Te(),Gn},q(re)):q(null)},L)})},count:function(x){var b=x.query,A=x.trans,P=b.index,S=b.range;return new Promise(function(j,q){var L=A.objectStore(_),$=P.isPrimaryKey?L:L.index(P.name),L=r(S),$=L?$.count(L):$.count();$.onsuccess=Ee(function(F){return j(F.target.result)}),$.onerror=Ze(q)})}}}var u,l,f,O=(l=v,f=mi((u=e).objectStoreNames),{schema:{name:u.name,tables:f.map(function(E){return l.objectStore(E)}).map(function(E){var y=E.keyPath,b=E.autoIncrement,_=h(y),x={},b={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:_,keyPath:y,autoIncrement:b,unique:!0,extractKey:br(y)},indexes:mi(E.indexNames).map(function(A){return E.index(A)}).map(function(j){var P=j.name,S=j.unique,q=j.multiEntry,j=j.keyPath,q={name:P,compound:h(j),keyPath:j,unique:S,multiEntry:q,extractKey:br(j)};return x[dn(j)]=q}),getIndexByKeyPath:function(A){return x[dn(A)]}};return x[":id"]=b.primaryKey,y!=null&&(x[dn(y)]=b.primaryKey),b})},hasGetAll:0<f.length&&"getAll"in l.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),v=O.schema,m=O.hasGetAll,O=v.tables.map(o),d={};return O.forEach(function(E){return d[E.name]=E}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(E){if(!d[E])throw new Error("Table '".concat(E,"' not found"));return d[E]},MIN_KEY:-1/0,MAX_KEY:hn(t),schema:v}}function Fo(e,t,n,r){var o=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=No(t,o,r),e.dbcore.reduce(function(u,l){return l=l.create,c(c({},u),l(u))},r))}}function qn(e,r){var n=r.db,r=Fo(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(o){var u=o.name;e.core.schema.tables.some(function(l){return l.name===u})&&(o.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=o.core))})}function $n(e,t,n,r){n.forEach(function(o){var u=r[o];t.forEach(function(l){var f=function v(m,O){return M(m,O)||(m=C(m))&&v(m,O)}(l,o);(!f||"value"in f&&f.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?D(l,o,{get:function(){return this.table(o)},set:function(v){K(this,o,{value:v,writable:!0,configurable:!0,enumerable:!0})}}):l[o]=new e.Table(o,u))})})}function _r(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Mo(e,t){return e._cfg.version-t._cfg.version}function Lo(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=gr("$meta",vi("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,o);u.create(n),u._completion.catch(r);var l=u._reject.bind(u),f=H.transless||H;lt(function(){return H.trans=u,H.transless=f,t!==0?(qn(e,n),m=t,((v=u).storeNames.includes("$meta")?v.table("$meta").get("version").then(function(O){return O??m}):V.resolve(m)).then(function(O){return E=O,y=u,_=n,x=[],O=(d=e)._versions,b=d._dbSchema=Fn(0,d.idbdb,_),(O=O.filter(function(A){return A._cfg.version>=E})).length!==0?(O.forEach(function(A){x.push(function(){var P=b,S=A._cfg.dbschema;Mn(d,P,_),Mn(d,S,_),b=d._dbSchema=S;var j=wr(P,S);j.add.forEach(function(U){kr(_,U[0],U[1].primKey,U[1].indexes)}),j.change.forEach(function(U){if(U.recreate)throw new X.Upgrade("Not yet support for changing primary key");var R=_.objectStore(U.name);U.add.forEach(function(J){return Nn(R,J)}),U.change.forEach(function(J){R.deleteIndex(J.name),Nn(R,J)}),U.del.forEach(function(J){return R.deleteIndex(J)})});var q=A._cfg.contentUpgrade;if(q&&A._cfg.version>E){qn(d,_),y._memoizedTables={};var L=de(S);j.del.forEach(function(U){L[U]=P[U]}),_r(d,[d.Transaction.prototype]),$n(d,[d.Transaction.prototype],w(L),L),y.schema=L;var $,F=le(q);return F&&qt(),j=V.follow(function(){var U;($=q(y))&&F&&(U=ft.bind(null,null),$.then(U,U))}),$&&typeof $.then=="function"?V.resolve($):j.then(function(){return $})}}),x.push(function(P){var S,j,q=A._cfg.dbschema;S=q,j=P,[].slice.call(j.db.objectStoreNames).forEach(function(L){return S[L]==null&&j.db.deleteObjectStore(L)}),_r(d,[d.Transaction.prototype]),$n(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),y.schema=d._dbSchema}),x.push(function(P){d.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(d.idbdb.version/10)===A._cfg.version?(d.idbdb.deleteObjectStore("$meta"),delete d._dbSchema.$meta,d._storeNames=d._storeNames.filter(function(S){return S!=="$meta"})):P.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return x.length?V.resolve(x.shift()(y.idbtrans)).then(A):V.resolve()}().then(function(){yi(b,_)})):V.resolve();var d,E,y,_,x,b}).catch(l)):(w(o).forEach(function(O){kr(n,O,o[O].primKey,o[O].indexes)}),qn(e,n),void V.follow(function(){return e.on.populate.fire(u)}).catch(l));var v,m})}function Uo(e,t){yi(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Fn(0,e.idbdb,t);Mn(e,e._dbSchema,t);for(var r=0,o=wr(n,e._dbSchema).change;r<o.length;r++){var u=function(l){if(l.change.length||l.recreate)return console.warn("Unable to patch indexes of table ".concat(l.name," because it has changes on the type of index or primary key.")),{value:void 0};var f=t.objectStore(l.name);l.add.forEach(function(v){Je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(l.name,".").concat(v.src)),Nn(f,v)})}(o[r]);if(typeof u=="object")return u.value}}function wr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],u=t[n];if(o){var l={name:n,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||o.primKey.auto!==u.primKey.auto)l.recreate=!0,r.change.push(l);else{var f=o.idxByName,v=u.idxByName,m=void 0;for(m in f)v[m]||l.del.push(m);for(m in v){var O=f[m],d=v[m];O?O.src!==d.src&&l.change.push(d):l.add.push(d)}(0<l.del.length||0<l.add.length||0<l.change.length)&&r.change.push(l)}}else r.add.push([n,u])}return r}function kr(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(u){return Nn(o,u)}),o}function yi(e,t){w(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Je&&console.debug("Dexie: Creating missing table",n),kr(t,n,e[n].primKey,e[n].indexes))})}function Nn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Fn(e,t,n){var r={};return oe(t.objectStoreNames,0).forEach(function(o){for(var u=n.objectStore(o),l=vr(pi(m=u.keyPath),m||"",!0,!1,!!u.autoIncrement,m&&typeof m!="string",!0),f=[],v=0;v<u.indexNames.length;++v){var O=u.index(u.indexNames[v]),m=O.keyPath,O=vr(O.name,m,!!O.unique,!!O.multiEntry,!1,m&&typeof m!="string",!1);f.push(O)}r[o]=gr(o,l,f)}),r}function Mn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var u=r[o],l=n.objectStore(u);e._hasGetAll="getAll"in l;for(var f=0;f<l.indexNames.length;++f){var v=l.indexNames[f],m=l.index(v).keyPath,O=typeof m=="string"?m:"["+oe(m).join("+")+"]";!t[u]||(m=t[u].idxByName[O])&&(m.name=v,delete t[u].idxByName[O],t[u].idxByName[v]=m)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&g.WorkerGlobalScope&&g instanceof g.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function vi(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return vr(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(o),n===0)})}var Vo=(Ln.prototype._parseStoresSpec=function(e,t){w(e).forEach(function(n){if(e[n]!==null){var r=vi(e[n]),o=r.shift();if(o.unique=!0,o.multi)throw new X.Schema("Primary key cannot be multi-valued");r.forEach(function(u){if(u.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),t[n]=gr(n,o,r)}})},Ln.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?k(this._cfg.storesSource,n):n;var n=t._versions,r={},o={};return n.forEach(function(u){k(r,u._cfg.storesSource),o=u._cfg.dbschema={},u._parseStoresSpec(r,o)}),t._dbSchema=o,_r(t,[t._allTables,t,t.Transaction.prototype]),$n(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],w(o),o),t._storeNames=w(o),this},Ln.prototype.upgrade=function(e){return this._cfg.contentUpgrade=nr(this._cfg.contentUpgrade||ge,e),this},Ln);function Ln(){}function Or(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new at(Tn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Er(e){return e&&typeof e.databases=="function"}function xr(e){return lt(function(){return H.letThrough=!0,e()})}function Ar(e){return!("from"in e)}var Be=function(e,t){if(!this){var n=new Be;return e&&"d"in e&&k(n,e),n}k(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function pn(e,t,n){var r=ce(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Ar(e))return k(e,{from:t,to:n,d:1});var o=e.l,r=e.r;if(ce(n,e.from)<0)return o?pn(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},bi(e);if(0<ce(t,e.to))return r?pn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},bi(e);ce(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ce(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,o&&!e.l&&mn(e,o),r&&n&&mn(e,r)}}function mn(e,t){Ar(t)||function n(r,v){var u=v.from,l=v.to,f=v.l,v=v.r;pn(r,u,l),f&&n(r,f),v&&n(r,v)}(e,t)}function gi(e,t){var n=Un(t),r=n.next();if(r.done)return!1;for(var o=r.value,u=Un(e),l=u.next(o.from),f=l.value;!r.done&&!l.done;){if(ce(f.from,o.to)<=0&&0<=ce(f.to,o.from))return!0;ce(o.from,f.from)<0?o=(r=n.next(f.from)).value:f=(l=u.next(o.from)).value}return!1}function Un(e){var t=Ar(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ce(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ce(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function bi(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=1<r?"r":r<-1?"l":"";o&&(t=o=="r"?"l":"r",n=c({},e),r=e[o],e.from=r.from,e.to=r.to,e[o]=r[o],n[o]=r[t],(e[t]=n).d=_i(n)),e.d=_i(e)}function _i(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Vn(e,t){return w(t).forEach(function(n){e[n]?mn(e[n],t[n]):e[n]=function r(o){var u,l,f={};for(u in o)I(o,u)&&(l=o[u],f[u]=!l||typeof l!="object"||je.has(l.constructor)?l:r(l));return f}(t[n])}),e}function Pr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&gi(t[n],e[n])})}T(Be.prototype,((Le={add:function(e){return mn(this,e),this},addKey:function(e){return pn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return pn(t,n,n)}),this},hasKey:function(e){var t=Un(this).next(e).value;return t&&ce(t.from,e)<=0&&0<=ce(t.to,e)}})[Fe]=function(){return Un(this)},Le));var xt={},Sr={},Cr=!1;function zn(e){Vn(Sr,e),Cr||(Cr=!0,setTimeout(function(){Cr=!1,jr(Sr,!(Sr={}))},0))}function jr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(xt);r<o.length;r++)wi(l=o[r],e,n,t);else for(var u in e){var l,f=/^idb\:\/\/(.*)\/(.*)\//.exec(u);f&&(u=f[1],f=f[2],(l=xt["idb://".concat(u,"/").concat(f)])&&wi(l,e,n,t))}n.forEach(function(v){return v()})}function wi(e,t,n,r){for(var o=[],u=0,l=Object.entries(e.queries.query);u<l.length;u++){for(var f=l[u],v=f[0],m=[],O=0,d=f[1];O<d.length;O++){var E=d[O];Pr(t,E.obsSet)?E.subscribers.forEach(function(b){return n.add(b)}):r&&m.push(E)}r&&o.push([v,m])}if(r)for(var y=0,_=o;y<_.length;y++){var x=_[y],v=x[0],m=x[1];e.queries.query[v]=m}}function zo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(10*e.verno),u=!1;function l(){if(t.openCanceller!==r)throw new X.DatabaseClosed("db.open() was cancelled")}function f(){return new V(function(E,y){if(l(),!n)throw new X.MissingAPI;var _=e.name,x=t.autoSchema||!o?n.open(_):n.open(_,o);if(!x)throw new X.MissingAPI;x.onerror=Ze(y),x.onblocked=Ee(e._fireOnBlocked),x.onupgradeneeded=Ee(function(b){var A;O=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=ln,O.abort(),x.result.close(),(A=n.deleteDatabase(_)).onsuccess=A.onerror=Ee(function(){y(new X.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(O.onerror=Ze(y),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,d=b<1,e.idbdb=x.result,u&&Uo(e,O),Lo(e,b/10,O,y))},y),x.onsuccess=Ee(function(){O=null;var b,A,P,S,j,q=e.idbdb=x.result,L=oe(q.objectStoreNames);if(0<L.length)try{var $=q.transaction((S=L).length===1?S[0]:S,"readonly");if(t.autoSchema)A=q,P=$,(b=e).verno=A.version/10,P=b._dbSchema=Fn(0,A,P),b._storeNames=oe(A.objectStoreNames,0),$n(b,[b._allTables],w(P),P);else if(Mn(e,e._dbSchema,$),((j=wr(Fn(0,(j=e).idbdb,$),j._dbSchema)).add.length||j.change.some(function(F){return F.add.length||F.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),q.close(),o=q.version+1,u=!0,E(f());qn(e,$)}catch{}$t.push(e),q.onversionchange=Ee(function(F){t.vcFired=!0,e.on("versionchange").fire(F)}),q.onclose=Ee(function(F){e.on("close").fire(F)}),d&&(j=e._deps,$=_,q=j.indexedDB,j=j.IDBKeyRange,Er(q)||$===Tn||Or(q,j).put({name:$}).catch(ge)),E()},y)}).catch(function(E){switch(E?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),f();break;case"VersionError":if(0<o)return o=0,f()}return V.reject(E)})}var v,m=t.dbReadyResolve,O=null,d=!1;return V.race([r,(typeof navigator>"u"?V.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function y(){return indexedDB.databases().finally(E)}v=setInterval(y,100),y()}).finally(function(){return clearInterval(v)}):Promise.resolve()).then(f)]).then(function(){return l(),t.onReadyBeingFired=[],V.resolve(xr(function(){return e.on.ready.fire(e.vip)})).then(function E(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(nr,ge);return t.onReadyBeingFired=[],V.resolve(xr(function(){return y(e.vip)})).then(E)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(E){t.dbOpenError=E;try{O&&O.abort()}catch{}return r===t.openCanceller&&e._close(),xe(E)}).finally(function(){t.openComplete=!0,m()}).then(function(){var E;return d&&(E={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(_){_.name&&(E["idb://".concat(e.name,"/").concat(y.name,"/").concat(_.name)]=new Be(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(y.name,"/")]=E["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new Be(-1/0,[[[]]])}),pt(fn).fire(E),jr(E,!0)),e})}function Kr(e){function t(u){return e.next(u)}var n=o(t),r=o(function(u){return e.throw(u)});function o(u){return function(v){var f=u(v),v=f.value;return f.done?v:v&&typeof v.then=="function"?v.then(n,r):h(v)?Promise.all(v).then(n,r):n(v)}}return o(t)()}function Wn(e,t,n){for(var r=h(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}var Wo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return c(c({},e),{table:function(t){var n=e.table(t),r=n.schema,o={},u=[];function l(d,E,y){var _=dn(d),x=o[_]=o[_]||[],b=d==null?0:typeof d=="string"?1:d.length,A=0<E,A=c(c({},y),{name:A?"".concat(_,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:A,keyTail:E,keyLength:b,extractKey:br(d),unique:!A&&y.unique});return x.push(A),A.isPrimaryKey||u.push(A),1<b&&l(b===2?d[0]:d.slice(0,b-1),E+1,y),x.sort(function(P,S){return P.keyTail-S.keyTail}),A}t=l(r.primaryKey.keyPath,0,r.primaryKey),o[":id"]=[t];for(var f=0,v=r.indexes;f<v.length;f++){var m=v[f];l(m.keyPath,0,m)}function O(d){var E,y=d.query.index;return y.isVirtual?c(c({},d),{query:{index:y.lowLevelIndex,range:(E=d.query.range,y=y.keyTail,{type:E.type===1?2:E.type,lower:Wn(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Wn(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):d}return c(c({},n),{schema:c(c({},r),{primaryKey:t,indexes:u,getIndexByKeyPath:function(d){return(d=o[dn(d)])&&d[0]}}),count:function(d){return n.count(O(d))},query:function(d){return n.query(O(d))},openCursor:function(d){var E=d.query.index,y=E.keyTail,_=E.isVirtual,x=E.keyLength;return _?n.openCursor(O(d)).then(function(A){return A&&b(A)}):n.openCursor(d);function b(A){return Object.create(A,{continue:{value:function(P){P!=null?A.continue(Wn(P,d.reverse?e.MAX_KEY:e.MIN_KEY,y)):d.unique?A.continue(A.key.slice(0,x).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,y)):A.continue()}},continuePrimaryKey:{value:function(P,S){A.continuePrimaryKey(Wn(P,e.MAX_KEY,y),S)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var P=A.key;return x===1?P[0]:P.slice(0,x)}},value:{get:function(){return A.value}}})}}})}})}};function Tr(e,t,n,r){return n=n||{},r=r||"",w(e).forEach(function(o){var u,l,f;I(t,o)?(u=e[o],l=t[o],typeof u=="object"&&typeof l=="object"&&u&&l?(f=Tt(u))!==Tt(l)?n[r+o]=t[o]:f==="Object"?Tr(u,l,n,r+o+"."):u!==l&&(n[r+o]=t[o]):u!==l&&(n[r+o]=t[o])):n[r+o]=void 0}),w(t).forEach(function(o){I(e,o)||(n[r+o]=t[o])}),n}function Dr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Yo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return c(c({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return c(c({},n),{mutate:function(o){var u=H.trans,l=u.table(t).hook,f=l.deleting,v=l.creating,m=l.updating;switch(o.type){case"add":if(v.fire===ge)break;return u._promise("readwrite",function(){return O(o)},!0);case"put":if(v.fire===ge&&m.fire===ge)break;return u._promise("readwrite",function(){return O(o)},!0);case"delete":if(f.fire===ge)break;return u._promise("readwrite",function(){return O(o)},!0);case"deleteRange":if(f.fire===ge)break;return u._promise("readwrite",function(){return function d(E,y,_){return n.query({trans:E,values:!1,query:{index:r,range:y},limit:_}).then(function(x){var b=x.result;return O({type:"delete",keys:b,trans:E}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):b.length<_?{failures:[],numFailures:0,lastResult:void 0}:d(E,c(c({},y),{lower:b[b.length-1],lowerOpen:!0}),_)})})}(o.trans,o.range,1e4)},!0)}return n.mutate(o);function O(d){var E,y,_,x=H.trans,b=d.keys||Dr(r,d);if(!b)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?c(c({},d),{keys:b}):c({},d)).type!=="delete"&&(d.values=p([],d.values,!0)),d.keys&&(d.keys=p([],d.keys,!0)),E=n,_=b,((y=d).type==="add"?Promise.resolve([]):E.getMany({trans:y.trans,keys:_,cache:"immutable"})).then(function(A){var P=b.map(function(S,j){var q,L,$,F=A[j],U={onerror:null,onsuccess:null};return d.type==="delete"?f.fire.call(U,S,F,x):d.type==="add"||F===void 0?(q=v.fire.call(U,S,d.values[j],x),S==null&&q!=null&&(d.keys[j]=S=q,r.outbound||W(d.values[j],r.keyPath,S))):(q=Tr(F,d.values[j]),(L=m.fire.call(U,q,S,F,x))&&($=d.values[j],Object.keys(L).forEach(function(R){I($,R)?$[R]=L[R]:W($,R,L[R])}))),U});return n.mutate(d).then(function(S){for(var j=S.failures,q=S.results,L=S.numFailures,S=S.lastResult,$=0;$<b.length;++$){var F=(q||b)[$],U=P[$];F==null?U.onerror&&U.onerror(j[$]):U.onsuccess&&U.onsuccess(d.type==="put"&&A[$]?d.values[$]:F)}return{failures:j,results:q,numFailures:L,lastResult:S}}).catch(function(S){return P.forEach(function(j){return j.onerror&&j.onerror(S)}),Promise.reject(S)})})}}})}})}};function ki(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,u=0;o<t.keys.length&&u<e.length;++o)ce(t.keys[o],e[u])===0&&(r.push(n?ve(t.values[o]):t.values[o]),++u);return r.length===e.length?r:null}catch{return null}}var Ho={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return c(c({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var o=ki(r.keys,r.trans._cache,r.cache==="clone");return o?V.resolve(o):n.getMany(r).then(function(u){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ve(u):u},u})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Oi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ei(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Go={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Be(e.MIN_KEY,e.MAX_KEY);return c(c({},e),{transaction:function(r,o,u){if(H.subscr&&o!=="readonly")throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(H.querier));return e.transaction(r,o,u)},table:function(r){var o=e.table(r),u=o.schema,l=u.primaryKey,d=u.indexes,f=l.extractKey,v=l.outbound,m=l.autoIncrement&&d.filter(function(y){return y.compound&&y.keyPath.includes(l.keyPath)}),O=c(c({},o),{mutate:function(y){function _(R){return R="idb://".concat(t,"/").concat(r,"/").concat(R),S[R]||(S[R]=new Be)}var x,b,A,P=y.trans,S=y.mutatedParts||(y.mutatedParts={}),j=_(""),q=_(":dels"),L=y.type,U=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[Dr(l,y).filter(function(R){return R}),y.values]:[],$=U[0],F=U[1],U=y.trans._cache;return h($)?(j.addKeys($),(U=L==="delete"||$.length===F.length?ki($,U):null)||q.addKeys($),(U||F)&&(x=_,b=U,A=F,u.indexes.forEach(function(R){var J=x(R.name||"");function Z(ne){return ne!=null?R.extractKey(ne):null}function ie(ne){return R.multiEntry&&h(ne)?ne.forEach(function(He){return J.addKey(He)}):J.addKey(ne)}(b||A).forEach(function(ne,Ke){var re=b&&Z(b[Ke]),Ke=A&&Z(A[Ke]);ce(re,Ke)!==0&&(re!=null&&ie(re),Ke!=null&&ie(Ke))})}))):$?(F={from:$.lower,to:$.upper},q.add(F),j.add(F)):(j.add(n),q.add(n),u.indexes.forEach(function(R){return _(R.name).add(n)})),o.mutate(y).then(function(R){return!$||y.type!=="add"&&y.type!=="put"||(j.addKeys(R.results),m&&m.forEach(function(J){var Z=y.values.map(function(ne){return J.extractKey(ne)}),ie=J.keyPath.findIndex(function(ne){return ne===l.keyPath});R.results.forEach(function(ne){return Z[ie]=ne}),_(J.name).addKeys(Z)})),P.mutatedParts=Vn(P.mutatedParts||{},S),R})}}),d=function(_){var x=_.query,_=x.index,x=x.range;return[_,new Be((_=x.lower)!==null&&_!==void 0?_:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},E={get:function(y){return[l,new Be(y.key)]},getMany:function(y){return[l,new Be().addKeys(y.keys)]},count:d,query:d,openCursor:d};return w(E).forEach(function(y){O[y]=function(_){var x=H.subscr,b=!!x,A=Oi(H,o)&&Ei(y,_)?_.obsSet={}:x;if(b){var P=function(F){return F="idb://".concat(t,"/").concat(r,"/").concat(F),A[F]||(A[F]=new Be)},S=P(""),j=P(":dels"),x=E[y](_),b=x[0],x=x[1];if((y==="query"&&b.isPrimaryKey&&!_.values?j:P(b.name||"")).add(x),!b.isPrimaryKey){if(y!=="count"){var q=y==="query"&&v&&_.values&&o.query(c(c({},_),{values:!1}));return o[y].apply(this,arguments).then(function(F){if(y==="query"){if(v&&_.values)return q.then(function(Z){return Z=Z.result,S.addKeys(Z),F});var U=_.values?F.result.map(f):F.result;(_.values?S:j).addKeys(U)}else if(y==="openCursor"){var R=F,J=_.values;return R&&Object.create(R,{key:{get:function(){return j.addKey(R.primaryKey),R.key}},primaryKey:{get:function(){var Z=R.primaryKey;return j.addKey(Z),Z}},value:{get:function(){return J&&S.addKey(R.primaryKey),R.value}}})}return F})}j.add(n)}}return o[y].apply(this,arguments)}}),O}})}};function xi(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=c({},t),h(t.keys)&&(t.keys=t.keys.filter(function(o,u){return!(u in n.failures)})),"values"in t&&h(t.values)&&(t.values=t.values.filter(function(o,u){return!(u in n.failures)})),t)}function Ir(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<ce(n,r.lower):0<=ce(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?ce(e,t.upper)<0:ce(e,t.upper)<=0));var n,r}function Ai(e,t,E,r,o,u){if(!E||E.length===0)return e;var l=t.query.index,f=l.multiEntry,v=t.query.range,m=r.schema.primaryKey.extractKey,O=l.extractKey,d=(l.lowLevelIndex||l).extractKey,E=E.reduce(function(y,_){var x=y,b=[];if(_.type==="add"||_.type==="put")for(var A=new Be,P=_.values.length-1;0<=P;--P){var S,j=_.values[P],q=m(j);A.hasKey(q)||(S=O(j),(f&&h(S)?S.some(function(U){return Ir(U,v)}):Ir(S,v))&&(A.addKey(q),b.push(j)))}switch(_.type){case"add":x=y.concat(t.values?b:b.map(function(R){return m(R)}));break;case"put":var L=new Be().addKeys(_.values.map(function(R){return m(R)})),x=y.filter(function(R){return!L.hasKey(t.values?m(R):R)}).concat(t.values?b:b.map(function(R){return m(R)}));break;case"delete":var $=new Be().addKeys(_.keys);x=y.filter(function(R){return!$.hasKey(t.values?m(R):R)});break;case"deleteRange":var F=_.range;x=y.filter(function(R){return!Ir(m(R),F)})}return x},e);return E===e?e:(E.sort(function(y,_){return ce(d(y),d(_))||ce(m(y),m(_))}),t.limit&&t.limit<1/0&&(E.length>t.limit?E.length=t.limit:e.length===t.limit&&E.length<t.limit&&(o.dirty=!0)),u?Object.freeze(E):E)}function Pi(e,t){return ce(e.lower,t.lower)===0&&ce(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Qo(e,t){return function(n,r,o,u){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=ce(n,r))===0){if(o&&u)return 0;if(o)return 1;if(u)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,o,u){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=ce(n,r))===0){if(o&&u)return 0;if(o)return-1;if(u)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xo(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var o,u;e.subscribers.delete(n),e.subscribers.size===0&&(o=e,u=t,setTimeout(function(){o.subscribers.size===0&&Qe(u,o)},3e3))})}var Jo={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return c(c({},e),{transaction:function(n,r,o){var u,l,f=e.transaction(n,r,o);return r==="readwrite"&&(l=(u=new AbortController).signal,o=function(v){return function(){if(u.abort(),r==="readwrite"){for(var m=new Set,O=0,d=n;O<d.length;O++){var E=d[O],y=xt["idb://".concat(t,"/").concat(E)];if(y){var _=e.table(E),x=y.optimisticOps.filter(function(J){return J.trans===f});if(f._explicit&&v&&f.mutatedParts)for(var b=0,A=Object.values(y.queries.query);b<A.length;b++)for(var P=0,S=(L=A[b]).slice();P<S.length;P++)Pr(($=S[P]).obsSet,f.mutatedParts)&&(Qe(L,$),$.subscribers.forEach(function(J){return m.add(J)}));else if(0<x.length){y.optimisticOps=y.optimisticOps.filter(function(J){return J.trans!==f});for(var j=0,q=Object.values(y.queries.query);j<q.length;j++)for(var L,$,F,U=0,R=(L=q[j]).slice();U<R.length;U++)($=R[U]).res!=null&&f.mutatedParts&&(v&&!$.dirty?(F=Object.isFrozen($.res),F=Ai($.res,$.req,x,_,$,F),$.dirty?(Qe(L,$),$.subscribers.forEach(function(J){return m.add(J)})):F!==$.res&&($.res=F,$.promise=V.resolve({result:F}))):($.dirty&&Qe(L,$),$.subscribers.forEach(function(J){return m.add(J)})))}}}m.forEach(function(J){return J()})}}},f.addEventListener("abort",o(!1),{signal:l}),f.addEventListener("error",o(!1),{signal:l}),f.addEventListener("complete",o(!0),{signal:l})),f},table:function(n){var r=e.table(n),o=r.schema.primaryKey;return c(c({},r),{mutate:function(u){var l=H.trans;if(o.outbound||l.db._options.cache==="disabled"||l.explicit)return r.mutate(u);var f=xt["idb://".concat(t,"/").concat(n)];return f?(l=r.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||Dr(o,u).some(function(v){return v==null}))?(f.optimisticOps.push(u),u.mutatedParts&&zn(u.mutatedParts),l.then(function(v){0<v.numFailures&&(Qe(f.optimisticOps,u),(v=xi(0,u,v))&&f.optimisticOps.push(v),u.mutatedParts&&zn(u.mutatedParts))}),l.catch(function(){Qe(f.optimisticOps,u),u.mutatedParts&&zn(u.mutatedParts)})):l.then(function(v){var m=xi(0,c(c({},u),{values:u.values.map(function(y,d){var E,y=(E=o.keyPath)!==null&&E!==void 0&&E.includes(".")?ve(y):c({},y);return W(y,o.keyPath,v.results[d]),y})}),v);f.optimisticOps.push(m),queueMicrotask(function(){return u.mutatedParts&&zn(u.mutatedParts)})}),l):r.mutate(u)},query:function(u){if(!Oi(H,r)||!Ei("query",u))return r.query(u);var l=((m=H.trans)===null||m===void 0?void 0:m.db._options.cache)==="immutable",d=H,f=d.requery,v=d.signal,m=function(_,x,b,A){var P=xt["idb://".concat(_,"/").concat(x)];if(!P)return[];if(!(x=P.queries[b]))return[null,!1,P,null];var S=x[(A.query?A.query.index.name:null)||""];if(!S)return[null,!1,P,null];switch(b){case"query":var j=S.find(function(q){return q.req.limit===A.limit&&q.req.values===A.values&&Pi(q.req.query.range,A.query.range)});return j?[j,!0,P,S]:[S.find(function(q){return("limit"in q.req?q.req.limit:1/0)>=A.limit&&(!A.values||q.req.values)&&Qo(q.req.query.range,A.query.range)}),!1,P,S];case"count":return j=S.find(function(q){return Pi(q.req.query.range,A.query.range)}),[j,!!j,P,S]}}(t,n,"query",u),O=m[0],d=m[1],E=m[2],y=m[3];return O&&d?O.obsSet=u.obsSet:(d=r.query(u).then(function(_){var x=_.result;if(O&&(O.res=x),l){for(var b=0,A=x.length;b<A;++b)Object.freeze(x[b]);Object.freeze(x)}else _.result=ve(x);return _}).catch(function(_){return y&&O&&Qe(y,O),Promise.reject(_)}),O={obsSet:u.obsSet,promise:d,subscribers:new Set,type:"query",req:u,dirty:!1},y?y.push(O):(y=[O],(E=E||(xt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=y)),Xo(O,y,f,v),O.promise.then(function(_){return{result:Ai(_.result,u,E?.optimisticOps,r,O,l)}})}})}})}};function Yn(e,t){return new Proxy(e,{get:function(n,r,o){return r==="db"?t:Reflect.get(n,r,o)}})}var at=(Ae.prototype.version=function(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Mo),n.stores({}),this._state.autoSchema=!1,n)},Ae.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?e():new V(function(n,r){if(t._state.openComplete)return r(new X.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new X.DatabaseClosed);t.open().catch(ge)}t._state.dbReadyPromise.then(n,r)}).then(e)},Ae.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:o}),e.sort(function(u,l){return u.level-l.level}),this},Ae.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(o){return r?o.create!==r:!!n&&o.name!==n})),this},Ae.prototype.open=function(){var e=this;return kt(ct,function(){return zo(e)})},Ae.prototype._close=function(){var e=this._state,t=$t.indexOf(this);if(0<=t&&$t.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new V(function(n){e.dbReadyResolve=n}),e.openCanceller=new V(function(n,r){e.cancelOpen=r}))},Ae.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new X.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new X.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Ae.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new V(function(o,u){function l(){t.close(e);var f=t._deps.indexedDB.deleteDatabase(t.name);f.onsuccess=Ee(function(){var v,m,O;v=t._deps,m=t.name,O=v.indexedDB,v=v.IDBKeyRange,Er(O)||m===Tn||Or(O,v).delete(m).catch(ge),o()}),f.onerror=Ze(u),f.onblocked=t._fireOnBlocked}if(n)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(l):l()})},Ae.prototype.backendDB=function(){return this.idbdb},Ae.prototype.isOpen=function(){return this.idbdb!==null},Ae.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Ae.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ae.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ae.prototype,"tables",{get:function(){var e=this;return w(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Ae.prototype.transaction=function(){var e=function(t,n,r){var o=arguments.length;if(o<2)throw new X.InvalidArgument("Too few arguments");for(var u=new Array(o-1);--o;)u[o-1]=arguments[o];return r=u.pop(),[t,we(u),r]}.apply(this,arguments);return this._transaction.apply(this,e)},Ae.prototype._transaction=function(e,t,n){var r=this,o=H.trans;o&&o.db===this&&e.indexOf("!")===-1||(o=null);var u,l,f=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(l=t.map(function(m){if(m=m instanceof r.Table?m.name:m,typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===fr)u=fr;else{if(e!="rw"&&e!=hr)throw new X.InvalidArgument("Invalid transaction mode: "+e);u=hr}if(o){if(o.mode===fr&&u===hr){if(!f)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&l.forEach(function(m){if(o&&o.storeNames.indexOf(m)===-1){if(!f)throw new X.SubTransaction("Table "+m+" not included in parent transaction.");o=null}}),f&&o&&!o.active&&(o=null)}}catch(m){return o?o._promise(null,function(O,d){d(m)}):xe(m)}var v=function m(O,d,E,y,_){return V.resolve().then(function(){var x=H.transless||H,b=O._createTransaction(d,E,O._dbSchema,y);if(b.explicit=!0,x={trans:b,transless:x},y)b.idbtrans=y.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,O._state.PR1398_maxLoop=3}catch(S){return S.name===tr.InvalidState&&O.isOpen()&&0<--O._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),O.close({disableAutoOpen:!1}),O.open().then(function(){return m(O,d,E,null,_)})):xe(S)}var A,P=le(_);return P&&qt(),x=V.follow(function(){var S;(A=_.call(b,b))&&(P?(S=ft.bind(null,null),A.then(S,S)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=Kr(A)))},x),(A&&typeof A.then=="function"?V.resolve(A).then(function(S){return b.active?S:xe(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return A})).then(function(S){return y&&b._resolve(),b._completion.then(function(){return S})}).catch(function(S){return b._reject(S),xe(S)})})}.bind(null,this,u,l,o,n);return o?o._promise(u,v,"lock"):H.trans?kt(H.transless,function(){return r._whenReady(v)}):this._whenReady(v)},Ae.prototype.table=function(e){if(!I(this._allTables,e))throw new X.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Ae);function Ae(e,t){var n=this;this._middlewares={},this.verno=0;var r=Ae.dependencies;this._options=t=c({addons:Ae.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,u,l,f,v,m={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ge,dbReadyPromise:null,cancelOpen:ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};m.dbReadyPromise=new V(function(d){m.dbReadyResolve=d}),m.openCanceller=new V(function(d,E){m.cancelOpen=E}),this._state=m,this.name=e,this.on=un(this,"populate","blocked","versionchange","close",{ready:[nr,ge]}),this.on.ready.subscribe=he(this.on.ready.subscribe,function(d){return function(E,y){Ae.vip(function(){var _,x=n._state;x.openComplete?(x.dbOpenError||V.resolve().then(E),y&&d(E)):x.onReadyBeingFired?(x.onReadyBeingFired.push(E),y&&d(E)):(d(E),_=n,y||d(function b(){_.on.ready.unsubscribe(E),_.on.ready.unsubscribe(b)}))})}}),this.Collection=(o=this,sn(Io.prototype,function(A,b){this.db=o;var y=ii,_=null;if(b)try{y=b()}catch(P){_=P}var x=A._ctx,b=x.table,A=b.hook.reading.fire;this._ctx={table:b,index:x.index,isPrimKey:!x.index||b.schema.primKey.keyPath&&x.index===b.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:A!==en?A:null}})),this.Table=(u=this,sn(si.prototype,function(d,E,y){this.db=u,this._tx=y,this.name=d,this.schema=E,this.hook=u._allTables[d]?u._allTables[d].hook:un(null,{creating:[xo,ge],reading:[Eo,en],updating:[Po,ge],deleting:[Ao,ge]})})),this.Transaction=(l=this,sn(qo.prototype,function(d,E,y,_,x){var b=this;this.db=l,this.mode=d,this.storeNames=E,this.schema=y,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=un(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new V(function(A,P){b._resolve=A,b._reject=P}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(A){var P=b.active;return b.active=!1,b.on.error.fire(A),b.parent?b.parent._reject(A):P&&b.idbtrans&&b.idbtrans.abort(),xe(A)})})),this.Version=(f=this,sn(Vo.prototype,function(d){this.db=f,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(v=this,sn(di.prototype,function(d,E,y){if(this.db=v,this._ctx={table:d,index:E===":id"?null:E,or:y},this._cmp=this._ascending=ce,this._descending=function(_,x){return ce(x,_)},this._max=function(_,x){return 0<ce(_,x)?_:x},this._min=function(_,x){return ce(_,x)<0?_:x},this._IDBKeyRange=v._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI})),this.on("versionchange",function(d){0<d.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=hn(t.IDBKeyRange),this._createTransaction=function(d,E,y,_){return new n.Transaction(d,E,y,n._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(d){n.on("blocked").fire(d),$t.filter(function(E){return E.name===n.name&&E!==n&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(d)})},this.use(Ho),this.use(Jo),this.use(Go),this.use(Wo),this.use(Yo);var O=new Proxy(this,{get:function(d,E,y){if(E==="_vip")return!0;if(E==="table")return function(x){return Yn(n.table(x),O)};var _=Reflect.get(d,E,y);return _ instanceof si?Yn(_,O):E==="tables"?_.map(function(x){return Yn(x,O)}):E==="_createTransaction"?function(){return Yn(_.apply(this,arguments),O)}:_}});this.vip=O,r.forEach(function(d){return d(n)})}var Hn,Le=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Zo=(Br.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Br.prototype[Le]=function(){return this},Br);function Br(e){this._subscribe=e}try{Hn={indexedDB:g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,IDBKeyRange:g.IDBKeyRange||g.webkitIDBKeyRange}}catch{Hn={indexedDB:null,IDBKeyRange:null}}function Si(e){var t,n=!1,r=new Zo(function(o){var u=le(e),l,f=!1,v={},m={},O={get closed(){return f},unsubscribe:function(){f||(f=!0,l&&l.abort(),d&&pt.storagemutated.unsubscribe(y))}};o.start&&o.start(O);var d=!1,E=function(){return lr(_)},y=function(x){Vn(v,x),Pr(m,v)&&E()},_=function(){var x,b,A;!f&&Hn.indexedDB&&(v={},x={},l&&l.abort(),l=new AbortController,A=function(P){var S=Bt();try{u&&qt();var j=lt(e,P);return j=u?j.finally(ft):j}finally{S&&Rt()}}(b={subscr:x,signal:l.signal,requery:E,querier:e,trans:null}),Promise.resolve(A).then(function(P){n=!0,t=P,f||b.signal.aborted||(v={},function(S){for(var j in S)if(I(S,j))return;return 1}(m=x)||d||(pt(fn,y),d=!0),lr(function(){return!f&&o.next&&o.next(P)}))},function(P){n=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||f||lr(function(){f||o.error&&o.error(P)})}))};return setTimeout(E,0),O});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var At=at;function Rr(e){var t=mt;try{mt=!0,pt.storagemutated.fire(e),jr(e,!0)}finally{mt=t}}T(At,c(c({},On),{delete:function(e){return new At(e,{addons:[]}).delete()},exists:function(e){return new At(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=At.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Er(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==Tn})}):Or(n,t).toCollection().primaryKeys()).then(e)}catch{return xe(new X.MissingAPI)}var t,n},defineClass:function(){return function(e){k(this,e)}},ignoreTransaction:function(e){return H.trans?kt(H.transless,e):e()},vip:xr,async:function(e){return function(){try{var t=Kr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:V.resolve(t)}catch(n){return xe(n)}}},spawn:function(e,t,n){try{var r=Kr(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:V.resolve(r)}catch(o){return xe(o)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(e,t){return t=V.resolve(typeof e=="function"?At.ignoreTransaction(e):e).timeout(t||6e4),H.trans?H.trans.waitFor(t):t},Promise:V,debug:{get:function(){return Je},set:function(e){Xr(e)}},derive:N,extend:k,props:T,override:he,Events:un,on:pt,liveQuery:Si,extendObservabilitySet:Vn,getByKeyPath:z,setByKeyPath:W,delByKeyPath:function(e,t){typeof t=="string"?W(e,t,void 0):"length"in t&&[].map.call(t,function(n){W(e,n,void 0)})},shallowClone:de,deepClone:ve,getObjectDiff:Tr,cmp:ce,asap:ye,minKey:-1/0,addons:[],connections:$t,errnames:tr,dependencies:Hn,cache:xt,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),At.maxKey=hn(At.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pt(fn,function(e){mt||(e=new CustomEvent(yr,{detail:e}),mt=!0,dispatchEvent(e),mt=!1)}),addEventListener(yr,function(e){e=e.detail,mt||Rr(e)}));var Mt,mt=!1,Ci=function(){};return typeof BroadcastChannel<"u"&&((Ci=function(){(Mt=new BroadcastChannel(yr)).onmessage=function(e){return e.data&&Rr(e.data)}})(),typeof Mt.unref=="function"&&Mt.unref(),pt(fn,function(e){mt||Mt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!at.disableBfCache&&e.persisted){Je&&console.debug("Dexie: handling persisted pagehide"),Mt?.close();for(var t=0,n=$t;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!at.disableBfCache&&e.persisted&&(Je&&console.debug("Dexie: handling persisted pageshow"),Ci(),Rr({all:new Be(-1/0,[[]])}))})),V.rejectionMapper=function(e,t){return!e||e instanceof Xe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Qr[e.name]?e:(t=new Qr[e.name](t||e.message,e),"stack"in e&&D(t,"stack",{get:function(){return this.inner.stack}}),t)},Xr(Je),c(at,Object.freeze({__proto__:null,Dexie:at,liveQuery:Si,Entity:oi,cmp:ce,PropModSymbol:ot,PropModification:cn,replacePrefix:function(e,t){return new cn({replacePrefix:[e,t]})},add:function(e){return new cn({add:e})},remove:function(e){return new cn({remove:e})},default:at,RangeSet:Be,mergeRanges:mn,rangesOverlap:gi}),{default:at}),at})})(yo);var wa=yo.exports;const Mr=_a(wa),Ni=Symbol.for("Dexie"),Lr=globalThis[Ni]||(globalThis[Ni]=Mr);if(Mr.semVer!==Lr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Mr.semVer} and ${Lr.semVer}`);/*! typescript-cookie v1.0.6 | MIT */const vo=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),go=a=>encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),Wr=decodeURIComponent,Yr=a=>(a[0]==='"'&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function ka(a){return a=Object.assign({},a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires!=null&&(a.expires=a.expires.toUTCString()),Object.entries(a).filter(([i,s])=>s!=null&&s!==!1).map(([i,s])=>s===!0?`; ${i}`:`; ${i}=${s.split(";")[0]}`).join("")}function bo(a,i,s){const c=/(?:^|; )([^=]*)=([^;]*)/g,p={};let g;for(;(g=c.exec(document.cookie))!=null;)try{const w=s(g[1]);if(p[w]=i(g[2],w),a===w)break}catch{}return a!=null?p[a]:p}const Fi=Object.freeze({decodeName:Wr,decodeValue:Yr,encodeName:vo,encodeValue:go}),Hr=Object.freeze({path:"/"});function Gr(a,i,s=Hr,{encodeValue:c=go,encodeName:p=vo}={}){return document.cookie=`${p(a)}=${c(i,a)}${ka(s)}`}function _o(a,{decodeValue:i=Yr,decodeName:s=Wr}={}){return bo(a,i,s)}function Oa({decodeValue:a=Yr,decodeName:i=Wr}={}){return bo(void 0,a,i)}function wo(a,i=Hr){Gr(a,"",Object.assign({},i,{expires:-1}))}function Ur(a,i){const s={set:function(p,g,w){return Gr(p,g,Object.assign({},this.attributes,w),{encodeValue:this.converter.write})},get:function(p){if(arguments.length===0)return Oa(this.converter.read);if(p!=null)return _o(p,this.converter.read)},remove:function(p,g){wo(p,Object.assign({},this.attributes,g))},withAttributes:function(p){return Ur(this.converter,Object.assign({},this.attributes,p))},withConverter:function(p){return Ur(Object.assign({},this.converter,p),this.attributes)}},c={attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(a)}};return Object.create(s,c)}Ur({read:Fi.decodeValue,write:Fi.encodeValue},Hr);const tt=new Lr("umamusume");tt.version(1).stores({events:"++id",images:"id"});const Ea=async a=>{const s=await(await fetch("uma.json",{cache:"no-cache"})).json();return s&&await tt.transaction("rw!",tt.table("events"),async()=>{await tt.table("events").clear(),await tt.table("events").bulkAdd(s)}).then(()=>Gr("last",a,{expires:365})),s},ko=async()=>{const i=await(await fetch("last",{cache:"no-cache"})).text();let s;return i!=_o("last")?s=await Ea(i):s=await tt.table("events").toArray(),!s||!s.length?(wo("last"),await ko()):s},Ht=await ko(),Mi=Array.from(Ht.filter(a=>a.t=="c"),a=>({name:a.c,image:a.i})).concat(Array.from(Ht.filter(a=>a.t=="m"),a=>({name:a.c,image:a.i}))).filter((a,i,s)=>s.findIndex(c=>c.name==a.name)==i),yt=_n({type:"character",name:"",image:""}),zt=_n({rare:"SSR"}),Gt=_n(""),xa=mo(yt,a=>{let i=[];return a.name?a.type=="character"?i=Ht.filter(s=>(s.t=="c"||s.t=="m")&&s.c==a.name):a.type=="support"&&(i=Ht.filter(s=>s.t=="s"&&s.i==a.image)):i=Ht,i.sort((s,c)=>s.c==c.c?s.t==c.t?s.r==c.r?s.e.localeCompare(c.e):s.r.localeCompare(c.r):s.t.localeCompare(c.t):s.c.localeCompare(c.c)),i}),Aa=mo(zt,a=>{let i=Array.from(Ht.filter(s=>s.t=="s"),s=>({name:s.c,rare:s.r,image:s.i})).filter((s,c,p)=>p.findIndex(g=>g.image==s.image)==c);return a.type&&(i=i.filter(s=>s.rare.includes(a.type))),a.rare&&(i=i.filter(s=>s.rare.replace(/[^SR]+/g,"")==a.rare)),i.sort((s,c)=>s.rare.replace(/[^SR]+/g,"")==c.rare.replace(/[^SR]+/g,"")?s.name.localeCompare(c.name):c.rare.replace(/[^SR]+/g,"").localeCompare(s.rare.replace(/[^SR]+/g,""))),i}),Pa=()=>{const{subscribe:a,set:i,update:s}=_n(!1);return{subscribe:a,switch:()=>s(c=>!c),off:()=>i(!1)}},St=Pa();function Sa(a){let i,s,c;return{c(){i=G("header"),i.innerHTML='<a class="navbar-brand text-primary m-0 mr-md-3 sg1gxfn" href="/"></a>',Q(i,"class","navbar navbar-expand flex-column flex-md-row sg1gxfn")},m(p,g){se(p,i,g),s||(c=Ve(i,"mousedown",St.off),s=!0)},p:Oe,i:Oe,o:Oe,d(p){p&&ae(i),s=!1,c()}}}class Ca extends Zt{constructor(i){super(),Jt(this,i,null,Sa,jt,{})}}function ja(a){let i,s,c,p,g;return{c(){i=G("img"),Q(i,"class",s=Ti(a[3])+" s1s429m7"),Q(i,"style",a[4]),Ki(i.src,c=a[5])||Q(i,"src",c),Q(i,"title",a[2]),Q(i,"alt",a[0]),De(i,"selected",a[1])},m(w,h){se(w,i,h),p||(g=Ve(i,"click",a[7]),p=!0)},p(w,[h]){h&8&&s!==(s=Ti(w[3])+" s1s429m7")&&Q(i,"class",s),h&16&&Q(i,"style",w[4]),h&32&&!Ki(i.src,c=w[5])&&Q(i,"src",c),h&4&&Q(i,"title",w[2]),h&1&&Q(i,"alt",w[0]),h&10&&De(i,"selected",w[1])},i:Oe,o:Oe,d(w){w&&ae(i),p=!1,g()}}}function Ka(a,i,s){let{id:c}=i,{alt:p}=i,{selected:g=!1}=i,{title:w=""}=i,{type:h=""}=i,{style:k=""}=i,C="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEAAAAALAAAAAABAAEAgAAAAAAAAAICRAEAOw==";const B=async()=>{let T;if(!c)return;const K=await tt.transaction("r",tt.table("images"),()=>tt.table("images").get({id:c}));if(K?T=K.image:T=new Blob,!T.size){const D=c;let N=`/image/${D}`;c.endsWith(".png")||(N=`/support/${D}.png`);try{const M=await fetch(N);M.ok&&(T=await M.blob(),D&&T.size&&tt.table("images").put({id:D,image:T}))}catch{}}T.size?s(5,C=URL.createObjectURL(T)):s(5,C="")};function I(T){ca.call(this,a,T)}return a.$$set=T=>{"id"in T&&s(6,c=T.id),"alt"in T&&s(0,p=T.alt),"selected"in T&&s(1,g=T.selected),"title"in T&&s(2,w=T.title),"type"in T&&s(3,h=T.type),"style"in T&&s(4,k=T.style)},a.$$.update=()=>{a.$$.dirty&64&&B()},[p,g,w,h,k,C,c,I]}class Kt extends Zt{constructor(i){super(),Jt(this,i,Ka,ja,jt,{id:6,alt:0,selected:1,title:2,type:3,style:4})}}function Li(a,i,s){const c=a.slice();return c[5]=i[s],c}function Ui(a,i,s){const c=a.slice();return c[8]=i[s][0],c[9]=i[s][1],c}function Vi(a,i){let s,c,p,g,w,h,k;p=new Kt({props:{id:i[8],alt:i[8],type:"type"}});function C(){return i[3](i[9])}return{key:a,first:null,c(){s=G("li"),c=G("span"),Ge(p.$$.fragment),g=me(),Q(c,"class","s9ef3dn"),De(c,"checked",i[0].type==i[9]),Q(s,"class","s9ef3dn"),this.first=s},m(B,I){se(B,s,I),Y(s,c),We(p,c,null),Y(s,g),w=!0,h||(k=Ve(c,"click",C),h=!0)},p(B,I){i=B,(!w||I&3)&&De(c,"checked",i[0].type==i[9])},i(B){w||(be(p.$$.fragment,B),w=!0)},o(B){_e(p.$$.fragment,B),w=!1},d(B){B&&ae(s),Ye(p),h=!1,k()}}}function Ta(a){let i,s;return i=new Kt({props:{id:a[5].toLowerCase(),alt:a[5],type:"rare"}}),{c(){Ge(i.$$.fragment)},m(c,p){We(i,c,p),s=!0},p:Oe,i(c){s||(be(i.$$.fragment,c),s=!0)},o(c){_e(i.$$.fragment,c),s=!1},d(c){Ye(i,c)}}}function zi(a,i){let s,c,p,g,w,h,k=i[5]&&Ta(i);function C(){return i[4](i[5])}return{key:a,first:null,c(){s=G("li"),c=G("span"),k&&k.c(),p=me(),Q(c,"class","s9ef3dn"),De(c,"checked",i[0].rare==i[5]),Q(s,"class","s9ef3dn"),this.first=s},m(B,I){se(B,s,I),Y(s,c),k&&k.m(c,null),Y(s,p),g=!0,w||(h=Ve(c,"click",C),w=!0)},p(B,I){i=B,i[5]&&k.p(i,I),(!g||I&5)&&De(c,"checked",i[0].rare==i[5])},i(B){g||(be(k),g=!0)},o(B){_e(k),g=!1},d(B){B&&ae(s),k&&k.d(),w=!1,h()}}}function Da(a){let i,s=[],c=new Map,p,g,w=[],h=new Map,k,C=ze(Object.entries(a[1]));const B=K=>K[8];for(let K=0;K<C.length;K+=1){let D=Ui(a,C,K),N=B(D);c.set(N,s[K]=Vi(N,D))}let I=ze(a[2]);const T=K=>K[5];for(let K=0;K<I.length;K+=1){let D=Li(a,I,K),N=T(D);h.set(N,w[K]=zi(N,D))}return{c(){i=G("ul");for(let K=0;K<s.length;K+=1)s[K].c();p=me(),g=G("ul");for(let K=0;K<w.length;K+=1)w[K].c();Q(i,"class","type s9ef3dn"),Q(g,"class","rare s9ef3dn")},m(K,D){se(K,i,D);for(let N=0;N<s.length;N+=1)s[N]&&s[N].m(i,null);se(K,p,D),se(K,g,D);for(let N=0;N<w.length;N+=1)w[N]&&w[N].m(g,null);k=!0},p(K,[D]){D&3&&(C=ze(Object.entries(K[1])),ut(),s=Xt(s,D,B,1,K,C,c,i,gn,Vi,null,Ui),st()),D&5&&(I=ze(K[2]),ut(),w=Xt(w,D,T,1,K,I,h,g,gn,zi,null,Li),st())},i(K){if(!k){for(let D=0;D<C.length;D+=1)be(s[D]);for(let D=0;D<I.length;D+=1)be(w[D]);k=!0}},o(K){for(let D=0;D<s.length;D+=1)_e(s[D]);for(let D=0;D<w.length;D+=1)_e(w[D]);k=!1},d(K){K&&(ae(i),ae(p),ae(g));for(let D=0;D<s.length;D+=1)s[D].d();for(let D=0;D<w.length;D+=1)w[D].d()}}}function Ia(a,i,s){let c;return vt(a,zt,k=>s(0,c=k)),[c,{speed:"",stamina:"",power:"",guts:"",intelligence:"",friend:"",group:""},["SSR","SR","R"],k=>{const C=document.getElementById("supports");C&&(C.scrollTop=0),c.type==k?Ue(zt,c.type=void 0,c):Ue(zt,c.type=k,c)},k=>{const C=document.getElementById("supports");C&&(C.scrollTop=0),c.rare==k?Ue(zt,c.rare=void 0,c):Ue(zt,c.rare=k,c)}]}class Ba extends Zt{constructor(i){super(),Jt(this,i,Ia,Da,jt,{})}}function Wi(a,i,s){const c=a.slice();return c[10]=i[s],c}function Yi(a,i,s){const c=a.slice();return c[10]=i[s],c}function Ra(a){let i,s,c,p,g=a[2].name+"",w,h,k,C=a[2].rare+"",B,I;return i=new Kt({props:{id:a[2].image,alt:a[2].name,type:"icon"}}),{c(){Ge(i.$$.fragment),s=me(),c=G("div"),p=G("span"),w=$e(g),h=me(),k=G("span"),B=$e(C),Ct(c,"display","grid")},m(T,K){We(i,T,K),se(T,s,K),se(T,c,K),Y(c,p),Y(p,w),Y(c,h),Y(c,k),Y(k,B),I=!0},p(T,K){const D={};K&4&&(D.id=T[2].image),K&4&&(D.alt=T[2].name),i.$set(D),(!I||K&4)&&g!==(g=T[2].name+"")&&nt(w,g),(!I||K&4)&&C!==(C=T[2].rare+"")&&nt(B,C)},i(T){I||(be(i.$$.fragment,T),I=!0)},o(T){_e(i.$$.fragment,T),I=!1},d(T){T&&(ae(s),ae(c)),Ye(i,T)}}}function qa(a){let i,s,c,p=a[2].name+"",g,w;return i=new Kt({props:{id:a[2].image,alt:a[2].name,type:"icon"}}),{c(){Ge(i.$$.fragment),s=me(),c=G("span"),g=$e(p)},m(h,k){We(i,h,k),se(h,s,k),se(h,c,k),Y(c,g),w=!0},p(h,k){const C={};k&4&&(C.id=h[2].image),k&4&&(C.alt=h[2].name),i.$set(C),(!w||k&4)&&p!==(p=h[2].name+"")&&nt(g,p)},i(h){w||(be(i.$$.fragment,h),w=!0)},o(h){_e(i.$$.fragment,h),w=!1},d(h){h&&(ae(s),ae(c)),Ye(i,h)}}}function $a(a){let i;return{c(){i=G("h5"),i.textContent="",Ct(i,"color","gray"),Q(i,"class","st4d7gg")},m(s,c){se(s,i,c)},p:Oe,i:Oe,o:Oe,d(s){s&&ae(i)}}}function Na(a){let i,s,c,p,g,w;i=new Ba({});const h=[La,Ma],k=[];function C(B,I){return B[4].length?0:1}return p=C(a),g=k[p]=h[p](a),{c(){Ge(i.$$.fragment),s=me(),c=G("div"),g.c(),Q(c,"id","supports"),Q(c,"class","list st4d7gg")},m(B,I){We(i,B,I),se(B,s,I),se(B,c,I),k[p].m(c,null),w=!0},p(B,I){let T=p;p=C(B),p===T?k[p].p(B,I):(ut(),_e(k[T],1,1,()=>{k[T]=null}),st(),g=k[p],g?g.p(B,I):(g=k[p]=h[p](B),g.c()),be(g,1),g.m(c,null))},i(B){w||(be(i.$$.fragment,B),be(g),w=!0)},o(B){_e(i.$$.fragment,B),_e(g),w=!1},d(B){B&&(ae(s),ae(c)),Ye(i,B),k[p].d()}}}function Fa(a){let i,s=[],c=new Map,p,g=ze(Mi);const w=h=>h[10].name;for(let h=0;h<g.length;h+=1){let k=Yi(a,g,h),C=w(k);c.set(C,s[h]=Gi(C,k))}return{c(){i=G("div");for(let h=0;h<s.length;h+=1)s[h].c();Q(i,"class","characters list st4d7gg")},m(h,k){se(h,i,k);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(i,null);p=!0},p(h,k){k&12&&(g=ze(Mi),ut(),s=Xt(s,k,w,1,h,g,c,i,gn,Gi,null,Yi),st())},i(h){if(!p){for(let k=0;k<g.length;k+=1)be(s[k]);p=!0}},o(h){for(let k=0;k<s.length;k+=1)_e(s[k]);p=!1},d(h){h&&ae(i);for(let k=0;k<s.length;k+=1)s[k].d()}}}function Ma(a){let i;return{c(){i=$e("")},m(s,c){se(s,i,c)},p:Oe,i:Oe,o:Oe,d(s){s&&ae(i)}}}function La(a){let i=[],s=new Map,c,p,g=ze(a[4]);const w=h=>h[10].image;for(let h=0;h<g.length;h+=1){let k=Wi(a,g,h),C=w(k);s.set(C,i[h]=Hi(C,k))}return{c(){for(let h=0;h<i.length;h+=1)i[h].c();c=ra()},m(h,k){for(let C=0;C<i.length;C+=1)i[C]&&i[C].m(h,k);se(h,c,k),p=!0},p(h,k){k&28&&(g=ze(h[4]),ut(),i=Xt(i,k,w,1,h,g,s,c.parentNode,gn,Hi,c,Wi),st())},i(h){if(!p){for(let k=0;k<g.length;k+=1)be(i[k]);p=!0}},o(h){for(let k=0;k<i.length;k+=1)_e(i[k]);p=!1},d(h){h&&ae(c);for(let k=0;k<i.length;k+=1)i[k].d(h)}}}function Hi(a,i){let s,c,p,g;function w(){return i[9](i[10])}return c=new Kt({props:{selected:i[2].type=="support"&&i[2].image==i[10].image,id:i[10].image,alt:i[10].name,title:i[10].name,type:"icon",style:"min-height:96px"}}),c.$on("click",w),{key:a,first:null,c(){s=G("li"),Ge(c.$$.fragment),p=me(),Q(s,"class","st4d7gg"),this.first=s},m(h,k){se(h,s,k),We(c,s,null),Y(s,p),g=!0},p(h,k){i=h;const C={};k&20&&(C.selected=i[2].type=="support"&&i[2].image==i[10].image),k&16&&(C.id=i[10].image),k&16&&(C.alt=i[10].name),k&16&&(C.title=i[10].name),c.$set(C)},i(h){g||(be(c.$$.fragment,h),g=!0)},o(h){_e(c.$$.fragment,h),g=!1},d(h){h&&ae(s),Ye(c)}}}function Gi(a,i){let s,c,p,g;function w(){return i[8](i[10])}return c=new Kt({props:{selected:i[2].type=="character"&&i[2].name==i[10].name,id:i[10].image,alt:i[10].name,title:i[10].name,type:"icon",style:"height:72px"}}),c.$on("click",w),{key:a,first:null,c(){s=G("li"),Ge(c.$$.fragment),p=me(),Q(s,"class","st4d7gg"),this.first=s},m(h,k){se(h,s,k),We(c,s,null),Y(s,p),g=!0},p(h,k){i=h;const C={};k&4&&(C.selected=i[2].type=="character"&&i[2].name==i[10].name),c.$set(C)},i(h){g||(be(c.$$.fragment,h),g=!0)},o(h){_e(c.$$.fragment,h),g=!1},d(h){h&&ae(s),Ye(c)}}}function Ua(a){let i,s,c,p,g,w,h,k,C,B,I,T,K,D,N,M,ee,oe,he,ue,ye,z,W,de,pe,we,je,te,ve,Ne;const Tt=[$a,qa,Ra],Fe=[];function wn(le,Pe){return le[2].name?le[2].type=="character"?1:le[2].type=="support"?2:-1:0}~(N=wn(a))&&(M=Fe[N]=Tt[N](a));const Qe=[Fa,Na],Ie=[];function Me(le,Pe){return le[0]=="character"?0:1}return we=Me(a),je=Ie[we]=Qe[we](a),{c(){i=G("span"),s=Ii("svg"),c=Ii("path"),g=me(),w=G("div"),h=G("div"),k=G("div"),C=G("h5"),C.textContent=":",B=me(),I=G("div"),T=G("button"),K=me(),D=G("div"),M&&M.c(),ee=me(),oe=G("ul"),he=G("li"),ue=G("span"),ue.textContent="",ye=me(),z=G("li"),W=G("span"),W.textContent="",de=me(),pe=G("div"),je.c(),Q(c,"d","M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"),Q(s,"viewBox","0 0 16 16"),Q(s,"width","32"),Q(s,"height","32"),Q(s,"fill",p=a[2].name?"#007bff":"#6c757d"),Q(i,"class","toggle st4d7gg"),De(i,"on",a[1]),Q(C,"class","st4d7gg"),Q(T,"class","btn-close st4d7gg"),Q(I,"class","button st4d7gg"),De(I,"hidden",a[2].name==""),Q(D,"class","display st4d7gg"),Q(h,"class","info st4d7gg"),Q(ue,"class","nav-link st4d7gg"),De(ue,"active",a[0]=="character"),Q(he,"class","nav-item st4d7gg"),Q(W,"class","nav-link st4d7gg"),De(W,"active",a[0]=="support"),Q(z,"class","nav-item st4d7gg"),Q(oe,"class","nav nav-tabs st4d7gg"),Q(pe,"class","items st4d7gg"),Q(w,"class","filter st4d7gg"),De(w,"open",a[1])},m(le,Pe){se(le,i,Pe),Y(i,s),Y(s,c),se(le,g,Pe),se(le,w,Pe),Y(w,h),Y(h,k),Y(k,C),Y(k,B),Y(k,I),Y(I,T),Y(h,K),Y(h,D),~N&&Fe[N].m(D,null),Y(w,ee),Y(w,oe),Y(oe,he),Y(he,ue),Y(oe,ye),Y(oe,z),Y(z,W),Y(w,de),Y(w,pe),Ie[we].m(pe,null),te=!0,ve||(Ne=[Ve(i,"click",St.switch),Ve(T,"click",a[5]),Ve(ue,"click",a[6]),Ve(W,"click",a[7])],ve=!0)},p(le,[Pe]){(!te||Pe&4&&p!==(p=le[2].name?"#007bff":"#6c757d"))&&Q(s,"fill",p),(!te||Pe&2)&&De(i,"on",le[1]),(!te||Pe&4)&&De(I,"hidden",le[2].name=="");let Xe=N;N=wn(le),N===Xe?~N&&Fe[N].p(le,Pe):(M&&(ut(),_e(Fe[Xe],1,1,()=>{Fe[Xe]=null}),st()),~N?(M=Fe[N],M?M.p(le,Pe):(M=Fe[N]=Tt[N](le),M.c()),be(M,1),M.m(D,null)):M=null),(!te||Pe&1)&&De(ue,"active",le[0]=="character"),(!te||Pe&1)&&De(W,"active",le[0]=="support");let Dt=we;we=Me(le),we===Dt?Ie[we].p(le,Pe):(ut(),_e(Ie[Dt],1,1,()=>{Ie[Dt]=null}),st(),je=Ie[we],je?je.p(le,Pe):(je=Ie[we]=Qe[we](le),je.c()),be(je,1),je.m(pe,null)),(!te||Pe&2)&&De(w,"open",le[1])},i(le){te||(be(M),be(je),te=!0)},o(le){_e(M),_e(je),te=!1},d(le){le&&(ae(i),ae(g),ae(w)),~N&&Fe[N].d(),Ie[we].d(),ve=!1,rt(Ne)}}}function Va(a,i,s){let c,p,g,w;vt(a,St,K=>s(1,c=K)),vt(a,yt,K=>s(2,p=K)),vt(a,Gt,K=>s(3,g=K)),vt(a,Aa,K=>s(4,w=K));let h="character";return[h,c,p,g,w,()=>{window.innerWidth<=767&&St.off(),Ue(yt,p={type:"character",name:"",image:""},p)},()=>s(0,h="character"),()=>s(0,h="support"),K=>{window.innerWidth<=767&&St.off(),p.name&&(p.type=="support"||p.type=="character"&&p.name!=K.name)&&Ue(Gt,g="",g),p.type=="character"&&p.name==K.name?Ue(yt,p={type:"character",name:"",image:""},p):Ue(yt,p={type:"character",name:K.name,image:K.image},p)},K=>{window.innerWidth<=767&&St.off(),p.name&&(p.type=="character"||p.type=="support"&&p.image!=K.image)&&Ue(Gt,g="",g),p.type=="support"&&p.image==K.image?Ue(yt,p={type:"support",name:"",image:""},p):Ue(yt,p={type:"support",name:K.name,rare:K.rare,image:K.image},p)}]}class za extends Zt{constructor(i){super(),Jt(this,i,Va,Ua,jt,{})}}function Wa(a){const i=a-1;return i*i*i+1}function Qi(a,{delay:i=0,duration:s=400,easing:c=Wa,x:p=0,y:g=0,opacity:w=0}={}){const h=getComputedStyle(a),k=+h.opacity,C=h.transform==="none"?"":h.transform,B=k*(1-w),[I,T]=Di(p),[K,D]=Di(g);return{delay:i,duration:s,easing:c,css:(N,M)=>`
			transform: ${C} translate(${(1-N)*I}${T}, ${(1-N)*K}${D});
			opacity: ${k-B*M}`}}function Xi(a,i,s){const c=a.slice();return c[13]=i[s],c}function Ji(a,i,s){const c=a.slice();return c[16]=i[s],c}function Zi(a){let i,s;function c(){return a[10](a[13])}return i=new Kt({props:{id:a[13].i,alt:a[13].c,type:"link"}}),i.$on("click",c),{c(){Ge(i.$$.fragment)},m(p,g){We(i,p,g),s=!0},p(p,g){a=p;const w={};g&2&&(w.id=a[13].i),g&2&&(w.alt=a[13].c),i.$set(w)},i(p){s||(be(i.$$.fragment,p),s=!0)},o(p){_e(i.$$.fragment,p),s=!1},d(p){Ye(i,p)}}}function Ya(a){let i,s=a[13].c+"",c,p,g,w=a[13].t=="c"?"":"",h,k,C,B=a[13].r+"",I;return{c(){i=G("span"),c=$e(s),p=me(),g=G("span"),h=$e(w),k=me(),C=G("span"),I=$e(B)},m(T,K){se(T,i,K),Y(i,c),se(T,p,K),se(T,g,K),Y(g,h),se(T,k,K),se(T,C,K),Y(C,I)},p(T,K){K&2&&s!==(s=T[13].c+"")&&nt(c,s),K&2&&w!==(w=T[13].t=="c"?"":"")&&nt(h,w),K&2&&B!==(B=T[13].r+"")&&nt(I,B)},d(T){T&&(ae(i),ae(p),ae(g),ae(k),ae(C))}}}function Ha(a){let i,s=a[13].c+"",c,p,g;return{c(){i=G("span"),c=$e(s),p=me(),g=G("span"),g.textContent=""},m(w,h){se(w,i,h),Y(i,c),se(w,p,h),se(w,g,h)},p(w,h){h&2&&s!==(s=w[13].c+"")&&nt(c,s)},d(w){w&&(ae(i),ae(p),ae(g))}}}function eo(a,i){let s,c,p=i[16].b+"",g,w,h=i[6](i[16])+"",k;return{key:a,first:null,c(){s=G("tr"),c=G("td"),g=me(),w=G("td"),k=me(),Ct(c,"vertical-align","middle"),Ct(w,"white-space","pre-line"),this.first=s},m(C,B){se(C,s,B),Y(s,c),c.innerHTML=p,Y(s,g),Y(s,w),w.innerHTML=h,Y(s,k)},p(C,B){i=C,B&2&&p!==(p=i[16].b+"")&&(c.innerHTML=p),B&2&&h!==(h=i[6](i[16])+"")&&(w.innerHTML=h)},d(C){C&&ae(s)}}}function to(a,i){let s,c,p,g,w=i[13].e+"",h,k,C,B,I,T,K,D,N,M=[],ee=new Map,oe,he,ue,ye,z=(i[13].a||i[13].i)&&Zi(i);function W(te,ve){return te[13].t=="m"?Ha:Ya}let de=W(i),pe=de(i),we=ze(i[13].o);const je=te=>te[16].b+te[16].g;for(let te=0;te<we.length;te+=1){let ve=Ji(i,we,te),Ne=je(ve);ee.set(Ne,M[te]=eo(Ne,ve))}return{key:a,first:null,c(){s=G("table"),c=G("thead"),p=G("tr"),g=G("th"),h=$e(w),k=me(),C=G("tbody"),B=G("tr"),I=G("td"),T=G("div"),z&&z.c(),K=me(),D=G("div"),pe.c(),N=me();for(let te=0;te<M.length;te+=1)M[te].c();oe=me(),Q(g,"colspan","2"),Ct(D,"display","grid"),Ct(T,"display","flex"),Q(I,"colspan","2"),Q(C,"class","s1gy2h74"),Q(s,"class","table table-bordered s1gy2h74"),this.first=s},m(te,ve){se(te,s,ve),Y(s,c),Y(c,p),Y(p,g),Y(g,h),Y(s,k),Y(s,C),Y(C,B),Y(B,I),Y(I,T),z&&z.m(T,null),Y(T,K),Y(T,D),pe.m(D,null),Y(C,N);for(let Ne=0;Ne<M.length;Ne+=1)M[Ne]&&M[Ne].m(C,null);Y(s,oe),ye=!0},p(te,ve){i=te,(!ye||ve&2)&&w!==(w=i[13].e+"")&&nt(h,w),i[13].a||i[13].i?z?(z.p(i,ve),ve&2&&be(z,1)):(z=Zi(i),z.c(),be(z,1),z.m(T,K)):z&&(ut(),_e(z,1,1,()=>{z=null}),st()),de===(de=W(i))&&pe?pe.p(i,ve):(pe.d(1),pe=de(i),pe&&(pe.c(),pe.m(D,null))),ve&66&&(we=ze(i[13].o),M=Xt(M,ve,je,1,i,we,ee,C,ya,eo,null,Ji))},i(te){ye||(be(z),te&&Qt(()=>{ye&&(ue&&ue.end(1),he=pa(s,Qi,{x:"100%",duration:400}),he.start())}),ye=!0)},o(te){_e(z),he&&he.invalidate(),te&&(ue=ma(s,Qi,{x:"100%",duration:400})),ye=!1},d(te){te&&ae(s),z&&z.d(),pe.d();for(let ve=0;ve<M.length;ve+=1)M[ve].d();te&&ue&&ue.end()}}}function Ga(a){let i,s,c,p,g,w,h=`${a[0].name?1:2}`,k,C,B,I=`(${a[2]}/${a[4].length})`,T,K,D,N=[],M=new Map,ee,oe,he,ue=ze(a[1]);const ye=z=>z[13].c+z[13].r+z[13].e+z[13].k+JSON.stringify(z[13].o);for(let z=0;z<ue.length;z+=1){let W=Xi(a,ue,z),de=ye(W);M.set(de,N[z]=to(de,W))}return{c(){i=G("div"),s=G("div"),c=G("input"),p=me(),g=G("div"),w=G("span"),k=$e(h),C=me(),B=G("span"),T=$e(I),K=me(),D=G("div");for(let z=0;z<N.length;z+=1)N[z].c();Q(c,"class","form-control"),Q(c,"type","search"),Q(c,"placeholder",""),Q(s,"class","input-group s1gy2h74"),Ct(B,"float","right"),Q(g,"class","message s1gy2h74"),Q(D,"id","results"),Q(D,"class","s1gy2h74"),Q(i,"class","content s1gy2h74")},m(z,W){se(z,i,W),Y(i,s),Y(s,c),Bi(c,a[3]),Y(i,p),Y(i,g),Y(g,w),Y(w,k),Y(g,C),Y(g,B),Y(B,T),Y(i,K),Y(i,D);for(let de=0;de<N.length;de+=1)N[de]&&N[de].m(D,null);ee=!0,oe||(he=[Ve(c,"input",a[8]),Ve(c,"keydown",a[9]),Ve(c,"input",a[5]),Ve(i,"mousedown",St.off)],oe=!0)},p(z,[W]){W&8&&c.value!==z[3]&&Bi(c,z[3]),(!ee||W&1)&&h!==(h=`${z[0].name?1:2}`)&&nt(k,h),(!ee||W&20)&&I!==(I=`(${z[2]}/${z[4].length})`)&&nt(T,I),W&66&&(ue=ze(z[1]),ut(),N=Xt(N,W,ye,1,z,ue,M,D,gn,to,null,Xi),st())},i(z){if(!ee){for(let W=0;W<ue.length;W+=1)be(N[W]);ee=!0}},o(z){for(let W=0;W<N.length;W+=1)_e(N[W]);ee=!1},d(z){z&&ae(i);for(let W=0;W<N.length;W+=1)N[W].d();oe=!1,rt(he)}}}function Qa(a,i,s){let c,p,g;vt(a,Gt,M=>s(3,c=M)),vt(a,xa,M=>s(4,p=M)),vt(a,yt,M=>s(0,g=M));let w=[],h=0,k=0;const C=(M,ee)=>{if(ee.c.includes(M)||ee.e.includes(M)||ee.k.includes(M))return!0;let oe=!1;return ee.o.forEach(he=>{he.b.includes(M)&&(oe=!0)}),oe},B=()=>{let M=[];c?(g.name?c.length>0:c.length>1)&&p.forEach(ye=>{C(c,ye)&&M.push(ye)}):g.name&&(M=p);const ee=document.getElementById("results");ee&&(ee.scrollTop=0);const oe=70;k++;const he=k,ue=w.length>5?5:w.length;if(ue){s(1,w=w.slice(0,ue));const ye=setInterval(()=>{if(w.length&&he==k){s(1,w=w.slice(1,w.length));return}clearInterval(ye)},oe)}s(2,h=M.length)&&setTimeout(()=>{if(he==k){let ye=1;const z=setInterval(()=>{if(ye<=5&&ye<=h&&he==k){s(1,w=M.slice(0,ye)),ye++;return}clearInterval(z),h>5&&he==k&&s(1,w=M)},oe)}},ue?ue*oe+300:0)},I=M=>{let ee=M.g;return M.s&&Object.entries(M.s).forEach(([oe,he])=>{ee=ee.replaceAll(`${oe}`,`<a href="${he}" target="_blank">${oe}</a>`)}),ee},T=()=>{Ue(Gt,c="",c),s(1,w=[])};function K(){c=this.value,Gt.set(c)}const D=M=>{M.key==="Escape"&&T()},N=M=>{M.a&&window.open(M.a)};return a.$$.update=()=>{a.$$.dirty&1&&B()},[g,w,h,c,p,B,I,T,K,D,N]}class Xa extends Zt{constructor(i){super(),Jt(this,i,Qa,Ga,jt,{})}}function Ja(a){let i,s,c,p,g,w;return i=new Ca({}),c=new za({}),g=new Xa({}),{c(){Ge(i.$$.fragment),s=me(),Ge(c.$$.fragment),p=me(),Ge(g.$$.fragment)},m(h,k){We(i,h,k),se(h,s,k),We(c,h,k),se(h,p,k),We(g,h,k),w=!0},p:Oe,i(h){w||(be(i.$$.fragment,h),be(c.$$.fragment,h),be(g.$$.fragment,h),w=!0)},o(h){_e(i.$$.fragment,h),_e(c.$$.fragment,h),_e(g.$$.fragment,h),w=!1},d(h){h&&(ae(s),ae(p)),Ye(i,h),Ye(c,h),Ye(g,h)}}}class Za extends Zt{constructor(i){super(),Jt(this,i,null,Ja,jt,{})}}new Za({target:document.body});
